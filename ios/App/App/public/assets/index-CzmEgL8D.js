(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function B_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Ky={exports:{}},fc={},Gy={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),U_=Symbol.for("react.portal"),H_=Symbol.for("react.fragment"),W_=Symbol.for("react.strict_mode"),q_=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),G_=Symbol.for("react.context"),Y_=Symbol.for("react.forward_ref"),X_=Symbol.for("react.suspense"),J_=Symbol.for("react.memo"),Q_=Symbol.for("react.lazy"),ap=Symbol.iterator;function Z_(e){return e===null||typeof e!="object"?null:(e=ap&&e[ap]||e["@@iterator"],typeof e=="function"?e:null)}var Yy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xy=Object.assign,Jy={};function fi(e,t,n){this.props=e,this.context=t,this.refs=Jy,this.updater=n||Yy}fi.prototype.isReactComponent={};fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qy(){}Qy.prototype=fi.prototype;function Kf(e,t,n){this.props=e,this.context=t,this.refs=Jy,this.updater=n||Yy}var Gf=Kf.prototype=new Qy;Gf.constructor=Kf;Xy(Gf,fi.prototype);Gf.isPureReactComponent=!0;var lp=Array.isArray,Zy=Object.prototype.hasOwnProperty,Yf={current:null},ev={key:!0,ref:!0,__self:!0,__source:!0};function tv(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Zy.call(t,r)&&!ev.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Go,type:e,key:i,ref:o,props:s,_owner:Yf.current}}function ek(e,t){return{$$typeof:Go,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Go}function tk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cp=/\/+/g;function Zc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tk(""+e.key):t.toString(36)}function Xa(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Go:case U_:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Zc(o,0):r,lp(s)?(n="",e!=null&&(n=e.replace(cp,"$&/")+"/"),Xa(s,t,n,"",function(c){return c})):s!=null&&(Xf(s)&&(s=ek(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cp,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",lp(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Zc(i,a);o+=Xa(i,t,n,l,s)}else if(l=Z_(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Zc(i,a++),o+=Xa(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function da(e,t,n){if(e==null)return e;var r=[],s=0;return Xa(e,r,"","",function(i){return t.call(n,i,s++)}),r}function nk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},Ja={transition:null},rk={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Ja,ReactCurrentOwner:Yf};function nv(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:da,forEach:function(e,t,n){da(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return da(e,function(){t++}),t},toArray:function(e){return da(e,function(t){return t})||[]},only:function(e){if(!Xf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=fi;oe.Fragment=H_;oe.Profiler=q_;oe.PureComponent=Kf;oe.StrictMode=W_;oe.Suspense=X_;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rk;oe.act=nv;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xy({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Yf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Zy.call(t,l)&&!ev.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Go,type:e.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(e){return e={$$typeof:G_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:K_,_context:e},e.Consumer=e};oe.createElement=tv;oe.createFactory=function(e){var t=tv.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Y_,render:e}};oe.isValidElement=Xf;oe.lazy=function(e){return{$$typeof:Q_,_payload:{_status:-1,_result:e},_init:nk}};oe.memo=function(e,t){return{$$typeof:J_,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Ja.transition;Ja.transition={};try{e()}finally{Ja.transition=t}};oe.unstable_act=nv;oe.useCallback=function(e,t){return rt.current.useCallback(e,t)};oe.useContext=function(e){return rt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return rt.current.useEffect(e,t)};oe.useId=function(){return rt.current.useId()};oe.useImperativeHandle=function(e,t,n){return rt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return rt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return rt.current.useReducer(e,t,n)};oe.useRef=function(e){return rt.current.useRef(e)};oe.useState=function(e){return rt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return rt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return rt.current.useTransition()};oe.version="18.3.1";Gy.exports=oe;var v=Gy.exports;const F=qy(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=v,ik=Symbol.for("react.element"),ok=Symbol.for("react.fragment"),ak=Object.prototype.hasOwnProperty,lk=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ck={key:!0,ref:!0,__self:!0,__source:!0};function rv(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)ak.call(t,r)&&!ck.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ik,type:e,key:i,ref:o,props:s,_owner:lk.current}}fc.Fragment=ok;fc.jsx=rv;fc.jsxs=rv;Ky.exports=fc;var f=Ky.exports,sv={exports:{}},bt={},iv={exports:{}},ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,j){var $=_.length;_.push(j);e:for(;0<$;){var L=$-1>>>1,I=_[L];if(0<s(I,j))_[L]=j,_[$]=I,$=L;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var j=_[0],$=_.pop();if($!==j){_[0]=$;e:for(var L=0,I=_.length,W=I>>>1;L<W;){var U=2*(L+1)-1,X=_[U],B=U+1,q=_[B];if(0>s(X,$))B<I&&0>s(q,X)?(_[L]=q,_[B]=$,L=B):(_[L]=X,_[U]=$,L=U);else if(B<I&&0>s(q,$))_[L]=q,_[B]=$,L=B;else break e}}return j}function s(_,j){var $=_.sortIndex-j.sortIndex;return $!==0?$:_.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,m=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(_){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=_)r(c),j.sortIndex=j.expirationTime,t(l,j);else break;j=n(c)}}function b(_){if(w=!1,g(_),!x)if(n(l)!==null)x=!0,M(k);else{var j=n(c);j!==null&&O(b,j.startTime-_)}}function k(_,j){x=!1,w&&(w=!1,p(T),T=-1),m=!0;var $=h;try{for(g(j),d=n(l);d!==null&&(!(d.expirationTime>j)||_&&!R());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var I=L(d.expirationTime<=j);j=e.unstable_now(),typeof I=="function"?d.callback=I:d===n(l)&&r(l),g(j)}else r(l);d=n(l)}if(d!==null)var W=!0;else{var U=n(c);U!==null&&O(b,U.startTime-j),W=!1}return W}finally{d=null,h=$,m=!1}}var C=!1,N=null,T=-1,A=5,P=-1;function R(){return!(e.unstable_now()-P<A)}function z(){if(N!==null){var _=e.unstable_now();P=_;var j=!0;try{j=N(!0,_)}finally{j?V():(C=!1,N=null)}}else C=!1}var V;if(typeof y=="function")V=function(){y(z)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,D=E.port2;E.port1.onmessage=z,V=function(){D.postMessage(null)}}else V=function(){S(z,0)};function M(_){N=_,C||(C=!0,V())}function O(_,j){T=S(function(){_(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,M(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(_){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var $=h;h=j;try{return _()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,j){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var $=h;h=_;try{return j()}finally{h=$}},e.unstable_scheduleCallback=function(_,j,$){var L=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?L+$:L):$=L,_){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=$+I,_={id:u++,callback:j,priorityLevel:_,startTime:$,expirationTime:I,sortIndex:-1},$>L?(_.sortIndex=$,t(c,_),n(l)===null&&_===n(c)&&(w?(p(T),T=-1):w=!0,O(b,$-L))):(_.sortIndex=I,t(l,_),x||m||(x=!0,M(k))),_},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(_){var j=h;return function(){var $=h;h=j;try{return _.apply(this,arguments)}finally{h=$}}}})(ov);iv.exports=ov;var uk=iv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk=v,xt=uk;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var av=new Set,go={};function ss(e,t){Js(e,t),Js(e+"Capture",t)}function Js(e,t){for(go[e]=t,e=0;e<t.length;e++)av.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=Object.prototype.hasOwnProperty,fk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,up={},dp={};function hk(e){return sd.call(dp,e)?!0:sd.call(up,e)?!1:fk.test(e)?dp[e]=!0:(up[e]=!0,!1)}function mk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pk(e,t,n,r){if(t===null||typeof t>"u"||mk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jf=/[\-:]([a-z])/g;function Qf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jf,Qf);He[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jf,Qf);He[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jf,Qf);He[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zf(e,t,n,r){var s=He.hasOwnProperty(t)?He[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pk(t,n,s,r)&&(n=null),r||s===null?hk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ln=dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fa=Symbol.for("react.element"),_s=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),lv=Symbol.for("react.provider"),cv=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),ad=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),uv=Symbol.for("react.offscreen"),fp=Symbol.iterator;function Ei(e){return e===null||typeof e!="object"?null:(e=fp&&e[fp]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,eu;function Vi(e){if(eu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);eu=t&&t[1]||""}return`
`+eu+e}var tu=!1;function nu(e,t){if(!e||tu)return"";tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{tu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vi(e):""}function gk(e){switch(e.tag){case 5:return Vi(e.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return e=nu(e.type,!1),e;case 11:return e=nu(e.type.render,!1),e;case 1:return e=nu(e.type,!0),e;default:return""}}function ld(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ks:return"Fragment";case _s:return"Portal";case id:return"Profiler";case eh:return"StrictMode";case od:return"Suspense";case ad:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cv:return(e.displayName||"Context")+".Consumer";case lv:return(e._context.displayName||"Context")+".Provider";case th:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nh:return t=e.displayName||null,t!==null?t:ld(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return ld(e(t))}catch{}}return null}function yk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ld(t);case 8:return t===eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vk(e){var t=dv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ha(e){e._valueTracker||(e._valueTracker=vk(e))}function fv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cd(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hv(e,t){t=t.checked,t!=null&&Zf(e,"checked",t,!1)}function ud(e,t){hv(e,t);var n=ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dd(e,t.type,n):t.hasOwnProperty("defaultValue")&&dd(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dd(e,t,n){(t!=="number"||xl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bi=Array.isArray;function Vs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function fd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(Bi(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function mv(e,t){var n=ur(t.value),r=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ma,gv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ma.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys(Xi).forEach(function(e){xk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xi[t]=Xi[e]})});function yv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xi.hasOwnProperty(e)&&Xi[e]?(""+t).trim():t+"px"}function vv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var wk=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(e,t){if(t){if(wk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function pd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=null;function rh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yd=null,Bs=null,Us=null;function yp(e){if(e=Jo(e)){if(typeof yd!="function")throw Error(H(280));var t=e.stateNode;t&&(t=yc(t),yd(e.stateNode,e.type,t))}}function xv(e){Bs?Us?Us.push(e):Us=[e]:Bs=e}function wv(){if(Bs){var e=Bs,t=Us;if(Us=Bs=null,yp(e),t)for(e=0;e<t.length;e++)yp(t[e])}}function bv(e,t){return e(t)}function Sv(){}var ru=!1;function _v(e,t,n){if(ru)return e(t,n);ru=!0;try{return bv(e,t,n)}finally{ru=!1,(Bs!==null||Us!==null)&&(Sv(),wv())}}function vo(e,t){var n=e.stateNode;if(n===null)return null;var r=yc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var vd=!1;if(En)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{vd=!1}function bk(e,t,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ji=!1,wl=null,bl=!1,xd=null,Sk={onError:function(e){Ji=!0,wl=e}};function _k(e,t,n,r,s,i,o,a,l){Ji=!1,wl=null,bk.apply(Sk,arguments)}function kk(e,t,n,r,s,i,o,a,l){if(_k.apply(this,arguments),Ji){if(Ji){var c=wl;Ji=!1,wl=null}else throw Error(H(198));bl||(bl=!0,xd=c)}}function is(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vp(e){if(is(e)!==e)throw Error(H(188))}function Ek(e){var t=e.alternate;if(!t){if(t=is(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vp(s),e;if(i===r)return vp(s),t;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function Ev(e){return e=Ek(e),e!==null?Cv(e):null}function Cv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cv(e);if(t!==null)return t;e=e.sibling}return null}var jv=xt.unstable_scheduleCallback,xp=xt.unstable_cancelCallback,Ck=xt.unstable_shouldYield,jk=xt.unstable_requestPaint,Pe=xt.unstable_now,Nk=xt.unstable_getCurrentPriorityLevel,sh=xt.unstable_ImmediatePriority,Nv=xt.unstable_UserBlockingPriority,Sl=xt.unstable_NormalPriority,Tk=xt.unstable_LowPriority,Tv=xt.unstable_IdlePriority,hc=null,nn=null;function Pk(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(hc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Mk,Ak=Math.log,Rk=Math.LN2;function Mk(e){return e>>>=0,e===0?32:31-(Ak(e)/Rk|0)|0}var pa=64,ga=4194304;function Ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _l(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ui(a):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ht(t),s=1<<n,r|=e[n],t&=~s;return r}function $k(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ht(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=$k(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function wd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pv(){var e=pa;return pa<<=1,!(pa&4194240)&&(pa=64),e}function su(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function Dk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ht(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ih(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ce=0;function Av(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rv,oh,Mv,$v,Lv,bd=!1,ya=[],er=null,tr=null,nr=null,xo=new Map,wo=new Map,Kn=[],Ok="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wp(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function ji(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Jo(t),t!==null&&oh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ik(e,t,n,r,s){switch(t){case"focusin":return er=ji(er,e,t,n,r,s),!0;case"dragenter":return tr=ji(tr,e,t,n,r,s),!0;case"mouseover":return nr=ji(nr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return xo.set(i,ji(xo.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wo.set(i,ji(wo.get(i)||null,e,t,n,r,s)),!0}return!1}function Dv(e){var t=Or(e.target);if(t!==null){var n=is(t);if(n!==null){if(t=n.tag,t===13){if(t=kv(n),t!==null){e.blockedOn=t,Lv(e.priority,function(){Mv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);gd=r,n.target.dispatchEvent(r),gd=null}else return t=Jo(n),t!==null&&oh(t),e.blockedOn=n,!1;t.shift()}return!0}function bp(e,t,n){Qa(e)&&n.delete(t)}function zk(){bd=!1,er!==null&&Qa(er)&&(er=null),tr!==null&&Qa(tr)&&(tr=null),nr!==null&&Qa(nr)&&(nr=null),xo.forEach(bp),wo.forEach(bp)}function Ni(e,t){e.blockedOn===t&&(e.blockedOn=null,bd||(bd=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,zk)))}function bo(e){function t(s){return Ni(s,e)}if(0<ya.length){Ni(ya[0],e);for(var n=1;n<ya.length;n++){var r=ya[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&Ni(er,e),tr!==null&&Ni(tr,e),nr!==null&&Ni(nr,e),xo.forEach(t),wo.forEach(t),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)Dv(n),n.blockedOn===null&&Kn.shift()}var Hs=Ln.ReactCurrentBatchConfig,kl=!0;function Fk(e,t,n,r){var s=ce,i=Hs.transition;Hs.transition=null;try{ce=1,ah(e,t,n,r)}finally{ce=s,Hs.transition=i}}function Vk(e,t,n,r){var s=ce,i=Hs.transition;Hs.transition=null;try{ce=4,ah(e,t,n,r)}finally{ce=s,Hs.transition=i}}function ah(e,t,n,r){if(kl){var s=Sd(e,t,n,r);if(s===null)mu(e,t,r,El,n),wp(e,r);else if(Ik(s,e,t,n,r))r.stopPropagation();else if(wp(e,r),t&4&&-1<Ok.indexOf(e)){for(;s!==null;){var i=Jo(s);if(i!==null&&Rv(i),i=Sd(e,t,n,r),i===null&&mu(e,t,r,El,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mu(e,t,r,null,n)}}var El=null;function Sd(e,t,n,r){if(El=null,e=rh(r),e=Or(e),e!==null)if(t=is(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return El=e,null}function Ov(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nk()){case sh:return 1;case Nv:return 4;case Sl:case Tk:return 16;case Tv:return 536870912;default:return 16}default:return 16}}var Qn=null,lh=null,Za=null;function Iv(){if(Za)return Za;var e,t=lh,n=t.length,r,s="value"in Qn?Qn.value:Qn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Za=s.slice(e,1<r?1-r:void 0)}function el(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function va(){return!0}function Sp(){return!1}function St(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?va:Sp,this.isPropagationStopped=Sp,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=St(hi),Xo=_e({},hi,{view:0,detail:0}),Bk=St(Xo),iu,ou,Ti,mc=_e({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(iu=e.screenX-Ti.screenX,ou=e.screenY-Ti.screenY):ou=iu=0,Ti=e),iu)},movementY:function(e){return"movementY"in e?e.movementY:ou}}),_p=St(mc),Uk=_e({},mc,{dataTransfer:0}),Hk=St(Uk),Wk=_e({},Xo,{relatedTarget:0}),au=St(Wk),qk=_e({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kk=St(qk),Gk=_e({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yk=St(Gk),Xk=_e({},hi,{data:0}),kp=St(Xk),Jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zk[e])?!!t[e]:!1}function uh(){return eE}var tE=_e({},Xo,{key:function(e){if(e.key){var t=Jk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=el(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(e){return e.type==="keypress"?el(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?el(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nE=St(tE),rE=_e({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ep=St(rE),sE=_e({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),iE=St(sE),oE=_e({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=St(oE),lE=_e({},mc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cE=St(lE),uE=[9,13,27,32],dh=En&&"CompositionEvent"in window,Qi=null;En&&"documentMode"in document&&(Qi=document.documentMode);var dE=En&&"TextEvent"in window&&!Qi,zv=En&&(!dh||Qi&&8<Qi&&11>=Qi),Cp=" ",jp=!1;function Fv(e,t){switch(e){case"keyup":return uE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Es=!1;function fE(e,t){switch(e){case"compositionend":return Vv(t);case"keypress":return t.which!==32?null:(jp=!0,Cp);case"textInput":return e=t.data,e===Cp&&jp?null:e;default:return null}}function hE(e,t){if(Es)return e==="compositionend"||!dh&&Fv(e,t)?(e=Iv(),Za=lh=Qn=null,Es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zv&&t.locale!=="ko"?null:t.data;default:return null}}var mE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mE[e.type]:t==="textarea"}function Bv(e,t,n,r){xv(r),t=Cl(t,"onChange"),0<t.length&&(n=new ch("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zi=null,So=null;function pE(e){Zv(e,0)}function pc(e){var t=Ns(e);if(fv(t))return e}function gE(e,t){if(e==="change")return t}var Uv=!1;if(En){var lu;if(En){var cu="oninput"in document;if(!cu){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),cu=typeof Tp.oninput=="function"}lu=cu}else lu=!1;Uv=lu&&(!document.documentMode||9<document.documentMode)}function Pp(){Zi&&(Zi.detachEvent("onpropertychange",Hv),So=Zi=null)}function Hv(e){if(e.propertyName==="value"&&pc(So)){var t=[];Bv(t,So,e,rh(e)),_v(pE,t)}}function yE(e,t,n){e==="focusin"?(Pp(),Zi=t,So=n,Zi.attachEvent("onpropertychange",Hv)):e==="focusout"&&Pp()}function vE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pc(So)}function xE(e,t){if(e==="click")return pc(t)}function wE(e,t){if(e==="input"||e==="change")return pc(t)}function bE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:bE;function _o(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sd.call(t,s)||!Gt(e[s],t[s]))return!1}return!0}function Ap(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rp(e,t){var n=Ap(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ap(n)}}function Wv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qv(){for(var e=window,t=xl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xl(e.document)}return t}function fh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SE(e){var t=qv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wv(n.ownerDocument.documentElement,n)){if(r!==null&&fh(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Rp(n,i);var o=Rp(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _E=En&&"documentMode"in document&&11>=document.documentMode,Cs=null,_d=null,eo=null,kd=!1;function Mp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kd||Cs==null||Cs!==xl(r)||(r=Cs,"selectionStart"in r&&fh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&_o(eo,r)||(eo=r,r=Cl(_d,"onSelect"),0<r.length&&(t=new ch("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cs)))}function xa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},uu={},Kv={};En&&(Kv=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function gc(e){if(uu[e])return uu[e];if(!js[e])return e;var t=js[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Kv)return uu[e]=t[n];return e}var Gv=gc("animationend"),Yv=gc("animationiteration"),Xv=gc("animationstart"),Jv=gc("transitionend"),Qv=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(e,t){Qv.set(e,t),ss(t,[e])}for(var du=0;du<$p.length;du++){var fu=$p[du],kE=fu.toLowerCase(),EE=fu[0].toUpperCase()+fu.slice(1);pr(kE,"on"+EE)}pr(Gv,"onAnimationEnd");pr(Yv,"onAnimationIteration");pr(Xv,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(Jv,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function Lp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kk(r,t,void 0,e),e.currentTarget=null}function Zv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Lp(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Lp(s,a,c),i=l}}}if(bl)throw e=xd,bl=!1,xd=null,e}function me(e,t){var n=t[Td];n===void 0&&(n=t[Td]=new Set);var r=e+"__bubble";n.has(r)||(ex(t,e,2,!1),n.add(r))}function hu(e,t,n){var r=0;t&&(r|=4),ex(n,e,r,t)}var wa="_reactListening"+Math.random().toString(36).slice(2);function ko(e){if(!e[wa]){e[wa]=!0,av.forEach(function(n){n!=="selectionchange"&&(CE.has(n)||hu(n,!1,e),hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wa]||(t[wa]=!0,hu("selectionchange",!1,t))}}function ex(e,t,n,r){switch(Ov(t)){case 1:var s=Fk;break;case 4:s=Vk;break;default:s=ah}n=s.bind(null,t,n,e),s=void 0,!vd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function mu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Or(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}_v(function(){var c=i,u=rh(n),d=[];e:{var h=Qv.get(e);if(h!==void 0){var m=ch,x=e;switch(e){case"keypress":if(el(n)===0)break e;case"keydown":case"keyup":m=nE;break;case"focusin":x="focus",m=au;break;case"focusout":x="blur",m=au;break;case"beforeblur":case"afterblur":m=au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Hk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iE;break;case Gv:case Yv:case Xv:m=Kk;break;case Jv:m=aE;break;case"scroll":m=Bk;break;case"wheel":m=cE;break;case"copy":case"cut":case"paste":m=Yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ep}var w=(t&4)!==0,S=!w&&e==="scroll",p=w?h!==null?h+"Capture":null:h;w=[];for(var y=c,g;y!==null;){g=y;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,p!==null&&(b=vo(y,p),b!=null&&w.push(Eo(y,b,g)))),S)break;y=y.return}0<w.length&&(h=new m(h,x,null,n,u),d.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==gd&&(x=n.relatedTarget||n.fromElement)&&(Or(x)||x[Cn]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?Or(x):null,x!==null&&(S=is(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(w=_p,b="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(w=Ep,b="onPointerLeave",p="onPointerEnter",y="pointer"),S=m==null?h:Ns(m),g=x==null?h:Ns(x),h=new w(b,y+"leave",m,n,u),h.target=S,h.relatedTarget=g,b=null,Or(u)===c&&(w=new w(p,y+"enter",x,n,u),w.target=g,w.relatedTarget=S,b=w),S=b,m&&x)t:{for(w=m,p=x,y=0,g=w;g;g=hs(g))y++;for(g=0,b=p;b;b=hs(b))g++;for(;0<y-g;)w=hs(w),y--;for(;0<g-y;)p=hs(p),g--;for(;y--;){if(w===p||p!==null&&w===p.alternate)break t;w=hs(w),p=hs(p)}w=null}else w=null;m!==null&&Dp(d,h,m,w,!1),x!==null&&S!==null&&Dp(d,S,x,w,!0)}}e:{if(h=c?Ns(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=gE;else if(Np(h))if(Uv)k=wE;else{k=vE;var C=yE}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=xE);if(k&&(k=k(e,c))){Bv(d,k,n,u);break e}C&&C(e,h,c),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&dd(h,"number",h.value)}switch(C=c?Ns(c):window,e){case"focusin":(Np(C)||C.contentEditable==="true")&&(Cs=C,_d=c,eo=null);break;case"focusout":eo=_d=Cs=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Mp(d,n,u);break;case"selectionchange":if(_E)break;case"keydown":case"keyup":Mp(d,n,u)}var N;if(dh)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Es?Fv(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(zv&&n.locale!=="ko"&&(Es||T!=="onCompositionStart"?T==="onCompositionEnd"&&Es&&(N=Iv()):(Qn=u,lh="value"in Qn?Qn.value:Qn.textContent,Es=!0)),C=Cl(c,T),0<C.length&&(T=new kp(T,e,null,n,u),d.push({event:T,listeners:C}),N?T.data=N:(N=Vv(n),N!==null&&(T.data=N)))),(N=dE?fE(e,n):hE(e,n))&&(c=Cl(c,"onBeforeInput"),0<c.length&&(u=new kp("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=N))}Zv(d,t)})}function Eo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vo(e,n),i!=null&&r.unshift(Eo(e,i,s)),i=vo(e,t),i!=null&&r.push(Eo(e,i,s))),e=e.return}return r}function hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dp(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=vo(n,i),l!=null&&o.unshift(Eo(n,l,a))):s||(l=vo(n,i),l!=null&&o.push(Eo(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var jE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function Op(e){return(typeof e=="string"?e:""+e).replace(jE,`
`).replace(NE,"")}function ba(e,t,n){if(t=Op(t),Op(e)!==t&&n)throw Error(H(425))}function jl(){}var Ed=null,Cd=null;function jd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,PE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(e){return Ip.resolve(null).then(e).catch(AE)}:Nd;function AE(e){setTimeout(function(){throw e})}function pu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),bo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bo(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),tn="__reactFiber$"+mi,Co="__reactProps$"+mi,Cn="__reactContainer$"+mi,Td="__reactEvents$"+mi,RE="__reactListeners$"+mi,ME="__reactHandles$"+mi;function Or(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zp(e);e!==null;){if(n=e[tn])return n;e=zp(e)}return t}e=n,n=e.parentNode}return null}function Jo(e){return e=e[tn]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function yc(e){return e[Co]||null}var Pd=[],Ts=-1;function gr(e){return{current:e}}function pe(e){0>Ts||(e.current=Pd[Ts],Pd[Ts]=null,Ts--)}function fe(e,t){Ts++,Pd[Ts]=e.current,e.current=t}var dr={},Je=gr(dr),ft=gr(!1),Xr=dr;function Qs(e,t){var n=e.type.contextTypes;if(!n)return dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ht(e){return e=e.childContextTypes,e!=null}function Nl(){pe(ft),pe(Je)}function Fp(e,t,n){if(Je.current!==dr)throw Error(H(168));fe(Je,t),fe(ft,n)}function tx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(H(108,yk(e)||"Unknown",s));return _e({},n,r)}function Tl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Xr=Je.current,fe(Je,e),fe(ft,ft.current),!0}function Vp(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=tx(e,t,Xr),r.__reactInternalMemoizedMergedChildContext=e,pe(ft),pe(Je),fe(Je,e)):pe(ft),fe(ft,n)}var vn=null,vc=!1,gu=!1;function nx(e){vn===null?vn=[e]:vn.push(e)}function $E(e){vc=!0,nx(e)}function yr(){if(!gu&&vn!==null){gu=!0;var e=0,t=ce;try{var n=vn;for(ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vn=null,vc=!1}catch(s){throw vn!==null&&(vn=vn.slice(e+1)),jv(sh,yr),s}finally{ce=t,gu=!1}}return null}var Ps=[],As=0,Pl=null,Al=0,Et=[],Ct=0,Jr=null,wn=1,bn="";function Ar(e,t){Ps[As++]=Al,Ps[As++]=Pl,Pl=e,Al=t}function rx(e,t,n){Et[Ct++]=wn,Et[Ct++]=bn,Et[Ct++]=Jr,Jr=e;var r=wn;e=bn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var i=32-Ht(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,wn=1<<32-Ht(t)+s|n<<s|r,bn=i+e}else wn=1<<i|n<<s|r,bn=e}function hh(e){e.return!==null&&(Ar(e,1),rx(e,1,0))}function mh(e){for(;e===Pl;)Pl=Ps[--As],Ps[As]=null,Al=Ps[--As],Ps[As]=null;for(;e===Jr;)Jr=Et[--Ct],Et[Ct]=null,bn=Et[--Ct],Et[Ct]=null,wn=Et[--Ct],Et[Ct]=null}var vt=null,yt=null,ve=!1,Vt=null;function sx(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,yt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jr!==null?{id:wn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,yt=null,!0):!1;default:return!1}}function Ad(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rd(e){if(ve){var t=yt;if(t){var n=t;if(!Bp(e,t)){if(Ad(e))throw Error(H(418));t=rr(n.nextSibling);var r=vt;t&&Bp(e,t)?sx(r,n):(e.flags=e.flags&-4097|2,ve=!1,vt=e)}}else{if(Ad(e))throw Error(H(418));e.flags=e.flags&-4097|2,ve=!1,vt=e}}}function Up(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function Sa(e){if(e!==vt)return!1;if(!ve)return Up(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jd(e.type,e.memoizedProps)),t&&(t=yt)){if(Ad(e))throw ix(),Error(H(418));for(;t;)sx(e,t),t=rr(t.nextSibling)}if(Up(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=vt?rr(e.stateNode.nextSibling):null;return!0}function ix(){for(var e=yt;e;)e=rr(e.nextSibling)}function Zs(){yt=vt=null,ve=!1}function ph(e){Vt===null?Vt=[e]:Vt.push(e)}var LE=Ln.ReactCurrentBatchConfig;function Pi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function _a(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hp(e){var t=e._init;return t(e._payload)}function ox(e){function t(p,y){if(e){var g=p.deletions;g===null?(p.deletions=[y],p.flags|=16):g.push(y)}}function n(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function s(p,y){return p=ar(p,y),p.index=0,p.sibling=null,p}function i(p,y,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<y?(p.flags|=2,y):g):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,y,g,b){return y===null||y.tag!==6?(y=_u(g,p.mode,b),y.return=p,y):(y=s(y,g),y.return=p,y)}function l(p,y,g,b){var k=g.type;return k===ks?u(p,y,g.props.children,b,g.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Bn&&Hp(k)===y.type)?(b=s(y,g.props),b.ref=Pi(p,y,g),b.return=p,b):(b=al(g.type,g.key,g.props,null,p.mode,b),b.ref=Pi(p,y,g),b.return=p,b)}function c(p,y,g,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=ku(g,p.mode,b),y.return=p,y):(y=s(y,g.children||[]),y.return=p,y)}function u(p,y,g,b,k){return y===null||y.tag!==7?(y=qr(g,p.mode,b,k),y.return=p,y):(y=s(y,g),y.return=p,y)}function d(p,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_u(""+y,p.mode,g),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fa:return g=al(y.type,y.key,y.props,null,p.mode,g),g.ref=Pi(p,null,y),g.return=p,g;case _s:return y=ku(y,p.mode,g),y.return=p,y;case Bn:var b=y._init;return d(p,b(y._payload),g)}if(Bi(y)||Ei(y))return y=qr(y,p.mode,g,null),y.return=p,y;_a(p,y)}return null}function h(p,y,g,b){var k=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,y,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fa:return g.key===k?l(p,y,g,b):null;case _s:return g.key===k?c(p,y,g,b):null;case Bn:return k=g._init,h(p,y,k(g._payload),b)}if(Bi(g)||Ei(g))return k!==null?null:u(p,y,g,b,null);_a(p,g)}return null}function m(p,y,g,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(g)||null,a(y,p,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fa:return p=p.get(b.key===null?g:b.key)||null,l(y,p,b,k);case _s:return p=p.get(b.key===null?g:b.key)||null,c(y,p,b,k);case Bn:var C=b._init;return m(p,y,g,C(b._payload),k)}if(Bi(b)||Ei(b))return p=p.get(g)||null,u(y,p,b,k,null);_a(y,b)}return null}function x(p,y,g,b){for(var k=null,C=null,N=y,T=y=0,A=null;N!==null&&T<g.length;T++){N.index>T?(A=N,N=null):A=N.sibling;var P=h(p,N,g[T],b);if(P===null){N===null&&(N=A);break}e&&N&&P.alternate===null&&t(p,N),y=i(P,y,T),C===null?k=P:C.sibling=P,C=P,N=A}if(T===g.length)return n(p,N),ve&&Ar(p,T),k;if(N===null){for(;T<g.length;T++)N=d(p,g[T],b),N!==null&&(y=i(N,y,T),C===null?k=N:C.sibling=N,C=N);return ve&&Ar(p,T),k}for(N=r(p,N);T<g.length;T++)A=m(N,p,T,g[T],b),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?T:A.key),y=i(A,y,T),C===null?k=A:C.sibling=A,C=A);return e&&N.forEach(function(R){return t(p,R)}),ve&&Ar(p,T),k}function w(p,y,g,b){var k=Ei(g);if(typeof k!="function")throw Error(H(150));if(g=k.call(g),g==null)throw Error(H(151));for(var C=k=null,N=y,T=y=0,A=null,P=g.next();N!==null&&!P.done;T++,P=g.next()){N.index>T?(A=N,N=null):A=N.sibling;var R=h(p,N,P.value,b);if(R===null){N===null&&(N=A);break}e&&N&&R.alternate===null&&t(p,N),y=i(R,y,T),C===null?k=R:C.sibling=R,C=R,N=A}if(P.done)return n(p,N),ve&&Ar(p,T),k;if(N===null){for(;!P.done;T++,P=g.next())P=d(p,P.value,b),P!==null&&(y=i(P,y,T),C===null?k=P:C.sibling=P,C=P);return ve&&Ar(p,T),k}for(N=r(p,N);!P.done;T++,P=g.next())P=m(N,p,T,P.value,b),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?T:P.key),y=i(P,y,T),C===null?k=P:C.sibling=P,C=P);return e&&N.forEach(function(z){return t(p,z)}),ve&&Ar(p,T),k}function S(p,y,g,b){if(typeof g=="object"&&g!==null&&g.type===ks&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case fa:e:{for(var k=g.key,C=y;C!==null;){if(C.key===k){if(k=g.type,k===ks){if(C.tag===7){n(p,C.sibling),y=s(C,g.props.children),y.return=p,p=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Bn&&Hp(k)===C.type){n(p,C.sibling),y=s(C,g.props),y.ref=Pi(p,C,g),y.return=p,p=y;break e}n(p,C);break}else t(p,C);C=C.sibling}g.type===ks?(y=qr(g.props.children,p.mode,b,g.key),y.return=p,p=y):(b=al(g.type,g.key,g.props,null,p.mode,b),b.ref=Pi(p,y,g),b.return=p,p=b)}return o(p);case _s:e:{for(C=g.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(p,y.sibling),y=s(y,g.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else t(p,y);y=y.sibling}y=ku(g,p.mode,b),y.return=p,p=y}return o(p);case Bn:return C=g._init,S(p,y,C(g._payload),b)}if(Bi(g))return x(p,y,g,b);if(Ei(g))return w(p,y,g,b);_a(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(p,y.sibling),y=s(y,g),y.return=p,p=y):(n(p,y),y=_u(g,p.mode,b),y.return=p,p=y),o(p)):n(p,y)}return S}var ei=ox(!0),ax=ox(!1),Rl=gr(null),Ml=null,Rs=null,gh=null;function yh(){gh=Rs=Ml=null}function vh(e){var t=Rl.current;pe(Rl),e._currentValue=t}function Md(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ws(e,t){Ml=e,gh=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(gh!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(Ml===null)throw Error(H(308));Rs=e,Ml.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Ir=null;function xh(e){Ir===null?Ir=[e]:Ir.push(e)}function lx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,xh(t)):(n.next=s.next,s.next=n),t.interleaved=n,jn(e,r)}function jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Un=!1;function wh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _n(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,jn(e,n)}return s=r.interleaved,s===null?(t.next=t,xh(r)):(t.next=s.next,s.next=t),r.interleaved=t,jn(e,n)}function tl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ih(e,n)}}function Wp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $l(e,t,n,r){var s=e.updateQueue;Un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,w=a;switch(h=t,m=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){d=x.call(m,d,h);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(m,d,h):x,h==null)break e;d=_e({},d,h);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Zr|=o,e.lanes=o,e.memoizedState=d}}function qp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Qo={},rn=gr(Qo),jo=gr(Qo),No=gr(Qo);function zr(e){if(e===Qo)throw Error(H(174));return e}function bh(e,t){switch(fe(No,t),fe(jo,e),fe(rn,Qo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hd(t,e)}pe(rn),fe(rn,t)}function ti(){pe(rn),pe(jo),pe(No)}function ux(e){zr(No.current);var t=zr(rn.current),n=hd(t,e.type);t!==n&&(fe(jo,e),fe(rn,n))}function Sh(e){jo.current===e&&(pe(rn),pe(jo))}var xe=gr(0);function Ll(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yu=[];function _h(){for(var e=0;e<yu.length;e++)yu[e]._workInProgressVersionPrimary=null;yu.length=0}var nl=Ln.ReactCurrentDispatcher,vu=Ln.ReactCurrentBatchConfig,Qr=0,be=null,$e=null,Oe=null,Dl=!1,to=!1,To=0,DE=0;function qe(){throw Error(H(321))}function kh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function Eh(e,t,n,r,s,i){if(Qr=i,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nl.current=e===null||e.memoizedState===null?FE:VE,e=n(r,s),to){i=0;do{if(to=!1,To=0,25<=i)throw Error(H(301));i+=1,Oe=$e=null,t.updateQueue=null,nl.current=BE,e=n(r,s)}while(to)}if(nl.current=Ol,t=$e!==null&&$e.next!==null,Qr=0,Oe=$e=be=null,Dl=!1,t)throw Error(H(300));return e}function Ch(){var e=To!==0;return To=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Mt(){if($e===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Oe===null?be.memoizedState:Oe.next;if(t!==null)Oe=t,$e=e;else{if(e===null)throw Error(H(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function Po(e,t){return typeof t=="function"?t(e):t}function xu(e){var t=Mt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Qr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,be.lanes|=u,Zr|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Gt(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,be.lanes|=i,Zr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wu(e){var t=Mt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Gt(i,t.memoizedState)||(ct=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function dx(){}function fx(e,t){var n=be,r=Mt(),s=t(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,ct=!0),r=r.queue,jh(px.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Ao(9,mx.bind(null,n,r,s,t),void 0,null),Ie===null)throw Error(H(349));Qr&30||hx(n,t,s)}return s}function hx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mx(e,t,n,r){t.value=n,t.getSnapshot=r,gx(t)&&yx(e)}function px(e,t,n){return n(function(){gx(t)&&yx(e)})}function gx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function yx(e){var t=jn(e,1);t!==null&&Wt(t,e,1,-1)}function Kp(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:e},t.queue=e,e=e.dispatch=zE.bind(null,be,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vx(){return Mt().memoizedState}function rl(e,t,n,r){var s=Zt();be.flags|=e,s.memoizedState=Ao(1|t,n,void 0,r===void 0?null:r)}function xc(e,t,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&kh(r,o.deps)){s.memoizedState=Ao(t,n,i,r);return}}be.flags|=e,s.memoizedState=Ao(1|t,n,i,r)}function Gp(e,t){return rl(8390656,8,e,t)}function jh(e,t){return xc(2048,8,e,t)}function xx(e,t){return xc(4,2,e,t)}function wx(e,t){return xc(4,4,e,t)}function bx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sx(e,t,n){return n=n!=null?n.concat([e]):null,xc(4,4,bx.bind(null,t,e),n)}function Nh(){}function _x(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kx(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ex(e,t,n){return Qr&21?(Gt(n,t)||(n=Pv(),be.lanes|=n,Zr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=n)}function OE(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var r=vu.transition;vu.transition={};try{e(!1),t()}finally{ce=n,vu.transition=r}}function Cx(){return Mt().memoizedState}function IE(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jx(e))Nx(t,n);else if(n=lx(e,t,n,r),n!==null){var s=nt();Wt(n,e,r,s),Tx(n,t,r)}}function zE(e,t,n){var r=or(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jx(e))Nx(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Gt(a,o)){var l=t.interleaved;l===null?(s.next=s,xh(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=lx(e,t,s,r),n!==null&&(s=nt(),Wt(n,e,r,s),Tx(n,t,r))}}function jx(e){var t=e.alternate;return e===be||t!==null&&t===be}function Nx(e,t){to=Dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tx(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ih(e,n)}}var Ol={readContext:Rt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},FE={readContext:Rt,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:Gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rl(4194308,4,bx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rl(4194308,4,e,t)},useInsertionEffect:function(e,t){return rl(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=IE.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Kp,useDebugValue:Nh,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Kp(!1),t=e[0];return e=OE.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=be,s=Zt();if(ve){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),Ie===null)throw Error(H(349));Qr&30||hx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Gp(px.bind(null,r,i,e),[e]),r.flags|=2048,Ao(9,mx.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zt(),t=Ie.identifierPrefix;if(ve){var n=bn,r=wn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=To++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=DE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VE={readContext:Rt,useCallback:_x,useContext:Rt,useEffect:jh,useImperativeHandle:Sx,useInsertionEffect:xx,useLayoutEffect:wx,useMemo:kx,useReducer:xu,useRef:vx,useState:function(){return xu(Po)},useDebugValue:Nh,useDeferredValue:function(e){var t=Mt();return Ex(t,$e.memoizedState,e)},useTransition:function(){var e=xu(Po)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:dx,useSyncExternalStore:fx,useId:Cx,unstable_isNewReconciler:!1},BE={readContext:Rt,useCallback:_x,useContext:Rt,useEffect:jh,useImperativeHandle:Sx,useInsertionEffect:xx,useLayoutEffect:wx,useMemo:kx,useReducer:wu,useRef:vx,useState:function(){return wu(Po)},useDebugValue:Nh,useDeferredValue:function(e){var t=Mt();return $e===null?t.memoizedState=e:Ex(t,$e.memoizedState,e)},useTransition:function(){var e=wu(Po)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:dx,useSyncExternalStore:fx,useId:Cx,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function $d(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wc={isMounted:function(e){return(e=e._reactInternals)?is(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nt(),s=or(e),i=_n(r,s);i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Wt(t,e,s,r),tl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nt(),s=or(e),i=_n(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Wt(t,e,s,r),tl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),r=or(e),s=_n(n,r);s.tag=2,t!=null&&(s.callback=t),t=sr(e,s,r),t!==null&&(Wt(t,e,r,n),tl(t,e,r))}};function Yp(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!_o(n,r)||!_o(s,i):!0}function Px(e,t,n){var r=!1,s=dr,i=t.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=ht(t)?Xr:Je.current,r=t.contextTypes,i=(r=r!=null)?Qs(e,s):dr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Xp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wc.enqueueReplaceState(t,t.state,null)}function Ld(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},wh(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=ht(t)?Xr:Je.current,s.context=Qs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&($d(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wc.enqueueReplaceState(s,s.state,null),$l(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var n="",r=t;do n+=gk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function bu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UE=typeof WeakMap=="function"?WeakMap:Map;function Ax(e,t,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,qd=r),Dd(e,t)},n}function Rx(e,t,n){n=_n(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Dd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dd(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Jp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UE;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=r2.bind(null,e,t,n),t.then(e,e))}function Qp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_n(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var HE=Ln.ReactCurrentOwner,ct=!1;function Ze(e,t,n,r){t.child=e===null?ax(t,null,n,r):ei(t,e.child,n,r)}function eg(e,t,n,r,s){n=n.render;var i=t.ref;return Ws(t,s),r=Eh(e,t,n,r,i,s),n=Ch(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nn(e,t,s)):(ve&&n&&hh(t),t.flags|=1,Ze(e,t,r,s),t.child)}function tg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Dh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Mx(e,t,i,r,s)):(e=al(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(o,r)&&e.ref===t.ref)return Nn(e,t,s)}return t.flags|=1,e=ar(i,r),e.ref=t.ref,e.return=t,t.child=e}function Mx(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(_o(i,r)&&e.ref===t.ref)if(ct=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,Nn(e,t,s)}return Od(e,t,n,r,s)}function $x(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe($s,gt),gt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe($s,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe($s,gt),gt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,fe($s,gt),gt|=r;return Ze(e,t,s,n),t.child}function Lx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Od(e,t,n,r,s){var i=ht(n)?Xr:Je.current;return i=Qs(t,i),Ws(t,s),n=Eh(e,t,n,r,i,s),r=Ch(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nn(e,t,s)):(ve&&r&&hh(t),t.flags|=1,Ze(e,t,n,s),t.child)}function ng(e,t,n,r,s){if(ht(n)){var i=!0;Tl(t)}else i=!1;if(Ws(t,s),t.stateNode===null)sl(e,t),Px(t,n,r),Ld(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rt(c):(c=ht(n)?Xr:Je.current,c=Qs(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Xp(t,o,r,c),Un=!1;var h=t.memoizedState;o.state=h,$l(t,r,o,s),l=t.memoizedState,a!==r||h!==l||ft.current||Un?(typeof u=="function"&&($d(t,n,u,r),l=t.memoizedState),(a=Un||Yp(t,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,cx(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:It(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rt(l):(l=ht(n)?Xr:Je.current,l=Qs(t,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Xp(t,o,r,l),Un=!1,h=t.memoizedState,o.state=h,$l(t,r,o,s);var x=t.memoizedState;a!==d||h!==x||ft.current||Un?(typeof m=="function"&&($d(t,n,m,r),x=t.memoizedState),(c=Un||Yp(t,n,c,r,h,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Id(e,t,n,r,i,s)}function Id(e,t,n,r,s,i){Lx(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Vp(t,n,!1),Nn(e,t,i);r=t.stateNode,HE.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ei(t,e.child,null,i),t.child=ei(t,null,a,i)):Ze(e,t,a,i),t.memoizedState=r.state,s&&Vp(t,n,!0),t.child}function Dx(e){var t=e.stateNode;t.pendingContext?Fp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fp(e,t.context,!1),bh(e,t.containerInfo)}function rg(e,t,n,r,s){return Zs(),ph(s),t.flags|=256,Ze(e,t,n,r),t.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Fd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ox(e,t,n){var r=t.pendingProps,s=xe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),fe(xe,s&1),e===null)return Rd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_c(o,r,0,null),e=qr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fd(n),t.memoizedState=zd,e):Th(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return WE(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ar(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ar(a,i):(i=qr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Fd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=zd,r}return i=e.child,e=i.sibling,r=ar(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Th(e,t){return t=_c({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ka(e,t,n,r){return r!==null&&ph(r),ei(t,e.child,null,n),e=Th(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function WE(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=bu(Error(H(422))),ka(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=_c({mode:"visible",children:r.children},s,0,null),i=qr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ei(t,e.child,null,o),t.child.memoizedState=Fd(o),t.memoizedState=zd,i);if(!(t.mode&1))return ka(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=bu(i,r,void 0),ka(e,t,o,r)}if(a=(o&e.childLanes)!==0,ct||a){if(r=Ie,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jn(e,s),Wt(r,e,s,-1))}return Lh(),r=bu(Error(H(421))),ka(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=s2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,yt=rr(s.nextSibling),vt=t,ve=!0,Vt=null,e!==null&&(Et[Ct++]=wn,Et[Ct++]=bn,Et[Ct++]=Jr,wn=e.id,bn=e.overflow,Jr=t),t=Th(t,r.children),t.flags|=4096,t)}function sg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Md(e.return,t,n)}function Su(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ix(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ze(e,t,r.children,n),r=xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sg(e,n,t);else if(e.tag===19)sg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fe(xe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ll(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Su(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ll(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Su(t,!0,n,null,i);break;case"together":Su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=ar(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ar(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qE(e,t,n){switch(t.tag){case 3:Dx(t),Zs();break;case 5:ux(t);break;case 1:ht(t.type)&&Tl(t);break;case 4:bh(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;fe(Rl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(fe(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?Ox(e,t,n):(fe(xe,xe.current&1),e=Nn(e,t,n),e!==null?e.sibling:null);fe(xe,xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ix(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(xe,xe.current),r)break;return null;case 22:case 23:return t.lanes=0,$x(e,t,n)}return Nn(e,t,n)}var zx,Vd,Fx,Vx;zx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vd=function(){};Fx=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zr(rn.current);var i=null;switch(n){case"input":s=cd(e,s),r=cd(e,r),i=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":s=fd(e,s),r=fd(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jl)}md(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(go.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(go.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&me("scroll",e),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Vx=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ai(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function KE(e,t,n){var r=t.pendingProps;switch(mh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return ht(t.type)&&Nl(),Ke(t),null;case 3:return r=t.stateNode,ti(),pe(ft),pe(Je),_h(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vt!==null&&(Yd(Vt),Vt=null))),Vd(e,t),Ke(t),null;case 5:Sh(t);var s=zr(No.current);if(n=t.type,e!==null&&t.stateNode!=null)Fx(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return Ke(t),null}if(e=zr(rn.current),Sa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[tn]=t,r[Co]=i,e=(t.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<Hi.length;s++)me(Hi[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":hp(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":pp(r,i),me("invalid",r)}md(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ba(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ba(r.textContent,a,e),s=["children",""+a]):go.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":ha(r),mp(r,i,!0);break;case"textarea":ha(r),gp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[tn]=t,e[Co]=r,zx(e,t,!1,!1),t.stateNode=e;e:{switch(o=pd(n,r),n){case"dialog":me("cancel",e),me("close",e),s=r;break;case"iframe":case"object":case"embed":me("load",e),s=r;break;case"video":case"audio":for(s=0;s<Hi.length;s++)me(Hi[s],e);s=r;break;case"source":me("error",e),s=r;break;case"img":case"image":case"link":me("error",e),me("load",e),s=r;break;case"details":me("toggle",e),s=r;break;case"input":hp(e,r),s=cd(e,r),me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),me("invalid",e);break;case"textarea":pp(e,r),s=fd(e,r),me("invalid",e);break;default:s=r}md(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?vv(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gv(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yo(e,l):typeof l=="number"&&yo(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(go.hasOwnProperty(i)?l!=null&&i==="onScroll"&&me("scroll",e):l!=null&&Zf(e,i,l,o))}switch(n){case"input":ha(e),mp(e,r,!1);break;case"textarea":ha(e),gp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ur(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Vs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Vs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)Vx(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=zr(No.current),zr(rn.current),Sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(i=r.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:ba(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return Ke(t),null;case 13:if(pe(xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&yt!==null&&t.mode&1&&!(t.flags&128))ix(),Zs(),t.flags|=98560,i=!1;else if(i=Sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[tn]=t}else Zs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),i=!1}else Vt!==null&&(Yd(Vt),Vt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Le===0&&(Le=3):Lh())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return ti(),Vd(e,t),e===null&&ko(t.stateNode.containerInfo),Ke(t),null;case 10:return vh(t.type._context),Ke(t),null;case 17:return ht(t.type)&&Nl(),Ke(t),null;case 19:if(pe(xe),i=t.memoizedState,i===null)return Ke(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ai(i,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ll(e),o!==null){for(t.flags|=128,Ai(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fe(xe,xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pe()>ri&&(t.flags|=128,r=!0,Ai(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ll(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ai(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return Ke(t),null}else 2*Pe()-i.renderingStartTime>ri&&n!==1073741824&&(t.flags|=128,r=!0,Ai(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pe(),t.sibling=null,n=xe.current,fe(xe,r?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return $h(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function GE(e,t){switch(mh(t),t.tag){case 1:return ht(t.type)&&Nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),pe(ft),pe(Je),_h(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sh(t),null;case 13:if(pe(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(xe),null;case 4:return ti(),null;case 10:return vh(t.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var Ea=!1,Ye=!1,YE=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ms(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function Bd(e,t,n){try{n()}catch(r){je(e,t,r)}}var ig=!1;function XE(e,t){if(Ed=kl,e=qv(),fh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:e,selectionRange:n},kl=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,S=x.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:It(t.type,w),S);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(b){je(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return x=ig,ig=!1,x}function no(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bd(t,n,i)}s=s.next}while(s!==r)}}function bc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ud(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bx(e){var t=e.alternate;t!==null&&(e.alternate=null,Bx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Co],delete t[Td],delete t[RE],delete t[ME])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ux(e){return e.tag===5||e.tag===3||e.tag===4}function og(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ux(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jl));else if(r!==4&&(e=e.child,e!==null))for(Hd(e,t,n),e=e.sibling;e!==null;)Hd(e,t,n),e=e.sibling}function Wd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wd(e,t,n),e=e.sibling;e!==null;)Wd(e,t,n),e=e.sibling}var Fe=null,zt=!1;function In(e,t,n){for(n=n.child;n!==null;)Hx(e,t,n),n=n.sibling}function Hx(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(hc,n)}catch{}switch(n.tag){case 5:Ye||Ms(n,t);case 6:var r=Fe,s=zt;Fe=null,In(e,t,n),Fe=r,zt=s,Fe!==null&&(zt?(e=Fe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(zt?(e=Fe,n=n.stateNode,e.nodeType===8?pu(e.parentNode,n):e.nodeType===1&&pu(e,n),bo(e)):pu(Fe,n.stateNode));break;case 4:r=Fe,s=zt,Fe=n.stateNode.containerInfo,zt=!0,In(e,t,n),Fe=r,zt=s;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bd(n,t,o),s=s.next}while(s!==r)}In(e,t,n);break;case 1:if(!Ye&&(Ms(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,t,a)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,In(e,t,n),Ye=r):In(e,t,n);break;default:In(e,t,n)}}function ag(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new YE),t.forEach(function(r){var s=i2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fe=a.stateNode,zt=!1;break e;case 3:Fe=a.stateNode.containerInfo,zt=!0;break e;case 4:Fe=a.stateNode.containerInfo,zt=!0;break e}a=a.return}if(Fe===null)throw Error(H(160));Hx(i,o,s),Fe=null,zt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){je(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wx(t,e),t=t.sibling}function Wx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Qt(e),r&4){try{no(3,e,e.return),bc(3,e)}catch(w){je(e,e.return,w)}try{no(5,e,e.return)}catch(w){je(e,e.return,w)}}break;case 1:Lt(t,e),Qt(e),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(Lt(t,e),Qt(e),r&512&&n!==null&&Ms(n,n.return),e.flags&32){var s=e.stateNode;try{yo(s,"")}catch(w){je(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hv(s,i),pd(a,o);var c=pd(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?vv(s,d):u==="dangerouslySetInnerHTML"?gv(s,d):u==="children"?yo(s,d):Zf(s,u,d,c)}switch(a){case"input":ud(s,i);break;case"textarea":mv(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vs(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Vs(s,!!i.multiple,i.defaultValue,!0):Vs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Co]=i}catch(w){je(e,e.return,w)}}break;case 6:if(Lt(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){je(e,e.return,w)}}break;case 3:if(Lt(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(t.containerInfo)}catch(w){je(e,e.return,w)}break;case 4:Lt(t,e),Qt(e);break;case 13:Lt(t,e),Qt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rh=Pe())),r&4&&ag(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ye=(c=Ye)||u,Lt(t,e),Ye=c):Lt(t,e),Qt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Y=e,u=e.child;u!==null;){for(d=Y=u;Y!==null;){switch(h=Y,m=h.child,h.tag){case 0:case 11:case 14:case 15:no(4,h,h.return);break;case 1:Ms(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){je(r,n,w)}}break;case 5:Ms(h,h.return);break;case 22:if(h.memoizedState!==null){cg(d);continue}}m!==null?(m.return=h,Y=m):cg(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yv("display",o))}catch(w){je(e,e.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){je(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lt(t,e),Qt(e),r&4&&ag(e);break;case 21:break;default:Lt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ux(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yo(s,""),r.flags&=-33);var i=og(e);Wd(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=og(e);Hd(e,a,o);break;default:throw Error(H(161))}}catch(l){je(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JE(e,t,n){Y=e,qx(e)}function qx(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ea;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ye;a=Ea;var c=Ye;if(Ea=o,(Ye=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?ug(s):l!==null?(l.return=o,Y=l):ug(s);for(;i!==null;)Y=i,qx(i),i=i.sibling;Y=s,Ea=a,Ye=c}lg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):lg(e)}}function lg(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ye||bc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:It(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&qp(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&bo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ye||t.flags&512&&Ud(t)}catch(h){je(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function cg(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function ug(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bc(4,t)}catch(l){je(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){je(t,s,l)}}var i=t.return;try{Ud(t)}catch(l){je(t,i,l)}break;case 5:var o=t.return;try{Ud(t)}catch(l){je(t,o,l)}}}catch(l){je(t,t.return,l)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var QE=Math.ceil,Il=Ln.ReactCurrentDispatcher,Ph=Ln.ReactCurrentOwner,Tt=Ln.ReactCurrentBatchConfig,le=0,Ie=null,Re=null,Be=0,gt=0,$s=gr(0),Le=0,Ro=null,Zr=0,Sc=0,Ah=0,ro=null,at=null,Rh=0,ri=1/0,gn=null,zl=!1,qd=null,ir=null,Ca=!1,Zn=null,Fl=0,so=0,Kd=null,il=-1,ol=0;function nt(){return le&6?Pe():il!==-1?il:il=Pe()}function or(e){return e.mode&1?le&2&&Be!==0?Be&-Be:LE.transition!==null?(ol===0&&(ol=Pv()),ol):(e=ce,e!==0||(e=window.event,e=e===void 0?16:Ov(e.type)),e):1}function Wt(e,t,n,r){if(50<so)throw so=0,Kd=null,Error(H(185));Yo(e,n,r),(!(le&2)||e!==Ie)&&(e===Ie&&(!(le&2)&&(Sc|=n),Le===4&&Gn(e,Be)),mt(e,r),n===1&&le===0&&!(t.mode&1)&&(ri=Pe()+500,vc&&yr()))}function mt(e,t){var n=e.callbackNode;Lk(e,t);var r=_l(e,e===Ie?Be:0);if(r===0)n!==null&&xp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xp(n),t===1)e.tag===0?$E(dg.bind(null,e)):nx(dg.bind(null,e)),PE(function(){!(le&6)&&yr()}),n=null;else{switch(Av(r)){case 1:n=sh;break;case 4:n=Nv;break;case 16:n=Sl;break;case 536870912:n=Tv;break;default:n=Sl}n=ew(n,Kx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kx(e,t){if(il=-1,ol=0,le&6)throw Error(H(327));var n=e.callbackNode;if(qs()&&e.callbackNode!==n)return null;var r=_l(e,e===Ie?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vl(e,r);else{t=r;var s=le;le|=2;var i=Yx();(Ie!==e||Be!==t)&&(gn=null,ri=Pe()+500,Wr(e,t));do try{t2();break}catch(a){Gx(e,a)}while(!0);yh(),Il.current=i,le=s,Re!==null?t=0:(Ie=null,Be=0,t=Le)}if(t!==0){if(t===2&&(s=wd(e),s!==0&&(r=s,t=Gd(e,s))),t===1)throw n=Ro,Wr(e,0),Gn(e,r),mt(e,Pe()),n;if(t===6)Gn(e,r);else{if(s=e.current.alternate,!(r&30)&&!ZE(s)&&(t=Vl(e,r),t===2&&(i=wd(e),i!==0&&(r=i,t=Gd(e,i))),t===1))throw n=Ro,Wr(e,0),Gn(e,r),mt(e,Pe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:Rr(e,at,gn);break;case 3:if(Gn(e,r),(r&130023424)===r&&(t=Rh+500-Pe(),10<t)){if(_l(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){nt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Nd(Rr.bind(null,e,at,gn),t);break}Rr(e,at,gn);break;case 4:if(Gn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ht(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QE(r/1960))-r,10<r){e.timeoutHandle=Nd(Rr.bind(null,e,at,gn),r);break}Rr(e,at,gn);break;case 5:Rr(e,at,gn);break;default:throw Error(H(329))}}}return mt(e,Pe()),e.callbackNode===n?Kx.bind(null,e):null}function Gd(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(Wr(e,t).flags|=256),e=Vl(e,t),e!==2&&(t=at,at=n,t!==null&&Yd(t)),e}function Yd(e){at===null?at=e:at.push.apply(at,e)}function ZE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gn(e,t){for(t&=~Ah,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function dg(e){if(le&6)throw Error(H(327));qs();var t=_l(e,0);if(!(t&1))return mt(e,Pe()),null;var n=Vl(e,t);if(e.tag!==0&&n===2){var r=wd(e);r!==0&&(t=r,n=Gd(e,r))}if(n===1)throw n=Ro,Wr(e,0),Gn(e,t),mt(e,Pe()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rr(e,at,gn),mt(e,Pe()),null}function Mh(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(ri=Pe()+500,vc&&yr())}}function es(e){Zn!==null&&Zn.tag===0&&!(le&6)&&qs();var t=le;le|=1;var n=Tt.transition,r=ce;try{if(Tt.transition=null,ce=1,e)return e()}finally{ce=r,Tt.transition=n,le=t,!(le&6)&&yr()}}function $h(){gt=$s.current,pe($s)}function Wr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TE(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:ti(),pe(ft),pe(Je),_h();break;case 5:Sh(r);break;case 4:ti();break;case 13:pe(xe);break;case 19:pe(xe);break;case 10:vh(r.type._context);break;case 22:case 23:$h()}n=n.return}if(Ie=e,Re=e=ar(e.current,null),Be=gt=t,Le=0,Ro=null,Ah=Sc=Zr=0,at=ro=null,Ir!==null){for(t=0;t<Ir.length;t++)if(n=Ir[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ir=null}return e}function Gx(e,t){do{var n=Re;try{if(yh(),nl.current=Ol,Dl){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Qr=0,Oe=$e=be=null,to=!1,To=0,Ph.current=null,n===null||n.return===null){Le=1,Ro=t,Re=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=Be,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Qp(o);if(m!==null){m.flags&=-257,Zp(m,o,a,i,t),m.mode&1&&Jp(i,c,t),t=m,l=c;var x=t.updateQueue;if(x===null){var w=new Set;w.add(l),t.updateQueue=w}else x.add(l);break e}else{if(!(t&1)){Jp(i,c,t),Lh();break e}l=Error(H(426))}}else if(ve&&a.mode&1){var S=Qp(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Zp(S,o,a,i,t),ph(ni(l,a));break e}}i=l=ni(l,a),Le!==4&&(Le=2),ro===null?ro=[i]:ro.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Ax(i,l,t);Wp(i,p);break e;case 1:a=l;var y=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ir===null||!ir.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=Rx(i,a,t);Wp(i,b);break e}}i=i.return}while(i!==null)}Jx(n)}catch(k){t=k,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Yx(){var e=Il.current;return Il.current=Ol,e===null?Ol:e}function Lh(){(Le===0||Le===3||Le===2)&&(Le=4),Ie===null||!(Zr&268435455)&&!(Sc&268435455)||Gn(Ie,Be)}function Vl(e,t){var n=le;le|=2;var r=Yx();(Ie!==e||Be!==t)&&(gn=null,Wr(e,t));do try{e2();break}catch(s){Gx(e,s)}while(!0);if(yh(),le=n,Il.current=r,Re!==null)throw Error(H(261));return Ie=null,Be=0,Le}function e2(){for(;Re!==null;)Xx(Re)}function t2(){for(;Re!==null&&!Ck();)Xx(Re)}function Xx(e){var t=Zx(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Jx(e):Re=t,Ph.current=null}function Jx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=GE(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,Re=null;return}}else if(n=KE(n,t,gt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Le===0&&(Le=5)}function Rr(e,t,n){var r=ce,s=Tt.transition;try{Tt.transition=null,ce=1,n2(e,t,n,r)}finally{Tt.transition=s,ce=r}return null}function n2(e,t,n,r){do qs();while(Zn!==null);if(le&6)throw Error(H(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Dk(e,i),e===Ie&&(Re=Ie=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ca||(Ca=!0,ew(Sl,function(){return qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var o=ce;ce=1;var a=le;le|=4,Ph.current=null,XE(e,n),Wx(n,e),SE(Cd),kl=!!Ed,Cd=Ed=null,e.current=n,JE(n),jk(),le=a,ce=o,Tt.transition=i}else e.current=n;if(Ca&&(Ca=!1,Zn=e,Fl=s),i=e.pendingLanes,i===0&&(ir=null),Pk(n.stateNode),mt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zl)throw zl=!1,e=qd,qd=null,e;return Fl&1&&e.tag!==0&&qs(),i=e.pendingLanes,i&1?e===Kd?so++:(so=0,Kd=e):so=0,yr(),null}function qs(){if(Zn!==null){var e=Av(Fl),t=Tt.transition,n=ce;try{if(Tt.transition=null,ce=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,Fl=0,le&6)throw Error(H(331));var s=le;for(le|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:no(8,u,i)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var h=u.sibling,m=u.return;if(Bx(u),u===c){Y=null;break}if(h!==null){h.return=m,Y=h;break}Y=m}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:no(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Y=p;break e}Y=i.return}}var y=e.current;for(Y=y;Y!==null;){o=Y;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,Y=g;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bc(9,a)}}catch(k){je(a,a.return,k)}if(a===o){Y=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Y=b;break e}Y=a.return}}if(le=s,yr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(hc,e)}catch{}r=!0}return r}finally{ce=n,Tt.transition=t}}return!1}function fg(e,t,n){t=ni(n,t),t=Ax(e,t,1),e=sr(e,t,1),t=nt(),e!==null&&(Yo(e,1,t),mt(e,t))}function je(e,t,n){if(e.tag===3)fg(e,e,n);else for(;t!==null;){if(t.tag===3){fg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=ni(n,e),e=Rx(t,e,1),t=sr(t,e,1),e=nt(),t!==null&&(Yo(t,1,e),mt(t,e));break}}t=t.return}}function r2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,Ie===e&&(Be&n)===n&&(Le===4||Le===3&&(Be&130023424)===Be&&500>Pe()-Rh?Wr(e,0):Ah|=n),mt(e,t)}function Qx(e,t){t===0&&(e.mode&1?(t=ga,ga<<=1,!(ga&130023424)&&(ga=4194304)):t=1);var n=nt();e=jn(e,t),e!==null&&(Yo(e,t,n),mt(e,n))}function s2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qx(e,n)}function i2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),Qx(e,n)}var Zx;Zx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ct=!1,qE(e,t,n);ct=!!(e.flags&131072)}else ct=!1,ve&&t.flags&1048576&&rx(t,Al,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sl(e,t),e=t.pendingProps;var s=Qs(t,Je.current);Ws(t,n),s=Eh(null,t,r,e,s,n);var i=Ch();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(i=!0,Tl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wh(t),s.updater=wc,t.stateNode=s,s._reactInternals=t,Ld(t,r,e,n),t=Id(null,t,r,!0,i,n)):(t.tag=0,ve&&i&&hh(t),Ze(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=a2(r),e=It(r,e),s){case 0:t=Od(null,t,r,e,n);break e;case 1:t=ng(null,t,r,e,n);break e;case 11:t=eg(null,t,r,e,n);break e;case 14:t=tg(null,t,r,It(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:It(r,s),Od(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:It(r,s),ng(e,t,r,s,n);case 3:e:{if(Dx(t),e===null)throw Error(H(387));r=t.pendingProps,i=t.memoizedState,s=i.element,cx(e,t),$l(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ni(Error(H(423)),t),t=rg(e,t,r,n,s);break e}else if(r!==s){s=ni(Error(H(424)),t),t=rg(e,t,r,n,s);break e}else for(yt=rr(t.stateNode.containerInfo.firstChild),vt=t,ve=!0,Vt=null,n=ax(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===s){t=Nn(e,t,n);break e}Ze(e,t,r,n)}t=t.child}return t;case 5:return ux(t),e===null&&Rd(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,jd(r,s)?o=null:i!==null&&jd(r,i)&&(t.flags|=32),Lx(e,t),Ze(e,t,o,n),t.child;case 6:return e===null&&Rd(t),null;case 13:return Ox(e,t,n);case 4:return bh(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ei(t,null,r,n):Ze(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:It(r,s),eg(e,t,r,s,n);case 7:return Ze(e,t,t.pendingProps,n),t.child;case 8:return Ze(e,t,t.pendingProps.children,n),t.child;case 12:return Ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,fe(Rl,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!ft.current){t=Nn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=_n(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Md(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Md(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ze(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ws(t,n),s=Rt(s),r=r(s),t.flags|=1,Ze(e,t,r,n),t.child;case 14:return r=t.type,s=It(r,t.pendingProps),s=It(r.type,s),tg(e,t,r,s,n);case 15:return Mx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:It(r,s),sl(e,t),t.tag=1,ht(r)?(e=!0,Tl(t)):e=!1,Ws(t,n),Px(t,r,s),Ld(t,r,s,n),Id(null,t,r,!0,e,n);case 19:return Ix(e,t,n);case 22:return $x(e,t,n)}throw Error(H(156,t.tag))};function ew(e,t){return jv(e,t)}function o2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,r){return new o2(e,t,n,r)}function Dh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a2(e){if(typeof e=="function")return Dh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===th)return 11;if(e===nh)return 14}return 2}function ar(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function al(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Dh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ks:return qr(n.children,s,i,t);case eh:o=8,s|=8;break;case id:return e=jt(12,n,t,s|2),e.elementType=id,e.lanes=i,e;case od:return e=jt(13,n,t,s),e.elementType=od,e.lanes=i,e;case ad:return e=jt(19,n,t,s),e.elementType=ad,e.lanes=i,e;case uv:return _c(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lv:o=10;break e;case cv:o=9;break e;case th:o=11;break e;case nh:o=14;break e;case Bn:o=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=jt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function qr(e,t,n,r){return e=jt(7,e,r,t),e.lanes=n,e}function _c(e,t,n,r){return e=jt(22,e,r,t),e.elementType=uv,e.lanes=n,e.stateNode={isHidden:!1},e}function _u(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function ku(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l2(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oh(e,t,n,r,s,i,o,a,l){return e=new l2(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(i),e}function c2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tw(e){if(!e)return dr;e=e._reactInternals;e:{if(is(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(ht(n))return tx(e,n,t)}return t}function nw(e,t,n,r,s,i,o,a,l){return e=Oh(n,r,!0,e,s,i,o,a,l),e.context=tw(null),n=e.current,r=nt(),s=or(n),i=_n(r,s),i.callback=t??null,sr(n,i,s),e.current.lanes=s,Yo(e,s,r),mt(e,r),e}function kc(e,t,n,r){var s=t.current,i=nt(),o=or(s);return n=tw(n),t.context===null?t.context=n:t.pendingContext=n,t=_n(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(s,t,o),e!==null&&(Wt(e,s,o,i),tl(e,s,o)),o}function Bl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ih(e,t){hg(e,t),(e=e.alternate)&&hg(e,t)}function u2(){return null}var rw=typeof reportError=="function"?reportError:function(e){console.error(e)};function zh(e){this._internalRoot=e}Ec.prototype.render=zh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));kc(e,t,null,null)};Ec.prototype.unmount=zh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;es(function(){kc(null,e,null,null)}),t[Cn]=null}};function Ec(e){this._internalRoot=e}Ec.prototype.unstable_scheduleHydration=function(e){if(e){var t=$v();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kn.length&&t!==0&&t<Kn[n].priority;n++);Kn.splice(n,0,e),n===0&&Dv(e)}};function Fh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mg(){}function d2(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Bl(o);i.call(c)}}var o=nw(t,r,e,0,null,!1,!1,"",mg);return e._reactRootContainer=o,e[Cn]=o.current,ko(e.nodeType===8?e.parentNode:e),es(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Bl(l);a.call(c)}}var l=Oh(e,0,!1,null,null,!1,!1,"",mg);return e._reactRootContainer=l,e[Cn]=l.current,ko(e.nodeType===8?e.parentNode:e),es(function(){kc(t,l,n,r)}),l}function jc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Bl(o);a.call(l)}}kc(t,o,e,s)}else o=d2(n,t,e,s,r);return Bl(o)}Rv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ui(t.pendingLanes);n!==0&&(ih(t,n|1),mt(t,Pe()),!(le&6)&&(ri=Pe()+500,yr()))}break;case 13:es(function(){var r=jn(e,1);if(r!==null){var s=nt();Wt(r,e,1,s)}}),Ih(e,1)}};oh=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var n=nt();Wt(t,e,134217728,n)}Ih(e,134217728)}};Mv=function(e){if(e.tag===13){var t=or(e),n=jn(e,t);if(n!==null){var r=nt();Wt(n,e,t,r)}Ih(e,t)}};$v=function(){return ce};Lv=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};yd=function(e,t,n){switch(t){case"input":if(ud(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=yc(r);if(!s)throw Error(H(90));fv(r),ud(r,s)}}}break;case"textarea":mv(e,n);break;case"select":t=n.value,t!=null&&Vs(e,!!n.multiple,t,!1)}};bv=Mh;Sv=es;var f2={usingClientEntryPoint:!1,Events:[Jo,Ns,yc,xv,wv,Mh]},Ri={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h2={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ev(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||u2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{hc=ja.inject(h2),nn=ja}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f2;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(t))throw Error(H(200));return c2(e,t,null,n)};bt.createRoot=function(e,t){if(!Fh(e))throw Error(H(299));var n=!1,r="",s=rw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Oh(e,1,!1,null,null,n,!1,r,s),e[Cn]=t.current,ko(e.nodeType===8?e.parentNode:e),new zh(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Ev(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return es(e)};bt.hydrate=function(e,t,n){if(!Cc(t))throw Error(H(200));return jc(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!Fh(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=rw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=nw(t,null,e,1,n??null,s,!1,i,o),e[Cn]=t.current,ko(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ec(t)};bt.render=function(e,t,n){if(!Cc(t))throw Error(H(200));return jc(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Cc(e))throw Error(H(40));return e._reactRootContainer?(es(function(){jc(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};bt.unstable_batchedUpdates=Mh;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cc(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return jc(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function sw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sw)}catch(e){console.error(e)}}sw(),sv.exports=bt;var iw=sv.exports,ow,pg=iw;ow=pg.createRoot,pg.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(e,t)=>{const n=v.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>v.createElement("svg",{ref:u,...m2,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${p2(e)}`,a].join(" "),...c},[...t.map(([d,h])=>v.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=ge("BookImage",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["circle",{cx:"10",cy:"8",r:"2",key:"2qkj4p"}],["path",{d:"m20 13.7-2.1-2.1c-.8-.8-2-.8-2.8 0L9.7 17",key:"160say"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=ge("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=ge("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ge("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=ge("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),P2="modulepreload",A2=function(e){return"/"+e},yg={},Zo=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=A2(l),l in yg)return;yg[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":P2,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},R2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zo(async()=>{const{default:r}=await Promise.resolve().then(()=>pi);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Uh extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class M2 extends Uh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $2 extends Uh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class L2 extends Uh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xd||(Xd={}));var D2=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class O2{constructor(t,{headers:n={},customFetch:r,region:s=Xd.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=R2(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return D2(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(x=>{throw new M2(x)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new $2(u);if(!u.ok)throw new L2(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield u.json():h==="application/octet-stream"?m=yield u.blob():h==="text/event-stream"?m=u:h==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var lt={},Hh={},Nc={},ea={},Tc={},Pc={},I2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ii=I2();const z2=ii.fetch,dw=ii.fetch.bind(ii),fw=ii.Headers,F2=ii.Request,V2=ii.Response,pi=Object.freeze(Object.defineProperty({__proto__:null,Headers:fw,Request:F2,Response:V2,default:dw,fetch:z2},Symbol.toStringTag,{value:"Module"})),B2=B_(pi);var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});let U2=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ac.default=U2;var hw=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});const H2=hw(B2),W2=hw(Ac);let q2=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=H2.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,d=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),S=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&S&&S.length>1&&(d=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const w=await i.text();try{c=JSON.parse(w),Array.isArray(c)&&i.status===404&&(u=[],c=null,h=200,m="OK")}catch{i.status===404&&w===""?(h=204,m="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new W2.default(c)}return{error:c,data:u,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Pc.default=q2;var K2=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tc,"__esModule",{value:!0});const G2=K2(Pc);let Y2=class extends G2.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Tc.default=Y2;var X2=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ea,"__esModule",{value:!0});const J2=X2(Tc);let Q2=class extends J2.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ea.default=Q2;var Z2=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nc,"__esModule",{value:!0});const Mi=Z2(ea);let eC=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Mi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Mi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Mi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Mi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Mi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Nc.default=eC;var Rc={},Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.version=void 0;Mc.version="0.0.0-automated";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.DEFAULT_HEADERS=void 0;const tC=Mc;Rc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tC.version}`};var mw=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hh,"__esModule",{value:!0});const nC=mw(Nc),rC=mw(ea),sC=Rc;let iC=class pw{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},sC.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new nC.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new pw(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new rC.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Hh.default=iC;var gi=At&&At.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const gw=gi(Hh);lt.PostgrestClient=gw.default;const yw=gi(Nc);lt.PostgrestQueryBuilder=yw.default;const vw=gi(ea);lt.PostgrestFilterBuilder=vw.default;const xw=gi(Tc);lt.PostgrestTransformBuilder=xw.default;const ww=gi(Pc);lt.PostgrestBuilder=ww.default;const bw=gi(Ac);lt.PostgrestError=bw.default;var oC=lt.default={PostgrestClient:gw.default,PostgrestQueryBuilder:yw.default,PostgrestFilterBuilder:vw.default,PostgrestTransformBuilder:xw.default,PostgrestBuilder:ww.default,PostgrestError:bw.default};const{PostgrestClient:aC,PostgrestQueryBuilder:zI,PostgrestFilterBuilder:FI,PostgrestTransformBuilder:VI,PostgrestBuilder:BI,PostgrestError:UI}=oC;function lC(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const cC=lC(),uC="2.11.13",dC={"X-Client-Info":`realtime-js/${uC}`},fC="1.0.0",Sw=1e4,hC=1e3;var io;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(io||(io={}));var Ge;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ge||(Ge={}));var Ft;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ft||(Ft={}));var Jd;(function(e){e.websocket="websocket"})(Jd||(Jd={}));var Dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Dr||(Dr={}));class mC{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}let _w=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const vg=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=pC(o,e,t,s),i),{})},pC=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?kw(i,o):Qd(o)},kw=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return xC(t,n)}switch(e){case ue.bool:return gC(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return yC(t);case ue.json:case ue.jsonb:return vC(t);case ue.timestamp:return wC(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Qd(t);default:return Qd(t)}},Qd=e=>e,gC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},xC=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>kw(t,a))}return e},wC=e=>typeof e=="string"?e.replace(" ","T"):e,Ew=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Cu{constructor(t,n,r={},s=Sw){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var xg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(xg||(xg={}));class oo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oo.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=oo.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=oo.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(S=>S.presence_ref),m=d.map(S=>S.presence_ref),x=u.filter(S=>m.indexOf(S.presence_ref)<0),w=d.filter(S=>h.indexOf(S.presence_ref)<0);x.length>0&&(a[c]=x),w.length>0&&(l[c]=w)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wg||(wg={}));var bg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(bg||(bg={}));var yn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class Wh{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Cu(this,Ft.join,this.params,this.timeout),this.rejoinTimer=new _w(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ft.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new oo(this),this.broadcastEndpointURL=Ew(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t==null?void 0:t(yn.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(yn.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){t==null||t(yn.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,x=[];for(let w=0;w<m;w++){const S=h[w],{filter:{event:p,schema:y,table:g,filter:b}}=S,k=u&&u[w];if(k&&k.event===p&&k.schema===y&&k.table===g&&k.filter===b)x.push(Object.assign(Object.assign({},S),{id:k.id}));else{this.unsubscribe(),this.state=Ge.errored,t==null||t(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(yn.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ge.errored,t==null||t(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ft.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Cu(this,Ft.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Cu(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ft;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,w,S;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(w=m.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,w,S,p,y,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const b=m.id,k=(x=m.filter)===null||x===void 0?void 0:x.event;return b&&((w=n.ids)===null||w===void 0?void 0:w.includes(b))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const b=(y=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return b==="*"||b===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:w,table:S,commit_timestamp:p,type:y,errors:g}=x;h=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:p,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(x))}m.callback(h,r)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Wh.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ft.close,{},t)}_onError(t){this._on(Ft.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=vg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=vg(t.columns,t.old_record)),n}}const Sg=()=>{},bC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SC{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=dC,this.params={},this.timeout=Sw,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sg,this.ref=0,this.logger=Sg,this.conn=null,this.sendBuffer=[],this.serializer=new mC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Zo(async()=>{const{default:l}=await Promise.resolve().then(()=>pi);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Jd.websocket}`,this.httpEndpoint=Ew(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _w(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=cC),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fC}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case io.connecting:return Dr.Connecting;case io.open:return Dr.Open;case io.closing:return Dr.Closing;default:return Dr.Closed}}isConnected(){return this.connectionState()===Dr.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Wh(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Ft.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(hC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ft.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([bC],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class qh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function De(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _C extends qh{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zd extends qh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var kC=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const Cw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zo(async()=>{const{default:r}=await Promise.resolve().then(()=>pi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},EC=()=>kC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zo(()=>Promise.resolve().then(()=>pi),void 0)).Response:Response}),ef=e=>{if(Array.isArray(e))return e.map(n=>ef(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ef(r)}),t};var os=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const ju=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CC=(e,t,n)=>os(void 0,void 0,void 0,function*(){const r=yield EC();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new _C(ju(s),e.status||500))}).catch(s=>{t(new Zd(ju(s),s))}):t(new Zd(ju(e),e))}),jC=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ta(e,t,n,r,s,i){return os(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,jC(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>CC(l,a,r))})})}function Ul(e,t,n,r){return os(this,void 0,void 0,function*(){return ta(e,"GET",t,n,r)})}function Hn(e,t,n,r,s){return os(this,void 0,void 0,function*(){return ta(e,"POST",t,r,s,n)})}function NC(e,t,n,r,s){return os(this,void 0,void 0,function*(){return ta(e,"PUT",t,r,s,n)})}function TC(e,t,n,r){return os(this,void 0,void 0,function*(){return ta(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jw(e,t,n,r,s){return os(this,void 0,void 0,function*(){return ta(e,"DELETE",t,r,s,n)})}var ot=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const PC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_g={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AC{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Cw(s)}uploadOrUpdate(t,n,r,s){return ot(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_g),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(De(i))return{data:null,error:i};throw i}})}upload(t,n,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:_g.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(De(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Hn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new qh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}update(t,n,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ot(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}copy(t,n,r){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Hn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return ot(this,void 0,void 0,function*(){try{const s=yield Hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}download(t,n){return ot(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Ul(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}})}info(t){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ul(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ef(r),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}exists(t){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield TC(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(De(r)&&r instanceof Zd){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield jw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}list(t,n,r){return ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},PC),n),{prefix:t||""});return{data:yield Hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const RC="2.7.1",MC={"X-Client-Info":`storage-js/${RC}`};var ms=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class $C{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},MC),n),this.fetch=Cw(r)}listBuckets(){return ms(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}})}getBucket(t){return ms(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return ms(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return ms(this,void 0,void 0,function*(){try{return{data:yield NC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ms(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ms(this,void 0,void 0,function*(){try{return{data:yield jw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}}class LC extends $C{constructor(t,n={},r){super(t,n,r)}from(t){return new AC(this.url,this.headers,t,this.fetch)}}const DC="2.50.1";let Wi="";typeof Deno<"u"?Wi="deno":typeof document<"u"?Wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wi="react-native":Wi="node";const OC={"X-Client-Info":`supabase-js-${Wi}/${DC}`},IC={headers:OC},zC={schema:"public"},FC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VC={};var BC=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const UC=e=>{let t;return e?t=e:typeof fetch>"u"?t=dw:t=fetch,(...n)=>t(...n)},HC=()=>typeof Headers>"u"?fw:Headers,WC=(e,t,n)=>{const r=UC(n),s=HC();return(i,o)=>BC(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var qC=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};function KC(e){return e.endsWith("/")?e:e+"/"}function GC(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qC(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Nw="2.70.0",Ss=30*1e3,tf=3,Nu=tf*Ss,YC="http://localhost:9999",XC="supabase.auth.token",JC={"X-Client-Info":`gotrue-js/${Nw}`},nf="X-Supabase-Api-Version",Tw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZC=6e5;class Kh extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ej extends Kh{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function tj(e){return re(e)&&e.name==="AuthApiError"}class Pw extends Kh{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class vr extends Kh{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Fn extends vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nj(e){return re(e)&&e.name==="AuthSessionMissingError"}class Na extends vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ta extends vr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pa extends vr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rj(e){return re(e)&&e.name==="AuthImplicitGrantRedirectError"}class kg extends vr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rf extends vr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Tu(e){return re(e)&&e.name==="AuthRetryableFetchError"}class Eg extends vr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ao extends vr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cg=` 	
\r=`.split(""),sj=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Cg.length;t+=1)e[Cg[t].charCodeAt(0)]=-2;for(let t=0;t<Hl.length;t+=1)e[Hl[t].charCodeAt(0)]=t;return e})();function jg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hl[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hl[r]),t.queuedBits-=6}}function Aw(e,t,n){const r=sj[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ng(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{aj(o,r,n)};for(let o=0;o<e.length;o+=1)Aw(e.charCodeAt(o),s,i);return t.join("")}function ij(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function oj(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}ij(r,t)}}function aj(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function lj(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Aw(e.charCodeAt(s),n,r);return new Uint8Array(t)}function cj(e){const t=[];return oj(e,n=>t.push(n)),new Uint8Array(t)}function uj(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>jg(s,n,r)),jg(null,n,r),t.join("")}function dj(e){return Math.round(Date.now()/1e3)+e}function fj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Dt=()=>typeof window<"u"&&typeof document<"u",Tr={tested:!1,writable:!1},lo=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tr.tested)return Tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Tr.tested=!0,Tr.writable=!0}catch{Tr.tested=!0,Tr.writable=!1}return Tr.writable};function hj(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Rw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zo(async()=>{const{default:r}=await Promise.resolve().then(()=>pi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},mj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mw=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Aa=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ra=async(e,t)=>{await e.removeItem(t)};class $c{constructor(){this.promise=new $c.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}$c.promiseConstructor=Promise;function Pu(e){const t=e.split(".");if(t.length!==3)throw new ao("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!QC.test(t[r]))throw new ao("JWT not in base64url format");return{header:JSON.parse(Ng(t[0])),payload:JSON.parse(Ng(t[1])),signature:lj(t[2]),raw:{header:t[0],payload:t[1]}}}async function pj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gj(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function yj(e){return("0"+e.toString(16)).substr(-2)}function vj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,yj).join("")}async function xj(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function wj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await xj(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ps(e,t,n=!1){const r=vj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Mw(e,`${t}-code-verifier`,s);const i=await wj(r);return[i,r===i?"plain":"s256"]}const bj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sj(e){const t=e.headers.get(nf);if(!t||!t.match(bj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _j(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ej=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gs(e){if(!Ej.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Cj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Mr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jj=[502,503,504];async function Tg(e){var t;if(!mj(e))throw new rf(Mr(e),0);if(jj.includes(e.status))throw new rf(Mr(e),e.status);let n;try{n=await e.json()}catch(i){throw new Pw(Mr(i),i)}let r;const s=Sj(e);if(s&&s.getTime()>=Tw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Eg(Mr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Eg(Mr(n),e.status,n.weak_password.reasons);throw new ej(Mr(n),e.status||500,r)}const Nj=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ie(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[nf]||(i[nf]=Tw["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Tj(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Tj(e,t,n,r,s,i){const o=Nj(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new rf(Mr(l),0)}if(a.ok||await Tg(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Tg(l)}}function pn(e){var t;let n=null;Mj(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=dj(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Pg(e){const t=pn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Pj(e){return{data:e,error:null}}function Aj(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=Cj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Rj(e){return e}function Mj(e){return e.access_token&&e.refresh_token&&e.expires_in}const Au=["global","local","others"];var $j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Lj{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Rw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Au[0]){if(Au.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Au.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=$j(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Aj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rj});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);c[`${S}Page`]=w}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(re(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){gs(t);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){gs(t);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Yn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){gs(t);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){gs(t.userId);try{const{data:n,error:r}=await ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){gs(t.userId),gs(t.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}}const Dj={getItem:e=>lo()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{lo()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{lo()&&globalThis.localStorage.removeItem(e)}};function Ag(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Oj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ys={debug:!!(globalThis&&lo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $w extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ij extends $w{}async function zj(e,t,n){ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ij(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ys.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Oj();const Fj={url:YC,storageKey:XC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rg(e,t,n){return await n()}class Mo{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mo.nextInstanceID,Mo.nextInstanceID+=1,this.instanceID>0&&Dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Fj),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Lj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Rw(s.fetch),this.lock=s.lock||Rg,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Dt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=zj:this.lock=Rg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:lo()?this.storage=Dj:(this.memoryStorage={},this.storage=Ag(this.memoryStorage)):(this.memoryStorage={},this.storage=Ag(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Nw}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=hj(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Dt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rj(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?{error:n}:{error:new Pw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:pn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:d,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await ps(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:pn})}else if("phone"in t){const{phone:u,password:d,options:h}=t;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:pn})}else throw new Ta("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pg})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pg})}else throw new Ta("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Na}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,c,u,d,h,m;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:S,wallet:p,statement:y,options:g}=t;let b;if(Dt())if(typeof p=="object")b=p;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))b=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const k=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in b&&b.signIn){const C=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),y?{statement:y}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((d=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await b.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:S,error:p}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:uj(w)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:pn});if(p)throw p;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Na}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:p})}catch(S){if(re(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const n=await Aa(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:pn});if(await Ra(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Na}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(re(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:pn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Na}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ps(this.storage,this.storageKey));const{error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ta("You must provide either an email or phone number.")}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:pn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ps(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Pj})}catch(i){if(re(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fn;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ta("You must provide either an email or phone number and a type")}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Aa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Nu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fn}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Yn})})}catch(n){if(re(n))return nj(n)&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Fn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await ps(this.storage,this.storageKey));const{data:c,error:u}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Pu(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Dt())throw new Pa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new kg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new kg("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Pa("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const x=h-d;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,u);const{data:w,error:S}=await this._getUser(i);if(S)throw S;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Aa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(tj(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=fj(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ps(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(re(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Dt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(re(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await gj(async s=>(s>0&&await pj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Tu(i)&&Date.now()+o-r<Ss})}catch(r){if(this._debug(n,"error",r),re(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Dt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Aa(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Nu;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Nu}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Tu(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $c;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Fn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),re(i)){const o={session:null,error:i};return Tu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Mw(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ra(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ss}ms, refresh threshold is ${tf} ticks`),s<=tf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $w)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ps(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Pu(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+ZC>Date.now()))return r;const{data:s,error:i}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new ao("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===t),!r)throw new ao("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Pu(r);if(_j(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=kj(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,cj(`${a}.${l}`)))throw new ao("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}}Mo.nextInstanceID=0;const Vj=Mo;class Bj extends Vj{constructor(t){super(t)}}var Uj=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class Hj{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=KC(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:zC,realtime:VC,auth:Object.assign(Object.assign({},FC),{storageKey:c}),global:IC},d=GC(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=WC(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new aC(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new O2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new LC(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Uj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bj({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new SC(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wj=(e,t,n)=>new Hj(e,t,n),qj="https://xfgsdtwbbzvozzbxasok.supabase.co",Kj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmZ3NkdHdiYnp2b3p6Ynhhc29rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4MDQzMjAsImV4cCI6MjA2NjM4MDMyMH0.Dp_gJRubQqFZtTEQh3a5myRFLerpW7hmoZ2Iz4Qmqkk",G=Wj(qj,Kj,{auth:{persistSession:!0,detectSessionInUrl:!1}});let Gj={data:""},Yj=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Gj,Xj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Jj=/\/\*[^]*?\*\/|  +/g,Mg=/\n+/g,Xn=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Xn(o,i):i+"{"+Xn(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=Xn(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Xn.p?Xn.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},hn={},Lw=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Lw(e[n]);return t}return e},Qj=(e,t,n,r,s)=>{let i=Lw(e),o=hn[i]||(hn[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!hn[o]){let l=i!==e?e:(c=>{let u,d,h=[{}];for(;u=Xj.exec(c.replace(Jj,""));)u[4]?h.shift():u[3]?(d=u[3].replace(Mg," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(Mg," ").trim();return h[0]})(e);hn[o]=Xn(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&hn.g?hn.g:null;return n&&(hn.g=hn[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(hn[o],t,r,a),o},Zj=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Xn(a,""):a===!1?"":a}return r+s+(o??"")},"");function Lc(e){let t=this||{},n=e.call?e(t.p):e;return Qj(n.unshift?n.raw?Zj(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,Yj(t.target),t.g,t.o,t.k)}let Dw,sf,of;Lc.bind({g:1});let Pn=Lc.bind({k:1});function eN(e,t,n,r){Xn.p=t,Dw=e,sf=n,of=r}function xr(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:sf&&sf()},a),n.o=/ *go\d+/.test(l),a.className=Lc.apply(n,r)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),of&&c[0]&&of(a),Dw(c,a)}return s}}var tN=e=>typeof e=="function",Wl=(e,t)=>tN(e)?e(t):e,nN=(()=>{let e=0;return()=>(++e).toString()})(),Ow=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),rN=20,Iw=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,rN)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return Iw(e,{type:e.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},ll=[],Fr={toasts:[],pausedAt:void 0},as=e=>{Fr=Iw(Fr,e),ll.forEach(t=>{t(Fr)})},sN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iN=(e={})=>{let[t,n]=v.useState(Fr),r=v.useRef(Fr);v.useEffect(()=>(r.current!==Fr&&n(Fr),ll.push(n),()=>{let i=ll.indexOf(n);i>-1&&ll.splice(i,1)}),[]);let s=t.toasts.map(i=>{var o,a,l;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((a=e[i.type])==null?void 0:a.duration)||(e==null?void 0:e.duration)||sN[i.type],style:{...e.style,...(l=e[i.type])==null?void 0:l.style,...i.style}}});return{...t,toasts:s}},oN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||nN()}),na=e=>(t,n)=>{let r=oN(t,e,n);return as({type:2,toast:r}),r.id},et=(e,t)=>na("blank")(e,t);et.error=na("error");et.success=na("success");et.loading=na("loading");et.custom=na("custom");et.dismiss=e=>{as({type:3,toastId:e})};et.remove=e=>as({type:4,toastId:e});et.promise=(e,t,n)=>{let r=et.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?Wl(t.success,s):void 0;return i?et.success(i,{id:r,...n,...n==null?void 0:n.success}):et.dismiss(r),s}).catch(s=>{let i=t.error?Wl(t.error,s):void 0;i?et.error(i,{id:r,...n,...n==null?void 0:n.error}):et.dismiss(r)}),e};var aN=(e,t)=>{as({type:1,toast:{id:e,height:t}})},lN=()=>{as({type:5,time:Date.now()})},co=new Map,cN=1e3,uN=(e,t=cN)=>{if(co.has(e))return;let n=setTimeout(()=>{co.delete(e),as({type:4,toastId:e})},t);co.set(e,n)},dN=e=>{let{toasts:t,pausedAt:n}=iN(e);v.useEffect(()=>{if(n)return;let i=Date.now(),o=t.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&et.dismiss(a.id);return}return setTimeout(()=>et.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[t,n]);let r=v.useCallback(()=>{n&&as({type:6,time:Date.now()})},[n]),s=v.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=t.filter(m=>(m.position||c)===(i.position||c)&&m.height),d=u.findIndex(m=>m.id===i.id),h=u.filter((m,x)=>x<d&&m.visible).length;return u.filter(m=>m.visible).slice(...a?[h+1]:[0,h]).reduce((m,x)=>m+(x.height||0)+l,0)},[t]);return v.useEffect(()=>{t.forEach(i=>{if(i.dismissed)uN(i.id,i.removeDelay);else{let o=co.get(i.id);o&&(clearTimeout(o),co.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:aN,startPause:lN,endPause:r,calculateOffset:s}}},fN=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hN=Pn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mN=Pn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pN=xr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gN=Pn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yN=xr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${gN} 1s linear infinite;
`,vN=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xN=Pn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wN=xr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bN=xr("div")`
  position: absolute;
`,SN=xr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_N=Pn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kN=xr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_N} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,EN=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?v.createElement(kN,null,t):t:n==="blank"?null:v.createElement(SN,null,v.createElement(yN,{...r}),n!=="loading"&&v.createElement(bN,null,n==="error"?v.createElement(pN,{...r}):v.createElement(wN,{...r})))},CN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,NN="0%{opacity:0;} 100%{opacity:1;}",TN="0%{opacity:1;} 100%{opacity:0;}",PN=xr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,AN=xr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RN=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Ow()?[NN,TN]:[CN(n),jN(n)];return{animation:t?`${Pn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Pn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},MN=v.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?RN(e.position||t||"top-center",e.visible):{opacity:0},i=v.createElement(EN,{toast:e}),o=v.createElement(AN,{...e.ariaProps},Wl(e.message,e));return v.createElement(PN,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):v.createElement(v.Fragment,null,i,o))});eN(v.createElement);var $N=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=v.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return v.createElement("div",{ref:i,className:t,style:n},s)},LN=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ow()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},DN=Lc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ma=16,ON=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=dN(n);return v.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ma,left:Ma,right:Ma,bottom:Ma,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||t,d=l.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),h=LN(u,d);return v.createElement($N,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?DN:"",style:h},c.type==="custom"?Wl(c.message,c):s?s(c):v.createElement(MN,{toast:c,position:u}))}))},xn=et;const IN=e=>{const t=/@([a-zA-Z0-9._]{1,30})/g;let n=e.replace(t,(r,s)=>s.startsWith(".")||s.endsWith(".")||s.includes("..")?r:`<a href="https://instagram.com/${s}" target="_blank" rel="noopener noreferrer" style="color:#1d4ed8;text-decoration:underline">@${s}</a>`);return n=n.replace(/(?:\+?549\d{10})/g,r=>`<a href="https://wa.me/${r.startsWith("+")?r.slice(1):r}" target="_blank" rel="noopener noreferrer" style="color:#15803d;text-decoration:underline">${r}</a>`),n},zN=({userId:e})=>{const[t,n]=v.useState(!1),[r,s]=v.useState([]),[i,o]=v.useState(null),[a,l]=v.useState(!1),c=async()=>{if(!e){s([]);return}try{const{data:x,error:w}=await G.from("announcements").select("id, title, message").order("created_at",{ascending:!1});if(w)throw w;const{data:S,error:p}=await G.from("user_announcements").select("announcement_id").eq("user_id",e);if(p)throw p;const y=S?S.map(b=>b.announcement_id):[],g=(x??[]).map(b=>({id:b.id,title:b.title,message:b.message,leido:y.includes(b.id)}));s(g)}catch(x){console.error("Error al cargar anuncios:",x),xn.error("Error al cargar anuncios")}};v.useEffect(()=>{c();const x=setInterval(()=>{c()},18e5);return()=>clearInterval(x)},[e]);const u=async x=>{if(!e){xn.error("Usuario no identificado");return}try{const{error:w}=await G.from("user_announcements").upsert({user_id:e,announcement_id:x},{onConflict:["user_id","announcement_id"]});if(w)throw w;s(S=>S.map(p=>p.id===x?{...p,leido:!0}:p))}catch(w){console.error("Error al marcar anuncio como ledo:",w),xn.error("Error al marcar anuncio como ledo")}},d=r.filter(x=>!x.leido).length,h=()=>{l(!0),setTimeout(()=>{o(null),l(!1)},300)},m=f.jsxs("div",{onClick:()=>n(!1),style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:[f.jsxs("div",{onClick:x=>x.stopPropagation(),style:{backgroundColor:"#f5e8d5",border:"2px solid #800000",borderRadius:"1.25rem",boxShadow:"0 6px 16px rgba(128,0,0,.5)",padding:"1rem",width:"90%",maxWidth:600,maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",fontSize:".9rem",animation:"fadeIn .2s ease"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem",color:"#800000",fontWeight:600,fontSize:"1.2rem"},children:[f.jsx("span",{children:"Anuncios"}),f.jsx("button",{onClick:()=>n(!1),style:{background:"none",border:"none",color:"#800000",cursor:"pointer",fontWeight:600,fontSize:"1.3rem",lineHeight:1},"aria-label":"Cerrar modal de anuncios",children:""})]}),f.jsxs("div",{style:{flexGrow:1,overflowY:"auto"},children:[r.length===0&&f.jsx("p",{style:{color:"#4b2c1a"},children:"No hay anuncios."}),r.map(x=>f.jsxs("div",{style:{backgroundColor:x.leido?"#f5e8d5":"#fff3db",border:x.leido?"2px solid #800000":"1.5px solid #d1a58b",borderRadius:".5rem",padding:".5rem",marginBottom:".5rem",color:"#4b2c1a",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("strong",{children:x.title}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!x.leido&&f.jsx("button",{onClick:()=>u(x.id),style:{fontSize:".75rem",color:"#2f6b36",fontWeight:600,backgroundColor:"#e6f3e6",border:"1px solid #2f6b36",borderRadius:"0.25rem",padding:"0.25rem 0.5rem",cursor:"pointer"},"aria-label":`Marcar anuncio "${x.title}" como ledo`,title:"Marcar como ledo",children:"Ledo "}),f.jsx("button",{onClick:()=>o(x),style:{fontSize:".75rem",color:"#800000",fontWeight:600,backgroundColor:"#f0dede",border:"1px solid #800000",borderRadius:"0.25rem",padding:"0.25rem 0.5rem",cursor:"pointer"},"aria-label":`Abrir anuncio "${x.title}"`,children:"Abrir"})]})]},x.id))]})]}),i&&f.jsx("div",{onClick:h,style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,animation:a?"fadeOut .3s ease forwards":"fadeIn .3s ease forwards"},children:f.jsxs("div",{onClick:x=>x.stopPropagation(),style:{backgroundColor:"#fff3db",border:"2px solid #800000",borderRadius:"1rem",padding:"1rem",width:"90%",maxWidth:500,maxHeight:"70vh",overflowY:"auto",fontSize:"1rem",color:"#4b2c1a",boxShadow:"0 0 15px rgba(128,0,0,0.6)",transform:a?"scale(0.95)":"scale(1)",transition:"transform 0.3s ease"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontWeight:"700",fontSize:"1.3rem",color:"#800000"},children:[f.jsx("span",{children:i.title}),f.jsx("button",{onClick:h,style:{background:"none",border:"none",fontSize:"1.5rem",fontWeight:"700",color:"#800000",cursor:"pointer",lineHeight:1},"aria-label":"Cerrar mensaje del anuncio",children:""})]}),f.jsx("div",{dangerouslySetInnerHTML:{__html:IN(i.message)},style:{lineHeight:"1.5",whiteSpace:"pre-wrap"}})]})}),f.jsx("style",{children:`
        @keyframes fadeIn {
          0% { opacity: 0; transform: scale(.9); }
          100% { opacity: 1; transform: scale(1); }
        }
        @keyframes fadeOut {
          0% { opacity: 1; transform: scale(1); }
          100% { opacity: 0; transform: scale(.9); }
        }
      `})]});return f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>n(!0),className:"noti-button relative p-2 rounded-full shadow-md",title:"Mostrar anuncios","aria-label":"Mostrar anuncios",children:[f.jsx("img",{src:"/anuncio.png",alt:"Anuncios",className:"h-6 w-6"}),d>0&&f.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:d})]}),t&&iw.createPortal(m,document.body)]})},$g=({open:e,onClose:t,type:n})=>{const r=n==="privacidad";return v.useEffect(()=>{const s=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t]),e?f.jsx("div",{onClick:t,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 animate-fade-in",children:f.jsxs("div",{onClick:s=>s.stopPropagation(),className:"bg-[#fef8e6] text-[#1f1f1f] border-2 border-[#7f1d1d] rounded-2xl shadow-2xl w-full max-w-xl max-h-[70vh] overflow-y-auto p-6 animate-slide-up relative",children:[f.jsx("button",{onClick:t,className:"absolute top-3 right-4 text-[#7f1d1d] hover:text-black text-2xl font-bold",children:""}),f.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-[#7f1d1d]",children:r?"POLTICA DE PRIVACIDAD":"TRMINOS Y CONDICIONES DE USO"}),f.jsx("div",{className:"space-y-4 text-[12px] text-left",children:r?f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:[f.jsx("strong",{children:"1. INTRODUCCIN"}),f.jsx("br",{}),"En Folki App nos comprometemos a proteger la privacidad de nuestros usuarios conforme a la Ley 25.326 de Proteccin de los Datos Personales (Argentina). La presente poltica describe cmo recopilamos, utilizamos, almacenamos y protegemos los datos personales que nos son proporcionados."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"2. DATOS RECOPILADOS"}),f.jsx("br",{}),"Al registrarse y utilizar la aplicacin, recopilamos los siguientes datos personales:",f.jsx("br",{})," Nombre completo",f.jsx("br",{})," Correo electrnico",f.jsx("br",{})," Fecha de nacimiento",f.jsx("br",{})," Usuario de Instagram (opcional)",f.jsx("br",{})," Foto de perfil (opcional)"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"3. FINALIDAD DEL TRATAMIENTO"}),f.jsx("br",{}),"Los datos son utilizados para:",f.jsx("br",{})," Identificacin y autenticacin del usuario.",f.jsx("br",{})," Personalizacin de la experiencia dentro de la app.",f.jsx("br",{})," Comunicacin relacionada con el uso de la plataforma.",f.jsx("br",{}),"Base legal: el tratamiento de los datos se basa en el consentimiento del usuario y en la necesidad de brindar los servicios ofrecidos por Folki App."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"4. CONFIDENCIALIDAD Y SEGURIDAD"}),f.jsx("br",{}),"Folki App no vende, alquila ni comparte datos personales con terceros sin consentimiento del usuario.",f.jsx("br",{}),"Los datos son almacenados en servidores seguros provistos por Supabase, que cumple con estndares internacionales de proteccin de datos.",f.jsx("br",{}),"Se implementan medidas de seguridad adecuadas para proteger los datos contra accesos no autorizados, alteraciones o destruccin."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"5. CONSERVACIN DE LOS DATOS"}),f.jsx("br",{}),"Los datos sern almacenados mientras el usuario mantenga su cuenta activa o mientras sean necesarios para el funcionamiento de la app.",f.jsx("br",{}),"Una vez que el usuario solicite la eliminacin de su cuenta, sus datos sern eliminados en un plazo no mayor a 30 das, salvo que exista una obligacin legal de conservarlos."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"6. USO POR MENORES DE EDAD"}),f.jsx("br",{}),"La aplicacin no est dirigida a menores de 13 aos. En caso de detectar una cuenta perteneciente a un menor sin autorizacin parental, ser eliminada."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"7. DERECHOS DEL USUARIO"}),f.jsx("br",{}),"El usuario podr ejercer sus derechos de acceso, rectificacin, eliminacin y oposicin enviando un correo a: ",f.jsx("a",{href:"mailto:eventos.folki@gmail.com",className:"text-blue-600 underline",children:"eventos.folki@gmail.com"})]}),f.jsxs("p",{children:[f.jsx("strong",{children:"8. CAMBIOS EN LA POLTICA"}),f.jsx("br",{}),"Esta poltica podr ser modificada por Folki App, notificando a los usuarios a travs de la propia aplicacin."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"9. CONTACTO"}),f.jsx("br",{}),"Para dudas o reclamos sobre esta poltica, pods escribirnos a: ",f.jsx("a",{href:"mailto:eventos.folki@gmail.com",className:"text-blue-600 underline",children:"eventos.folki@gmail.com"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:[f.jsx("strong",{children:"1. ACEPTACIN DE LOS TRMINOS"}),f.jsx("br",{}),"Al acceder y utilizar Folki App, el usuario acepta de forma plena y sin reservas los presentes Trminos y Condiciones. En caso de no estar de acuerdo con alguno de los puntos aqu establecidos, deber abstenerse de utilizar la aplicacin."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"2. OBJETO"}),f.jsx("br",{}),"Folki App es una plataforma destinada a la difusin de eventos culturales, sociales y artsticos del Folklore Argentino, permitiendo a los usuarios visualizar, compartir y publicar informacin sobre los mismos."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"3. USO DE LA APLICACIN"}),f.jsx("br",{}),"El usuario se compromete a utilizar la aplicacin de forma lcita y responsable, abstenindose de publicar contenido ofensivo, falso, discriminatorio o que viole derechos de terceros.",f.jsx("br",{}),"Folki App se reserva el derecho de moderar, editar o eliminar contenido que considere inapropiado, sin previo aviso."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"4. REGISTRO Y ACCESO"}),f.jsx("br",{}),"El acceso a la plataforma puede realizarse mediante servicios de autenticacin de terceros por correo electrnico, cada dominio est sujeto a sus propios trminos y polticas de privacidad."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"5. EDAD MNIMA"}),f.jsx("br",{}),"El uso de la aplicacin est destinado a personas mayores de 13 aos. Los menores deben contar con autorizacin de sus tutores legales."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"6. SUSPENSIN DE CUENTAS"}),f.jsx("br",{}),"Folki App se reserva el derecho de suspender o eliminar cuentas que violen estos trminos, sin necesidad de previo aviso."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"7. LIMITACIN DE RESPONSABILIDAD"}),f.jsx("br",{}),"Folki App no garantiza la veracidad, exactitud ni disponibilidad de los eventos publicados por los usuarios. La plataforma no se responsabiliza por cancelaciones, modificaciones o cualquier inconveniente que surja en relacin con los eventos.",f.jsx("br",{}),"El uso de la aplicacin es bajo responsabilidad exclusiva del usuario."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"8. PROPIEDAD INTELECTUAL"}),f.jsx("br",{}),"Todos los derechos sobre el diseo, marca, logo, funcionalidades y el cdigo fuente de la aplicacin pertenecen a Folki App.",f.jsx("br",{}),"Los contenidos publicados por los usuarios sern responsabilidad exclusiva de los mismos, quienes garantizan que poseen los derechos necesarios para su publicacin."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"9. MODIFICACIONES"}),f.jsx("br",{}),"Folki App se reserva el derecho de modificar estos trminos en cualquier momento. Las modificaciones entrarn en vigencia desde su publicacin en la aplicacin."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"10. CONTACTO"}),f.jsx("br",{}),"Ante cualquier consulta, sugerencia o reclamo, el usuario podr contactarse a travs del correo electrnico: ",f.jsx("a",{href:"mailto:eventos.folki@gmail.com",className:"text-blue-600 underline",children:"eventos.folki@gmail.com"})]})]})})]})}):null},Gh=v.createContext({});function Yh(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const Xh=typeof window<"u",zw=Xh?v.useLayoutEffect:v.useEffect,Dc=v.createContext(null);function Jh(e,t){e.indexOf(t)===-1&&e.push(t)}function Qh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const An=(e,t,n)=>n>t?t:n<e?e:n;let ql=()=>{};const Rn={},Fw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Vw(e){return typeof e=="object"&&e!==null}const Bw=e=>/^0[^.\s]+$/u.test(e);function Zh(e){let t;return()=>(t===void 0&&(t=e()),t)}const Pt=e=>e,FN=(e,t)=>n=>t(e(n)),ra=(...e)=>e.reduce(FN),$o=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class em{constructor(){this.subscriptions=[]}add(t){return Jh(this.subscriptions,t),()=>Qh(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sn=e=>e*1e3,on=e=>e/1e3;function Uw(e,t){return t?e*(1e3/t):0}const Hw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,VN=1e-7,BN=12;function UN(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Hw(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>VN&&++a<BN);return o}function sa(e,t,n,r){if(e===t&&n===r)return Pt;const s=i=>UN(i,0,1,e,n);return i=>i===0||i===1?i:Hw(s(i),t,r)}const Ww=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qw=e=>t=>1-e(1-t),Kw=sa(.33,1.53,.69,.99),tm=qw(Kw),Gw=Ww(tm),Yw=e=>(e*=2)<1?.5*tm(e):.5*(2-Math.pow(2,-10*(e-1))),nm=e=>1-Math.sin(Math.acos(e)),Xw=qw(nm),Jw=Ww(nm),HN=sa(.42,0,1,1),WN=sa(0,0,.58,1),Qw=sa(.42,0,.58,1),qN=e=>Array.isArray(e)&&typeof e[0]!="number",Zw=e=>Array.isArray(e)&&typeof e[0]=="number",Lg={linear:Pt,easeIn:HN,easeInOut:Qw,easeOut:WN,circIn:nm,circInOut:Jw,circOut:Xw,backIn:tm,backInOut:Gw,backOut:Kw,anticipate:Yw},KN=e=>typeof e=="string",Dg=e=>{if(Zw(e)){ql(e.length===4);const[t,n,r,s]=e;return sa(t,n,r,s)}else if(KN(e))return ql(Lg[e]!==void 0),Lg[e];return e},$a=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Og={value:null,addProjectionMetrics:null};function GN(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){o.has(d)&&(u.schedule(d),e()),l++,d(a)}const u={schedule:(d,h=!1,m=!1)=>{const w=m&&s?n:r;return h&&o.add(d),w.has(d)||w.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),t&&Og.value&&Og.value.frameloop[t].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const YN=40;function e1(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=$a.reduce((g,b)=>(g[b]=GN(i,t?b:void 0),g),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:x}=o,w=()=>{const g=Rn.useManualTiming?s.timestamp:performance.now();n=!1,Rn.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(g-s.timestamp,YN),1)),s.timestamp=g,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),x.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(w))},S=()=>{n=!0,r=!0,s.isProcessing||e(w)};return{schedule:$a.reduce((g,b)=>{const k=o[b];return g[b]=(C,N=!1,T=!1)=>(n||S(),k.schedule(C,N,T)),g},{}),cancel:g=>{for(let b=0;b<$a.length;b++)o[$a[b]].cancel(g)},state:s,steps:o}}const{schedule:Se,cancel:fr,state:Ve,steps:Ru}=e1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0);let cl;function XN(){cl=void 0}const ut={now:()=>(cl===void 0&&ut.set(Ve.isProcessing||Rn.useManualTiming?Ve.timestamp:performance.now()),cl),set:e=>{cl=e,queueMicrotask(XN)}},t1=e=>t=>typeof t=="string"&&t.startsWith(e),rm=t1("--"),JN=t1("var(--"),sm=e=>JN(e)?QN.test(e.split("/*")[0].trim()):!1,QN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Lo={...yi,transform:e=>An(0,1,e)},La={...yi,default:1},uo=e=>Math.round(e*1e5)/1e5,im=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZN(e){return e==null}const eT=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,om=(e,t)=>n=>!!(typeof n=="string"&&eT.test(n)&&n.startsWith(e)||t&&!ZN(n)&&Object.prototype.hasOwnProperty.call(n,t)),n1=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(im);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},tT=e=>An(0,255,e),Mu={...yi,transform:e=>Math.round(tT(e))},Vr={test:om("rgb","red"),parse:n1("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Mu.transform(e)+", "+Mu.transform(t)+", "+Mu.transform(n)+", "+uo(Lo.transform(r))+")"};function nT(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const af={test:om("#"),parse:nT,transform:Vr.transform},ia=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vn=ia("deg"),an=ia("%"),Z=ia("px"),rT=ia("vh"),sT=ia("vw"),Ig={...an,parse:e=>an.parse(e)/100,transform:e=>an.transform(e*100)},Ls={test:om("hsl","hue"),parse:n1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+an.transform(uo(t))+", "+an.transform(uo(n))+", "+uo(Lo.transform(r))+")"},Ae={test:e=>Vr.test(e)||af.test(e)||Ls.test(e),parse:e=>Vr.test(e)?Vr.parse(e):Ls.test(e)?Ls.parse(e):af.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Vr.transform(e):Ls.transform(e),getAnimatableNone:e=>{const t=Ae.parse(e);return t.alpha=0,Ae.transform(t)}},iT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oT(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(im))==null?void 0:t.length)||0)+(((n=e.match(iT))==null?void 0:n.length)||0)>0}const r1="number",s1="color",aT="var",lT="var(",zg="${}",cT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Do(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(cT,l=>(Ae.test(l)?(r.color.push(i),s.push(s1),n.push(Ae.parse(l))):l.startsWith(lT)?(r.var.push(i),s.push(aT),n.push(l)):(r.number.push(i),s.push(r1),n.push(parseFloat(l))),++i,zg)).split(zg);return{values:n,split:a,indexes:r,types:s}}function i1(e){return Do(e).values}function o1(e){const{split:t,types:n}=Do(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===r1?i+=uo(s[o]):a===s1?i+=Ae.transform(s[o]):i+=s[o]}return i}}const uT=e=>typeof e=="number"?0:Ae.test(e)?Ae.getAnimatableNone(e):e;function dT(e){const t=i1(e);return o1(e)(t.map(uT))}const hr={test:oT,parse:i1,createTransformer:o1,getAnimatableNone:dT};function $u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function fT({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=$u(l,a,e+1/3),i=$u(l,a,e),o=$u(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Kl(e,t){return n=>n>0?t:e}const we=(e,t,n)=>e+(t-e)*n,Lu=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},hT=[af,Vr,Ls],mT=e=>hT.find(t=>t.test(e));function Fg(e){const t=mT(e);if(!t)return!1;let n=t.parse(e);return t===Ls&&(n=fT(n)),n}const Vg=(e,t)=>{const n=Fg(e),r=Fg(t);if(!n||!r)return Kl(e,t);const s={...n};return i=>(s.red=Lu(n.red,r.red,i),s.green=Lu(n.green,r.green,i),s.blue=Lu(n.blue,r.blue,i),s.alpha=we(n.alpha,r.alpha,i),Vr.transform(s))},lf=new Set(["none","hidden"]);function pT(e,t){return lf.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function gT(e,t){return n=>we(e,t,n)}function am(e){return typeof e=="number"?gT:typeof e=="string"?sm(e)?Kl:Ae.test(e)?Vg:xT:Array.isArray(e)?a1:typeof e=="object"?Ae.test(e)?Vg:yT:Kl}function a1(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>am(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function yT(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=am(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function vT(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const xT=(e,t)=>{const n=hr.createTransformer(t),r=Do(e),s=Do(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?lf.has(e)&&!s.values.length||lf.has(t)&&!r.values.length?pT(e,t):ra(a1(vT(r,s),s.values),n):Kl(e,t)};function l1(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?we(e,t,n):am(e)(e,t)}const wT=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Se.update(t,n),stop:()=>fr(t),now:()=>Ve.isProcessing?Ve.timestamp:ut.now()}},c1=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gl=2e4;function lm(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Gl;)t+=n,r=e.next(t);return t>=Gl?1/0:t}function bT(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(lm(r),Gl);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:on(s)}}const ST=5;function u1(e,t,n){const r=Math.max(t-ST,0);return Uw(n-e(r),t-r)}const Ce={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Du=.001;function _T({duration:e=Ce.duration,bounce:t=Ce.bounce,velocity:n=Ce.velocity,mass:r=Ce.mass}){let s,i,o=1-t;o=An(Ce.minDamping,Ce.maxDamping,o),e=An(Ce.minDuration,Ce.maxDuration,on(e)),o<1?(s=c=>{const u=c*o,d=u*e,h=u-n,m=cf(c,o),x=Math.exp(-d);return Du-h/m*x},i=c=>{const d=c*o*e,h=d*n+n,m=Math.pow(o,2)*Math.pow(c,2)*e,x=Math.exp(-d),w=cf(Math.pow(c,2),o);return(-s(c)+Du>0?-1:1)*((h-m)*x)/w}):(s=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-Du+u*d},i=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const a=5/e,l=ET(s,i,a);if(e=sn(e),isNaN(l))return{stiffness:Ce.stiffness,damping:Ce.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:e}}}const kT=12;function ET(e,t,n){let r=n;for(let s=1;s<kT;s++)r=r-e(r)/t(r);return r}function cf(e,t){return e*Math.sqrt(1-t*t)}const CT=["duration","bounce"],jT=["stiffness","damping","mass"];function Bg(e,t){return t.some(n=>e[n]!==void 0)}function NT(e){let t={velocity:Ce.velocity,stiffness:Ce.stiffness,damping:Ce.damping,mass:Ce.mass,isResolvedFromDuration:!1,...e};if(!Bg(e,jT)&&Bg(e,CT))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*An(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ce.mass,stiffness:s,damping:i}}else{const n=_T(e);t={...t,...n,mass:Ce.mass},t.isResolvedFromDuration=!0}return t}function Yl(e=Ce.visualDuration,t=Ce.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=NT({...n,velocity:-on(n.velocity||0)}),x=h||0,w=c/(2*Math.sqrt(l*u)),S=o-i,p=on(Math.sqrt(l/u)),y=Math.abs(S)<5;r||(r=y?Ce.restSpeed.granular:Ce.restSpeed.default),s||(s=y?Ce.restDelta.granular:Ce.restDelta.default);let g;if(w<1){const k=cf(p,w);g=C=>{const N=Math.exp(-w*p*C);return o-N*((x+w*p*S)/k*Math.sin(k*C)+S*Math.cos(k*C))}}else if(w===1)g=k=>o-Math.exp(-p*k)*(S+(x+p*S)*k);else{const k=p*Math.sqrt(w*w-1);g=C=>{const N=Math.exp(-w*p*C),T=Math.min(k*C,300);return o-N*((x+w*p*S)*Math.sinh(T)+k*S*Math.cosh(T))/k}}const b={calculatedDuration:m&&d||null,next:k=>{const C=g(k);if(m)a.done=k>=d;else{let N=k===0?x:0;w<1&&(N=k===0?sn(x):u1(g,k,C));const T=Math.abs(N)<=r,A=Math.abs(o-C)<=s;a.done=T&&A}return a.value=a.done?o:C,a},toString:()=>{const k=Math.min(lm(b),Gl),C=c1(N=>b.next(k*N).value,k,30);return k+"ms "+C},toTransition:()=>{}};return b}Yl.applyToOptions=e=>{const t=bT(e,100,Yl);return e.ease=t.ease,e.duration=sn(t.duration),e.type="keyframes",e};function uf({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},m=T=>a!==void 0&&T<a||l!==void 0&&T>l,x=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let w=n*t;const S=d+w,p=o===void 0?S:o(S);p!==S&&(w=p-d);const y=T=>-w*Math.exp(-T/r),g=T=>p+y(T),b=T=>{const A=y(T),P=g(T);h.done=Math.abs(A)<=c,h.value=h.done?p:P};let k,C;const N=T=>{m(h.value)&&(k=T,C=Yl({keyframes:[h.value,x(h.value)],velocity:u1(g,T,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:T=>{let A=!1;return!C&&k===void 0&&(A=!0,b(T),N(T)),k!==void 0&&T>=k?C.next(T-k):(!A&&b(T),h)}}}function TT(e,t,n){const r=[],s=n||Rn.mix||l1,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Pt:t;a=ra(l,a)}r.push(a)}return r}function PT(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(ql(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=TT(t,r,s),l=a.length,c=u=>{if(o&&u<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=$o(e[d],e[d+1],u);return a[d](h)};return n?u=>c(An(e[0],e[i-1],u)):c}function AT(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=$o(0,t,r);e.push(we(n,1,s))}}function RT(e){const t=[0];return AT(t,e.length-1),t}function MT(e,t){return e.map(n=>n*t)}function $T(e,t){return e.map(()=>t||Qw).splice(0,e.length-1)}function fo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=qN(r)?r.map(Dg):Dg(r),i={done:!1,value:t[0]},o=MT(n&&n.length===t.length?n:RT(t),e),a=PT(o,t,{ease:Array.isArray(s)?s:$T(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const LT=e=>e!==null;function cm(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(LT),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const DT={decay:uf,inertia:uf,tween:fo,keyframes:fo,spring:Yl};function d1(e){typeof e.type=="string"&&(e.type=DT[e.type])}class um{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const OT=e=>e/100;class dm extends um{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==ut.now()&&this.tick(ut.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;d1(t);const{type:n=fo,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||fo;l!==fo&&typeof a[0]!="number"&&(this.mixKeyframes=ra(OT,l1(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=lm(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:x,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const p=this.currentTime-c*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?p<0:p>s;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let g=this.currentTime,b=r;if(d){const T=Math.min(this.currentTime,s)/a;let A=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&A--,A=Math.min(A,d+1),!!(A%2)&&(h==="reverse"?(P=1-P,m&&(P-=m/a)):h==="mirror"&&(b=o)),g=An(0,1,P)*a}const k=y?{done:!1,value:u[0]}:b.next(g);i&&(k.value=i(k.value));let{done:C}=k;!y&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return N&&x!==uf&&(k.value=cm(u,this.options,S,this.speed)),w&&w(k.value),N&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return on(this.calculatedDuration)}get time(){return on(this.currentTime)}set time(t){var n;t=sn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ut.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=on(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=wT,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ut.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function IT(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Br=e=>e*180/Math.PI,df=e=>{const t=Br(Math.atan2(e[1],e[0]));return ff(t)},zT={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:df,rotateZ:df,skewX:e=>Br(Math.atan(e[1])),skewY:e=>Br(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ff=e=>(e=e%360,e<0&&(e+=360),e),Ug=df,Hg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Wg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),FT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Hg,scaleY:Wg,scale:e=>(Hg(e)+Wg(e))/2,rotateX:e=>ff(Br(Math.atan2(e[6],e[5]))),rotateY:e=>ff(Br(Math.atan2(-e[2],e[0]))),rotateZ:Ug,rotate:Ug,skewX:e=>Br(Math.atan(e[4])),skewY:e=>Br(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function hf(e){return e.includes("scale")?1:0}function mf(e,t){if(!e||e==="none")return hf(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=FT,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=zT,s=a}if(!s)return hf(t);const i=r[t],o=s[1].split(",").map(BT);return typeof i=="function"?i(o):o[i]}const VT=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return mf(n,t)};function BT(e){return parseFloat(e.trim())}const vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xi=new Set(vi),qg=e=>e===yi||e===Z,UT=new Set(["x","y","z"]),HT=vi.filter(e=>!UT.has(e));function WT(e){const t=[];return HT.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Kr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>mf(t,"x"),y:(e,{transform:t})=>mf(t,"y")};Kr.translateX=Kr.x;Kr.translateY=Kr.y;const Gr=new Set;let pf=!1,gf=!1,yf=!1;function f1(){if(gf){const e=Array.from(Gr).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=WT(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gf=!1,pf=!1,Gr.forEach(e=>e.complete(yf)),Gr.clear()}function h1(){Gr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(gf=!0)})}function qT(){yf=!0,h1(),f1(),yf=!1}class fm{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Gr.add(this),pf||(pf=!0,Se.read(h1),Se.resolveKeyframes(f1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}IT(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Gr.delete(this)}cancel(){this.state==="scheduled"&&(Gr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KT=e=>e.startsWith("--");function GT(e,t,n){KT(t)?e.style.setProperty(t,n):e.style[t]=n}const YT=Zh(()=>window.ScrollTimeline!==void 0),XT={};function JT(e,t){const n=Zh(e);return()=>XT[t]??n()}const m1=JT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qi=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qi([0,.65,.55,1]),circOut:qi([.55,0,1,.45]),backIn:qi([.31,.01,.66,-.59]),backOut:qi([.33,1.53,.69,.99])};function p1(e,t){if(e)return typeof e=="function"?m1()?c1(e,t):"ease-out":Zw(e)?qi(e):Array.isArray(e)?e.map(n=>p1(n,t)||Kg.easeOut):Kg[e]}function QT(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=p1(a,s);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),e.animate(u,h)}function g1(e){return typeof e=="function"&&"applyToOptions"in e}function ZT({type:e,...t}){return g1(e)&&m1()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class eP extends um{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,ql(typeof t.type!="string");const c=ZT(t);this.animation=QT(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=cm(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):GT(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return on(Number(t))}get time(){return on(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=sn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&YT()?(this.animation.timeline=t,Pt):n(this)}}const y1={anticipate:Yw,backInOut:Gw,circInOut:Jw};function tP(e){return e in y1}function nP(e){typeof e.ease=="string"&&tP(e.ease)&&(e.ease=y1[e.ease])}const Gg=10;class rP extends eP{constructor(t){nP(t),d1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new dm({...o,autoplay:!1}),l=sn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Gg).value,a.sample(l).value,Gg),a.stop()}}const Yg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(hr.test(e)||e==="0")&&!e.startsWith("url("));function sP(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function iP(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Yg(s,t),a=Yg(i,t);return!o||!a?!1:sP(e)||(n==="spring"||g1(n))&&r}function hm(e){return Vw(e)&&"offsetHeight"in e}const oP=new Set(["opacity","clipPath","filter","transform"]),aP=Zh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lP(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!hm((c=t==null?void 0:t.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return aP()&&n&&oP.has(n)&&(n!=="transform"||!l)&&!a&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const cP=40;class uP extends um{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...d}){var x;super(),this.stop=()=>{var w,S;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=ut.now();const h={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||fm;this.keyframeResolver=new m(a,(w,S,p)=>this.onKeyframesResolved(w,S,h,!p),l,c,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=ut.now(),iP(t,i,o,a)||((Rn.instantAnimations||!l)&&(u==null||u(cm(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>cP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&lP(h)?new rP({...h,element:h.motionValue.owner.current}):new dm(h);m.finished.then(()=>this.notifyFinished()).catch(Pt),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),qT()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const dP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fP(e){const t=dP.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function v1(e,t,n=1){const[r,s]=fP(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Fw(o)?parseFloat(o):o}return sm(s)?v1(s,t,n+1):s}function mm(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const x1=new Set(["width","height","top","left","right","bottom",...vi]),hP={test:e=>e==="auto",parse:e=>e},w1=e=>t=>t.test(e),b1=[yi,Z,an,Vn,sT,rT,hP],Xg=e=>b1.find(w1(e));function mP(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Bw(e):!0}const pP=new Set(["brightness","contrast","saturate","opacity"]);function gP(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(im)||[];if(!r)return e;const s=n.replace(r,"");let i=pP.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const yP=/\b([a-z-]*)\(.*?\)/gu,vf={...hr,getAnimatableNone:e=>{const t=e.match(yP);return t?t.map(gP).join(" "):e}},Jg={...yi,transform:Math.round},vP={rotate:Vn,rotateX:Vn,rotateY:Vn,rotateZ:Vn,scale:La,scaleX:La,scaleY:La,scaleZ:La,skew:Vn,skewX:Vn,skewY:Vn,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:Lo,originX:Ig,originY:Ig,originZ:Z},pm={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z,...vP,zIndex:Jg,fillOpacity:Lo,strokeOpacity:Lo,numOctaves:Jg},xP={...pm,color:Ae,backgroundColor:Ae,outlineColor:Ae,fill:Ae,stroke:Ae,borderColor:Ae,borderTopColor:Ae,borderRightColor:Ae,borderBottomColor:Ae,borderLeftColor:Ae,filter:vf,WebkitFilter:vf},S1=e=>xP[e];function _1(e,t){let n=S1(e);return n!==vf&&(n=hr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wP=new Set(["auto","none","0"]);function bP(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!wP.has(i)&&Do(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=_1(n,s)}class SP extends fm{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),sm(c))){const u=v1(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!x1.has(r)||t.length!==2)return;const[s,i]=t,o=Xg(s),a=Xg(i);if(o!==a)if(qg(o)&&qg(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Kr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||mP(t[s]))&&r.push(s);r.length&&bP(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kr[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Kr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function _P(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const k1=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Qg=30,kP=e=>!isNaN(parseFloat(e));class EP{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var o,a;const i=ut.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ut.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new em);const r=this.events[t].add(n);return t==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ut.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Qg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qg);return Uw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oi(e,t){return new EP(e,t)}const{schedule:gm,cancel:WI}=e1(queueMicrotask,!1),Ot={x:!1,y:!1};function E1(){return Ot.x||Ot.y}function CP(e){return e==="x"||e==="y"?Ot[e]?null:(Ot[e]=!0,()=>{Ot[e]=!1}):Ot.x||Ot.y?null:(Ot.x=Ot.y=!0,()=>{Ot.x=Ot.y=!1})}function C1(e,t){const n=_P(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Zg(e){return!(e.pointerType==="touch"||E1())}function jP(e,t,n={}){const[r,s,i]=C1(e,n),o=a=>{if(!Zg(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=d=>{Zg(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const j1=(e,t)=>t?e===t?!0:j1(e,t.parentElement):!1,ym=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,NP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function TP(e){return NP.has(e.tagName)||e.tabIndex!==-1}const ul=new WeakSet;function e0(e){return t=>{t.key==="Enter"&&e(t)}}function Ou(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const PP=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=e0(()=>{if(ul.has(n))return;Ou(n,"down");const s=e0(()=>{Ou(n,"up")}),i=()=>Ou(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function t0(e){return ym(e)&&!E1()}function AP(e,t,n={}){const[r,s,i]=C1(e,n),o=a=>{const l=a.currentTarget;if(!t0(a))return;ul.add(l);const c=t(l,a),u=(m,x)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),ul.has(l)&&ul.delete(l),t0(m)&&typeof c=="function"&&c(m,{success:x})},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||j1(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),hm(a)&&(a.addEventListener("focus",c=>PP(c,s)),!TP(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function N1(e){return Vw(e)&&"ownerSVGElement"in e}function RP(e){return N1(e)&&e.tagName==="svg"}const Xe=e=>!!(e&&e.getVelocity),MP=[...b1,Ae,hr],$P=e=>MP.find(w1(e)),vm=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class LP extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=hm(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function DP({children:e,isPresent:t,anchorX:n}){const r=v.useId(),s=v.useRef(null),i=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=v.useContext(vm);return v.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:d}=i.current;if(t||!s.current||!a||!l)return;const h=n==="left"?`left: ${u}`:`right: ${d}`;s.current.dataset.motionPopId=r;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(m)&&document.head.removeChild(m)}},[t]),f.jsx(LP,{isPresent:t,childRef:s,sizeRef:i,children:v.cloneElement(e,{ref:s})})}const OP=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const l=Yh(IP),c=v.useId();let u=!0,d=v.useMemo(()=>(u=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{l.set(h,!0);for(const m of l.values())if(!m)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return i&&u&&(d={...d}),v.useMemo(()=>{l.forEach((h,m)=>l.set(m,!1))},[n]),v.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=f.jsx(DP,{isPresent:n,anchorX:a,children:e})),f.jsx(Dc.Provider,{value:d,children:e})};function IP(){return new Map}function T1(e=!0){const t=v.useContext(Dc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=v.useId();v.useEffect(()=>{if(e)return s(i)},[e]);const o=v.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Da=e=>e.key||"";function n0(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const ts=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=T1(o),u=v.useMemo(()=>n0(e),[e]),d=o&&!l?[]:u.map(Da),h=v.useRef(!0),m=v.useRef(u),x=Yh(()=>new Map),[w,S]=v.useState(u),[p,y]=v.useState(u);zw(()=>{h.current=!1,m.current=u;for(let k=0;k<p.length;k++){const C=Da(p[k]);d.includes(C)?x.delete(C):x.get(C)!==!0&&x.set(C,!1)}},[p,d.length,d.join("-")]);const g=[];if(u!==w){let k=[...u];for(let C=0;C<p.length;C++){const N=p[C],T=Da(N);d.includes(T)||(k.splice(C,0,N),g.push(N))}return i==="wait"&&g.length&&(k=g),y(n0(k)),S(u),null}const{forceRender:b}=v.useContext(Gh);return f.jsx(f.Fragment,{children:p.map(k=>{const C=Da(k),N=o&&!l?!1:u===p||d.includes(C),T=()=>{if(x.has(C))x.set(C,!0);else return;let A=!0;x.forEach(P=>{P||(A=!1)}),A&&(b==null||b(),y(m.current),o&&(c==null||c()),r&&r())};return f.jsx(OP,{isPresent:N,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,onExitComplete:N?void 0:T,anchorX:a,children:k},C)})})},P1=v.createContext({strict:!1}),r0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ai={};for(const e in r0)ai[e]={isEnabled:t=>r0[e].some(n=>!!t[n])};function zP(e){for(const t in e)ai[t]={...ai[t],...e[t]}}const FP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||FP.has(e)}let A1=e=>!Xl(e);function VP(e){typeof e=="function"&&(A1=t=>t.startsWith("on")?!Xl(t):e(t))}try{VP(require("@emotion/is-prop-valid").default)}catch{}function BP(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(A1(s)||n===!0&&Xl(s)||!t&&!Xl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function UP(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const Oc=v.createContext({});function Ic(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Oo(e){return typeof e=="string"||Array.isArray(e)}const xm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wm=["initial",...xm];function zc(e){return Ic(e.animate)||wm.some(t=>Oo(e[t]))}function R1(e){return!!(zc(e)||e.variants)}function HP(e,t){if(zc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Oo(n)?n:void 0,animate:Oo(r)?r:void 0}}return e.inherit!==!1?t:{}}function WP(e){const{initial:t,animate:n}=HP(e,v.useContext(Oc));return v.useMemo(()=>({initial:t,animate:n}),[s0(t),s0(n)])}function s0(e){return Array.isArray(e)?e.join(" "):e}const qP=Symbol.for("motionComponentSymbol");function Ds(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KP(e,t,n){return v.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ds(n)&&(n.current=r))},[t])}const bm=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GP="framerAppearId",M1="data-"+bm(GP),$1=v.createContext({});function YP(e,t,n,r,s){var w,S;const{visualElement:i}=v.useContext(Oc),o=v.useContext(P1),a=v.useContext(Dc),l=v.useContext(vm).reducedMotion,c=v.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=v.useContext($1);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&XP(c.current,n,s,d);const h=v.useRef(!1);v.useInsertionEffect(()=>{u&&h.current&&u.update(n,a)});const m=n[M1],x=v.useRef(!!m&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,m))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,m)));return zw(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),gm.render(u.render),x.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,m)}),x.current=!1))}),u}function XP(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:L1(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ds(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function L1(e){if(e)return e.options.allowProjection!==!1?e.projection:L1(e.parent)}function JP({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&zP(e);function i(a,l){let c;const u={...v.useContext(vm),...a,layoutId:QP(a)},{isStatic:d}=u,h=WP(a),m=r(a,d);if(!d&&Xh){ZP();const x=eA(u);c=x.MeasureLayout,h.visualElement=YP(s,m,u,t,x.ProjectionNode)}return f.jsxs(Oc.Provider,{value:h,children:[c&&h.visualElement?f.jsx(c,{visualElement:h.visualElement,...u}):null,n(s,a,KP(m,h.visualElement,l),m,d,h.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=v.forwardRef(i);return o[qP]=s,o}function QP({layoutId:e}){const t=v.useContext(Gh).id;return t&&e!==void 0?t+"-"+e:e}function ZP(e,t){v.useContext(P1).strict}function eA(e){const{drag:t,layout:n}=ai;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Io={};function tA(e){for(const t in e)Io[t]=e[t],rm(t)&&(Io[t].isCSSVariable=!0)}function D1(e,{layout:t,layoutId:n}){return xi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Io[e]||e==="opacity")}const nA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rA=vi.length;function sA(e,t,n){let r="",s=!0;for(let i=0;i<rA;i++){const o=vi[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=k1(a,pm[o]);if(!l){s=!1;const u=nA[o]||o;r+=`${u}(${c}) `}n&&(t[o]=c)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Sm(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(xi.has(l)){o=!0;continue}else if(rm(l)){s[l]=c;continue}else{const u=k1(c,pm[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(t.transform||(o||n?r.transform=sA(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const _m=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O1(e,t,n){for(const r in t)!Xe(t[r])&&!D1(r,n)&&(e[r]=t[r])}function iA({transformTemplate:e},t){return v.useMemo(()=>{const n=_m();return Sm(n,t,e),Object.assign({},n.vars,n.style)},[t])}function oA(e,t){const n=e.style||{},r={};return O1(r,n,e),Object.assign(r,iA(e,t)),r}function aA(e,t){const n={},r=oA(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const lA={offset:"stroke-dashoffset",array:"stroke-dasharray"},cA={offset:"strokeDashoffset",array:"strokeDasharray"};function uA(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?lA:cA;e[i.offset]=Z.transform(-r);const o=Z.transform(t),a=Z.transform(n);e[i.array]=`${o} ${a}`}function I1(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(Sm(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),s!==void 0&&uA(d,s,i,o,!1)}const z1=()=>({..._m(),attrs:{}}),F1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function dA(e,t,n,r){const s=v.useMemo(()=>{const i=z1();return I1(i,t,F1(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};O1(i,e.style,e),s.style={...i,...s.style}}return s}const fA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function km(e){return typeof e!="string"||e.includes("-")?!1:!!(fA.indexOf(e)>-1||/[A-Z]/u.test(e))}function hA(e=!1){return(n,r,s,{latestValues:i},o)=>{const l=(km(n)?dA:aA)(r,i,o,n),c=BP(r,typeof n=="string",e),u=n!==v.Fragment?{...c,...l,ref:s}:{},{children:d}=r,h=v.useMemo(()=>Xe(d)?d.get():d,[d]);return v.createElement(n,{...u,children:h})}}function i0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Em(e,t,n,r){if(typeof t=="function"){const[s,i]=i0(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=i0(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function dl(e){return Xe(e)?e.get():e}function mA({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:pA(n,r,s,e),renderState:t()}}const V1=e=>(t,n)=>{const r=v.useContext(Oc),s=v.useContext(Dc),i=()=>mA(e,t,r,s);return n?i():Yh(i)};function pA(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=dl(i[h]);let{initial:o,animate:a}=e;const l=zc(e),c=R1(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Ic(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const x=Em(e,h[m]);if(x){const{transitionEnd:w,transition:S,...p}=x;for(const y in p){let g=p[y];if(Array.isArray(g)){const b=u?g.length-1:0;g=g[b]}g!==null&&(s[y]=g)}for(const y in w)s[y]=w[y]}}}return s}function Cm(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(Xe(r[o])||t.style&&Xe(t.style[o])||D1(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const gA={useVisualState:V1({scrapeMotionValuesFromProps:Cm,createRenderState:_m})};function B1(e,t,n){const r=Cm(e,t,n);for(const s in e)if(Xe(e[s])||Xe(t[s])){const i=vi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const yA={useVisualState:V1({scrapeMotionValuesFromProps:B1,createRenderState:z1})};function vA(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...km(r)?yA:gA,preloadedFeatures:e,useRender:hA(s),createVisualElement:t,Component:r};return JP(o)}}function zo(e,t,n){const r=e.getProps();return Em(r,t,n!==void 0?n:r.custom,e)}const xf=e=>Array.isArray(e);function xA(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,oi(n))}function wA(e){return xf(e)?e[e.length-1]||0:e}function bA(e,t){const n=zo(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=wA(i[o]);xA(e,o,a)}}function SA(e){return!!(Xe(e)&&e.add)}function wf(e,t){const n=e.getValue("willChange");if(SA(n))return n.add(t);if(!n&&Rn.WillChange){const r=new Rn.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function U1(e){return e.props[M1]}const _A=e=>e!==null;function kA(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(_A),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const EA={type:"spring",stiffness:500,damping:25,restSpeed:10},CA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),jA={type:"keyframes",duration:.8},NA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TA=(e,{keyframes:t})=>t.length>2?jA:xi.has(e)?e.startsWith("scale")?CA(t[1]):EA:NA;function PA({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const jm=(e,t,n,r={},s,i)=>o=>{const a=mm(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-sn(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};PA(a)||Object.assign(u,TA(e,u)),u.duration&&(u.duration=sn(u.duration)),u.repeatDelay&&(u.repeatDelay=sn(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),(Rn.instantAnimations||Rn.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!i&&t.get()!==void 0){const h=kA(u.keyframes,a);if(h!==void 0){Se.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new dm(u):new uP(u)};function AA({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function H1(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const d=e.getValue(u,e.latestValues[u]??null),h=a[u];if(h===void 0||c&&AA(c,u))continue;const m={delay:n,...mm(i||{},u)},x=d.get();if(x!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===x&&!m.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const p=U1(e);if(p){const y=window.MotionHandoffAnimation(p,u,Se);y!==null&&(m.startTime=y,w=!0)}}wf(e,u),d.start(jm(u,d,h,e.shouldReduceMotion&&x1.has(u)?{type:!1}:m,e,w));const S=d.animation;S&&l.push(S)}return o&&Promise.all(l).then(()=>{Se.update(()=>{o&&bA(e,o)})}),l}function bf(e,t,n={}){var l;const r=zo(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(H1(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return RA(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function RA(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(MA).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(bf(c,t,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function MA(e,t){return e.sortNodePosition(t)}function $A(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>bf(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=bf(e,t,n);else{const s=typeof t=="function"?zo(e,t,n.custom):t;r=Promise.all(H1(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function W1(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const LA=wm.length;function q1(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?q1(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<LA;n++){const r=wm[n],s=e.props[r];(Oo(s)||s===!1)&&(t[r]=s)}return t}const DA=[...xm].reverse(),OA=xm.length;function IA(e){return t=>Promise.all(t.map(({animation:n,options:r})=>$A(e,n,r)))}function zA(e){let t=IA(e),n=o0(),r=!0;const s=l=>(c,u)=>{var h;const d=zo(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:x,...w}=d;c={...c,...w,...x}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=q1(e.parent)||{},d=[],h=new Set;let m={},x=1/0;for(let S=0;S<OA;S++){const p=DA[S],y=n[p],g=c[p]!==void 0?c[p]:u[p],b=Oo(g),k=p===l?y.isActive:null;k===!1&&(x=S);let C=g===u[p]&&g!==c[p]&&b;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...m},!y.isActive&&k===null||!g&&!y.prevProp||Ic(g)||typeof g=="boolean")continue;const N=FA(y.prevProp,g);let T=N||p===l&&y.isActive&&!C&&b||S>x&&b,A=!1;const P=Array.isArray(g)?g:[g];let R=P.reduce(s(p),{});k===!1&&(R={});const{prevResolvedValues:z={}}=y,V={...z,...R},E=O=>{T=!0,h.has(O)&&(A=!0,h.delete(O)),y.needsAnimating[O]=!0;const _=e.getValue(O);_&&(_.liveStyle=!1)};for(const O in V){const _=R[O],j=z[O];if(m.hasOwnProperty(O))continue;let $=!1;xf(_)&&xf(j)?$=!W1(_,j):$=_!==j,$?_!=null?E(O):h.add(O):_!==void 0&&h.has(O)?E(O):y.protectedKeys[O]=!0}y.prevProp=g,y.prevResolvedValues=R,y.isActive&&(m={...m,...R}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(C&&N)||A)&&d.push(...P.map(O=>({animation:O,options:{type:p}})))}if(h.size){const S={};if(typeof c.initial!="boolean"){const p=zo(e,Array.isArray(c.initial)?c.initial[0]:c.initial);p&&p.transition&&(S.transition=p.transition)}h.forEach(p=>{const y=e.getBaseTarget(p),g=e.getValue(p);g&&(g.liveStyle=!0),S[p]=y??null}),d.push({animation:S})}let w=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=o0(),r=!0}}}function FA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!W1(t,e):!1}function Pr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o0(){return{animate:Pr(!0),whileInView:Pr(),whileHover:Pr(),whileTap:Pr(),whileDrag:Pr(),whileFocus:Pr(),exit:Pr()}}class wr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class VA extends wr{constructor(t){super(t),t.animationState||(t.animationState=zA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ic(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let BA=0;class UA extends wr{constructor(){super(...arguments),this.id=BA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const HA={animation:{Feature:VA},exit:{Feature:UA}};function Fo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function oa(e){return{point:{x:e.pageX,y:e.pageY}}}const WA=e=>t=>ym(t)&&e(t,oa(t));function ho(e,t,n,r){return Fo(e,t,WA(n),r)}function K1({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function qA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KA(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const G1=1e-4,GA=1-G1,YA=1+G1,Y1=.01,XA=0-Y1,JA=0+Y1;function tt(e){return e.max-e.min}function QA(e,t,n){return Math.abs(e-t)<=n}function a0(e,t,n,r=.5){e.origin=r,e.originPoint=we(t.min,t.max,e.origin),e.scale=tt(n)/tt(t),e.translate=we(n.min,n.max,e.origin)-e.originPoint,(e.scale>=GA&&e.scale<=YA||isNaN(e.scale))&&(e.scale=1),(e.translate>=XA&&e.translate<=JA||isNaN(e.translate))&&(e.translate=0)}function mo(e,t,n,r){a0(e.x,t.x,n.x,r?r.originX:void 0),a0(e.y,t.y,n.y,r?r.originY:void 0)}function l0(e,t,n){e.min=n.min+t.min,e.max=e.min+tt(t)}function ZA(e,t,n){l0(e.x,t.x,n.x),l0(e.y,t.y,n.y)}function c0(e,t,n){e.min=t.min-n.min,e.max=e.min+tt(t)}function po(e,t,n){c0(e.x,t.x,n.x),c0(e.y,t.y,n.y)}const u0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Os=()=>({x:u0(),y:u0()}),d0=()=>({min:0,max:0}),Te=()=>({x:d0(),y:d0()});function kt(e){return[e("x"),e("y")]}function Iu(e){return e===void 0||e===1}function Sf({scale:e,scaleX:t,scaleY:n}){return!Iu(e)||!Iu(t)||!Iu(n)}function $r(e){return Sf(e)||X1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function X1(e){return f0(e.x)||f0(e.y)}function f0(e){return e&&e!=="0%"}function Jl(e,t,n){const r=e-n,s=t*r;return n+s}function h0(e,t,n,r,s){return s!==void 0&&(e=Jl(e,s,r)),Jl(e,n,r)+t}function _f(e,t=0,n=1,r,s){e.min=h0(e.min,t,n,r,s),e.max=h0(e.max,t,n,r,s)}function J1(e,{x:t,y:n}){_f(e.x,t.translate,t.scale,t.originPoint),_f(e.y,n.translate,n.scale,n.originPoint)}const m0=.999999999999,p0=1.0000000000001;function eR(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zs(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,J1(e,o)),r&&$r(i.latestValues)&&zs(e,i.latestValues))}t.x<p0&&t.x>m0&&(t.x=1),t.y<p0&&t.y>m0&&(t.y=1)}function Is(e,t){e.min=e.min+t,e.max=e.max+t}function g0(e,t,n,r,s=.5){const i=we(e.min,e.max,s);_f(e,t,n,i,r)}function zs(e,t){g0(e.x,t.x,t.scaleX,t.scale,t.originX),g0(e.y,t.y,t.scaleY,t.scale,t.originY)}function Q1(e,t){return K1(KA(e.getBoundingClientRect(),t))}function tR(e,t,n){const r=Q1(e,n),{scroll:s}=t;return s&&(Is(r.x,s.offset.x),Is(r.y,s.offset.y)),r}const Z1=({current:e})=>e?e.ownerDocument.defaultView:null,y0=(e,t)=>Math.abs(e-t);function nR(e,t){const n=y0(e.x,t.x),r=y0(e.y,t.y);return Math.sqrt(n**2+r**2)}class eb{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Fu(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=nR(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:x}=d,{timestamp:w}=Ve;this.history.push({...x,timestamp:w});const{onStart:S,onMove:p}=this.handlers;h||(S&&S(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=zu(h,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Fu(d.type==="pointercancel"?this.lastMoveEventInfo:zu(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,S),x&&x(d,S)},!ym(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=oa(t),a=zu(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ve;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,Fu(a,this.history)),this.removeListeners=ra(ho(this.contextWindow,"pointermove",this.handlePointerMove),ho(this.contextWindow,"pointerup",this.handlePointerUp),ho(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function zu(e,t){return t?{point:t(e.point)}:e}function v0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fu({point:e},t){return{point:e,delta:v0(e,tb(t)),offset:v0(e,rR(t)),velocity:sR(t,.1)}}function rR(e){return e[0]}function tb(e){return e[e.length-1]}function sR(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=tb(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>sn(t)));)n--;if(!r)return{x:0,y:0};const i=on(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function iR(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?we(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?we(n,e,r.max):Math.min(e,n)),e}function x0(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function oR(e,{top:t,left:n,bottom:r,right:s}){return{x:x0(e.x,n,s),y:x0(e.y,t,r)}}function w0(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function aR(e,t){return{x:w0(e.x,t.x),y:w0(e.y,t.y)}}function lR(e,t){let n=.5;const r=tt(e),s=tt(t);return s>r?n=$o(t.min,t.max-r,e.min):r>s&&(n=$o(e.min,e.max-s,t.min)),An(0,1,n)}function cR(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const kf=.35;function uR(e=kf){return e===!1?e=0:e===!0&&(e=kf),{x:b0(e,"left","right"),y:b0(e,"top","bottom")}}function b0(e,t,n){return{min:S0(e,t),max:S0(e,n)}}function S0(e,t){return typeof e=="number"?e:e[t]||0}const dR=new WeakMap;class fR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Te(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(oa(u).point)},i=(u,d)=>{const{drag:h,dragPropagation:m,onDragStart:x}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CP(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kt(S=>{let p=this.getAxisMotionValue(S).get()||0;if(an.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const g=y.layout.layoutBox[S];g&&(p=tt(g)*(parseFloat(p)/100))}}this.originPoint[S]=p}),x&&Se.postRender(()=>x(u,d)),wf(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:x,onDrag:w}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:S}=d;if(m&&this.currentDirection===null){this.currentDirection=hR(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,S),this.updateAxis("y",d.point,S),this.visualElement.render(),w&&w(u,d)},a=(u,d)=>this.stop(u,d),l=()=>kt(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new eb(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Z1(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Se.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Oa(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=iR(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Ds(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=oR(r.layoutBox,t):this.constraints=!1,this.elastic=uR(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cR(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ds(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=tR(r,s.root,this.visualElement.getTransformPagePoint());let o=aR(s.layout.layoutBox,i);if(n){const a=n(qA(o));this.hasMutatedConstraints=!!a,a&&(o=K1(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=kt(u=>{if(!Oa(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,m=s?40:1e7,x={type:"inertia",velocity:r?t[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return wf(this.visualElement,t),r.start(jm(t,r,0,n,this.visualElement,!1))}stopAnimation(){kt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){kt(n=>{const{drag:r}=this.getProps();if(!Oa(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-we(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ds(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};kt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=lR({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kt(o=>{if(!Oa(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(we(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;dR.set(this.visualElement,this);const t=this.visualElement.current,n=ho(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ds(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Se.read(r);const o=Fo(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(kt(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=kf,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Oa(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hR(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mR extends wr{constructor(t){super(t),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new fR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const _0=e=>(t,n)=>{e&&Se.postRender(()=>e(t,n))};class pR extends wr{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(t){this.session=new eb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:_0(t),onStart:_0(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Se.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ho(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function k0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $i={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Z.test(e))e=parseFloat(e);else return e;const n=k0(e,t.target.x),r=k0(e,t.target.y);return`${n}% ${r}%`}},gR={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=hr.parse(e);if(s.length>5)return r;const i=hr.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=we(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class yR extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;tA(vR),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),fl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nb(e){const[t,n]=T1(),r=v.useContext(Gh);return f.jsx(yR,{...e,layoutGroup:r,switchLayoutGroup:v.useContext($1),isPresent:t,safeToRemove:n})}const vR={borderRadius:{...$i,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$i,borderTopRightRadius:$i,borderBottomLeftRadius:$i,borderBottomRightRadius:$i,boxShadow:gR};function xR(e,t,n){const r=Xe(e)?e:oi(e);return r.start(jm("",r,t,n)),r.animation}const wR=(e,t)=>e.depth-t.depth;class bR{constructor(){this.children=[],this.isDirty=!1}add(t){Jh(this.children,t),this.isDirty=!0}remove(t){Qh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wR),this.isDirty=!1,this.children.forEach(t)}}function SR(e,t){const n=ut.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(fr(r),e(i-t))};return Se.setup(r,!0),()=>fr(r)}const rb=["TopLeft","TopRight","BottomLeft","BottomRight"],_R=rb.length,E0=e=>typeof e=="string"?parseFloat(e):e,C0=e=>typeof e=="number"||Z.test(e);function kR(e,t,n,r,s,i){s?(e.opacity=we(0,n.opacity??1,ER(r)),e.opacityExit=we(t.opacity??1,0,CR(r))):i&&(e.opacity=we(t.opacity??1,n.opacity??1,r));for(let o=0;o<_R;o++){const a=`border${rb[o]}Radius`;let l=j0(t,a),c=j0(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||C0(l)===C0(c)?(e[a]=Math.max(we(E0(l),E0(c),r),0),(an.test(c)||an.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=we(t.rotate||0,n.rotate||0,r))}function j0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ER=sb(0,.5,Xw),CR=sb(.5,.95,Pt);function sb(e,t,n){return r=>r<e?0:r>t?1:n($o(e,t,r))}function N0(e,t){e.min=t.min,e.max=t.max}function _t(e,t){N0(e.x,t.x),N0(e.y,t.y)}function T0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function P0(e,t,n,r,s){return e-=t,e=Jl(e,1/n,r),s!==void 0&&(e=Jl(e,1/s,r)),e}function jR(e,t=0,n=1,r=.5,s,i=e,o=e){if(an.test(t)&&(t=parseFloat(t),t=we(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=we(i.min,i.max,r);e===i&&(a-=t),e.min=P0(e.min,t,n,a,s),e.max=P0(e.max,t,n,a,s)}function A0(e,t,[n,r,s],i,o){jR(e,t[n],t[r],t[s],t.scale,i,o)}const NR=["x","scaleX","originX"],TR=["y","scaleY","originY"];function R0(e,t,n,r){A0(e.x,t,NR,n?n.x:void 0,r?r.x:void 0),A0(e.y,t,TR,n?n.y:void 0,r?r.y:void 0)}function M0(e){return e.translate===0&&e.scale===1}function ib(e){return M0(e.x)&&M0(e.y)}function $0(e,t){return e.min===t.min&&e.max===t.max}function PR(e,t){return $0(e.x,t.x)&&$0(e.y,t.y)}function L0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ob(e,t){return L0(e.x,t.x)&&L0(e.y,t.y)}function D0(e){return tt(e.x)/tt(e.y)}function O0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class AR{constructor(){this.members=[]}add(t){Jh(this.members,t),t.scheduleRender()}remove(t){if(Qh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RR(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:x}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),x&&(r+=`skewY(${x}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Vu=["","X","Y","Z"],MR={visibility:"hidden"},$R=1e3;let LR=0;function Bu(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ab(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=U1(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ab(r)}function lb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=LR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IR),this.nodes.forEach(UR),this.nodes.forEach(HR),this.nodes.forEach(zR)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bR)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new em),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=N1(o)&&!RP(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let u;const d=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=SR(d,250),fl.hasAnimatedSinceResize&&(fl.hasAnimatedSinceResize=!1,this.nodes.forEach(z0))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||c.getDefaultTransition()||YR,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=c.getProps(),p=!this.targetLayout||!ob(this.targetLayout,m),y=!d&&h;if(this.options.layoutRoot||this.resumeFrom||y||d&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...mm(x,"layout"),onPlay:w,onComplete:S};(c.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(u,y)}else d||z0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WR),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ab(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I0);return}this.isUpdating||this.nodes.forEach(VR),this.isUpdating=!1,this.nodes.forEach(BR),this.nodes.forEach(DR),this.nodes.forEach(OR),this.clearAllSnapshots();const a=ut.now();Ve.delta=An(0,1e3/60,a-Ve.timestamp),Ve.timestamp=a,Ve.isProcessing=!0,Ru.update.process(Ve),Ru.preRender.process(Ve),Ru.render.process(Ve),Ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FR),this.sharedNodes.forEach(qR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tt(this.snapshot.measuredBox.x)&&!tt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Te(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ib(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||$r(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),XR(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Te();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(JR))){const{scroll:u}=this.root;u&&(Is(a.x,u.offset.x),Is(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Te();if(_t(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&_t(a,o),Is(a.x,d.offset.x),Is(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Te();_t(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zs(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),$r(u.latestValues)&&zs(l,u.latestValues)}return $r(this.latestValues)&&zs(l,this.latestValues),l}removeTransform(o){const a=Te();_t(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!$r(c.latestValues))continue;Sf(c.latestValues)&&c.updateSnapshot();const u=Te(),d=c.measurePageBox();_t(u,d),R0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return $r(this.latestValues)&&R0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Ve.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),po(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Te(),this.targetWithTransforms=Te()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_t(this.target,this.layout.layoutBox),J1(this.target,this.targetDelta)):_t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),po(this.relativeTargetOrigin,this.target,m.target),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Sf(this.parent.latestValues)||X1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ve.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;_t(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;eR(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Te());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(T0(this.prevProjectionDelta.x,this.projectionDelta.x),T0(this.prevProjectionDelta.y,this.projectionDelta.y)),mo(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!O0(this.projectionDelta.x,this.prevProjectionDelta.x)||!O0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Os(),this.projectionDelta=Os(),this.projectionDeltaWithTransform=Os()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Os();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Te(),m=l?l.source:void 0,x=this.layout?this.layout.source:void 0,w=m!==x,S=this.getStack(),p=!S||S.members.length<=1,y=!!(w&&!p&&this.options.crossfade===!0&&!this.path.some(GR));this.animationProgress=0;let g;this.mixTargetDelta=b=>{const k=b/1e3;F0(d.x,o.x,k),F0(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(po(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KR(this.relativeTarget,this.relativeTargetOrigin,h,k),g&&PR(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=Te()),_t(g,this.relativeTarget)),w&&(this.animationValues=u,kR(u,c,this.latestValues,k,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{fl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=oi(0)),this.currentAnimation=xR(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($R),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&cb(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Te();const d=tt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=tt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}_t(a,l),zs(a,u),mo(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new AR),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Bu("z",o,c,this.animationValues);for(let u=0;u<Vu.length;u++)Bu(`rotate${Vu[u]}`,o,c,this.animationValues),Bu(`skew${Vu[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return MR;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=dl(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=dl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!$r(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=RR(this.projectionDeltaWithTransform,this.treeScale,u),l&&(a.transform=l(u,a.transform));const{x:d,y:h}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Io){if(u[m]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=Io[m],p=a.transform==="none"?u[m]:x(u[m],c);if(w){const y=w.length;for(let g=0;g<y;g++)a[w[g]]=p}else S?this.options.visualElement.renderState.vars[m]=p:a[m]=p}return this.options.layoutId&&(a.pointerEvents=c===this?dl(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(I0),this.root.sharedNodes.clear()}}}function DR(e){e.updateLayout()}function OR(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?kt(d=>{const h=o?t.measuredBox[d]:t.layoutBox[d],m=tt(h);h.min=r[d].min,h.max=h.min+m}):cb(i,t.layoutBox,r)&&kt(d=>{const h=o?t.measuredBox[d]:t.layoutBox[d],m=tt(r[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const a=Os();mo(a,r,t.layoutBox);const l=Os();o?mo(l,e.applyTransform(s,!0),t.measuredBox):mo(l,r,t.layoutBox);const c=!ib(a);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const x=Te();po(x,t.layoutBox,h.layoutBox);const w=Te();po(w,r,m.layoutBox),ob(x,w)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function IR(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FR(e){e.clearSnapshot()}function I0(e){e.clearMeasurements()}function VR(e){e.isLayoutDirty=!1}function BR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function z0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UR(e){e.resolveTargetDelta()}function HR(e){e.calcProjection()}function WR(e){e.resetSkewAndRotation()}function qR(e){e.removeLeadSnapshot()}function F0(e,t,n){e.translate=we(t.translate,0,n),e.scale=we(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function V0(e,t,n,r){e.min=we(t.min,n.min,r),e.max=we(t.max,n.max,r)}function KR(e,t,n,r){V0(e.x,t.x,n.x,r),V0(e.y,t.y,n.y,r)}function GR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const YR={duration:.45,ease:[.4,0,.1,1]},B0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),U0=B0("applewebkit/")&&!B0("chrome/")?Math.round:Pt;function H0(e){e.min=U0(e.min),e.max=U0(e.max)}function XR(e){H0(e.x),H0(e.y)}function cb(e,t,n){return e==="position"||e==="preserve-aspect"&&!QA(D0(t),D0(n),.2)}function JR(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const QR=lb({attachResizeListener:(e,t)=>Fo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uu={current:void 0},ub=lb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Uu.current){const e=new QR({});e.mount(window),e.setOptions({layoutScroll:!0}),Uu.current=e}return Uu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ZR={pan:{Feature:pR},drag:{Feature:mR,ProjectionNode:ub,MeasureLayout:nb}};function W0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Se.postRender(()=>i(t,oa(t)))}class e3 extends wr{mount(){const{current:t}=this.node;t&&(this.unmount=jP(t,(n,r)=>(W0(this.node,r,"Start"),s=>W0(this.node,s,"End"))))}unmount(){}}class t3 extends wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ra(Fo(this.node.current,"focus",()=>this.onFocus()),Fo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function q0(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Se.postRender(()=>i(t,oa(t)))}class n3 extends wr{mount(){const{current:t}=this.node;t&&(this.unmount=AP(t,(n,r)=>(q0(this.node,r,"Start"),(s,{success:i})=>q0(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ef=new WeakMap,Hu=new WeakMap,r3=e=>{const t=Ef.get(e.target);t&&t(e)},s3=e=>{e.forEach(r3)};function i3({root:e,...t}){const n=e||document;Hu.has(n)||Hu.set(n,{});const r=Hu.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(s3,{root:e,...t})),r[s]}function o3(e,t,n){const r=i3(t);return Ef.set(e,n),r.observe(e),()=>{Ef.delete(e),r.unobserve(e)}}const a3={some:0,all:1};class l3 extends wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:a3[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return o3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(c3(t,n))&&this.startObserver()}unmount(){}}function c3({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const u3={inView:{Feature:l3},tap:{Feature:n3},focus:{Feature:t3},hover:{Feature:e3}},d3={layout:{ProjectionNode:ub,MeasureLayout:nb}},Cf={current:null},db={current:!1};function f3(){if(db.current=!0,!!Xh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Cf.current=e.matches;e.addListener(t),t()}else Cf.current=!1}const h3=new WeakMap;function m3(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Xe(s))e.addValue(r,s);else if(Xe(i))e.addValue(r,oi(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,oi(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const K0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p3{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ut.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Se.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=zc(n),this.isVariantNode=R1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Xe(m)&&m.set(l[h],!1)}}mount(t){this.current=t,h3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),db.current||f3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=xi.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ai){const n=ai[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Te()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K0.length;r++){const s=K0[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=m3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=oi(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Fw(r)||Bw(r))?r=parseFloat(r):!$P(r)&&hr.test(n)&&(r=_1(t,n)),this.setBaseTarget(t,Xe(r)?r.get():r)),Xe(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Em(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Xe(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new em),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class fb extends p3{constructor(){super(...arguments),this.KeyframeResolver=SP}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Xe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hb(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function g3(e){return window.getComputedStyle(e)}class y3 extends fb{constructor(){super(...arguments),this.type="html",this.renderInstance=hb}readValueFromInstance(t,n){var r;if(xi.has(n))return(r=this.projection)!=null&&r.isProjecting?hf(n):VT(t,n);{const s=g3(t),i=(rm(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Q1(t,n)}build(t,n,r){Sm(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Cm(t,n,r)}}const mb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function v3(e,t,n,r){hb(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(mb.has(s)?s:bm(s),t.attrs[s])}class x3 extends fb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Te}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(xi.has(n)){const r=S1(n);return r&&r.default||0}return n=mb.has(n)?n:bm(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return B1(t,n,r)}build(t,n,r){I1(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){v3(t,n,r,s)}mount(t){this.isSVGTag=F1(t.tagName),super.mount(t)}}const w3=(e,t)=>km(e)?new x3(t):new y3(t,{allowProjection:e!==v.Fragment}),b3=vA({...HA,...u3,...ZR,...d3},w3),de=UP(b3),S3={pea:"bg-red-100 text-red-800",certamen:"bg-purple-100 text-purple-800",festival:"bg-orange-100 text-orange-800",recital:"bg-blue-100 text-blue-800",clase:"bg-green-100 text-green-800",taller:"bg-pink-100 text-pink-800",convocatoria:"bg-indigo-100 text-indigo-800",funcion:"bg-yellow-100 text-yellow-800"};function _3({onClose:e}){const[t,n]=v.useState(""),[r,s]=v.useState([]),[i,o]=v.useState(null),[a,l]=v.useState([]),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[m,x]=v.useState(!1),w=v.useRef(null);G.auth.getSession().then(({data:C})=>C.session),v.useEffect(()=>{(async()=>{var P,R;const T=(R=(P=(await G.auth.getSession()).data.session)==null?void 0:P.user)==null?void 0:R.id;if(!i||!T)return;const{data:A}=await G.from("communities").select("id").eq("user_id",T).eq("community_leader_id",i.id).maybeSingle();h(!!A)})()},[i]);const S=async()=>{var A,P;const N=(P=(A=(await G.auth.getSession()).data.session)==null?void 0:A.user)==null?void 0:P.id;if(!i||!N)return;const{error:T}=await G.from("communities").insert({user_id:N,community_leader_id:i.id});T||(h(!0),x(!0),setTimeout(()=>x(!1),1200))},p=async()=>{var A,P;const N=(P=(A=(await G.auth.getSession()).data.session)==null?void 0:A.user)==null?void 0:P.id;if(!i||!N)return;const{error:T}=await G.from("communities").delete().match({user_id:N,community_leader_id:i.id});T||h(!1)};v.useEffect(()=>{const C=N=>{!c&&w.current&&!w.current.contains(N.target)&&e()};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[e,c]),v.useEffect(()=>{const C=setTimeout(()=>{t.length>1?y(t):(s([]),o(null),l([]))},300);return()=>clearTimeout(C)},[t]);const y=async C=>{const{data:N,error:T}=await G.from("profiles").select("id, full_name, avatar, instagram").ilike("full_name",`%${C}%`);!T&&N&&s(N)},g=async C=>{const{data:N,error:T}=await G.from("events").select("id, title, type, date, province, city").eq("organizer_id",C).order("date",{ascending:!0});!T&&N&&l(N)},b=C=>{o(C),g(C.id)},k=()=>{o(null),l([])};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center",children:f.jsxs(de.div,{ref:w,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3,ease:"easeOut"},className:"bg-amber-200 w-full max-w-md mx-4 rounded-xl shadow-2xl p-4 max-h-[90vh] overflow-y-auto border-4 border-folkiAmber relative",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("h2",{className:"text-lg font-bold text-folkiRed",children:i?"Perfil del usuario":"Buscar usuario"}),f.jsx("button",{onClick:e,className:"text-folkiRed hover:text-folkiAmber transition",children:f.jsx(qt,{className:"w-5 h-5"})})]}),!i&&f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",placeholder:"Escrib un nombre...",value:t,onChange:C=>n(C.target.value),className:"w-full border border-folkiAmber rounded-lg px-3 py-2 mb-3 text-sm focus:outline-none focus:ring-2 focus:ring-folkiRed"}),f.jsx("ul",{className:"space-y-2",children:r.map(C=>f.jsxs("li",{onClick:()=>b(C),className:"flex items-center p-2 bg-folkiCream border border-folkiAmber rounded-lg shadow-sm hover:scale-[1.02] transition-transform cursor-pointer",children:[f.jsx("img",{src:C.avatar||"/default-avatar.png",alt:C.full_name,className:"w-10 h-10 rounded-full border-2 border-folkiRed object-cover mr-3"}),f.jsx("span",{className:"text-folkiRed font-medium text-sm",children:C.full_name})]},C.id))})]}),f.jsx(ts,{children:i&&f.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},className:"space-y-3",children:[f.jsxs("button",{onClick:k,className:"flex items-center text-sm text-folkiRed hover:text-folkiAmber transition mb-2",children:[f.jsx(g2,{className:"w-4 h-4 mr-1"}),"Volver"]}),f.jsxs("div",{className:"bg-folkiCream border border-folkiAmber rounded-lg p-3 shadow-md flex items-center gap-3",children:[f.jsx("img",{onClick:()=>u(!0),src:i.avatar||"/default-avatar.png",alt:i.full_name,className:"w-12 h-12 rounded-full border-2 border-folkiRed object-cover cursor-pointer"}),f.jsxs("div",{className:"flex justify-between items-center w-full gap-2 flex-wrap",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-folkiRed leading-none",children:i.full_name}),i.instagram&&f.jsxs("p",{className:"text-xs text-folkiRed",children:[f.jsx("span",{className:"font-semibold mr-1",children:"Insta :"}),f.jsx("a",{href:`https://instagram.com/${i.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-folkiAmber transition underline",children:i.instagram})]})]}),f.jsxs("div",{className:"relative flex flex-col items-center gap-1",children:[f.jsx("div",{className:"text-[10px] font-semibold text-folkiRed",children:d?"Dejar comunidad":"Unite a su comunidad"}),f.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d?p:S,className:`text-sm font-semibold px-3 py-1 rounded-full transition duration-300 shadow-sm ${d?"bg-gray-300 text-folkiRed":"bg-folkiRed text-folkiCream hover:bg-folkiAmber hover:text-folkiRed"}`,children:d?"Dejar":"Unirme"}),m&&f.jsx(de.div,{className:"absolute inset-0 rounded-full border-2 border-folkiAmber opacity-70 pointer-events-none",initial:{scale:1,opacity:.8},animate:{scale:2.2,opacity:0},transition:{duration:.8,ease:"easeOut"}})]})]})]}),f.jsx("h3",{className:"text-sm font-semibold text-folkiRed mb-2",children:"Eventos activos"}),a.length===0?f.jsx("p",{className:"text-xs text-gray-500",children:"Este usuario no tiene eventos activos."}):f.jsx("ul",{className:"space-y-2",children:a.map(C=>{const N=S3[C.type]||"bg-gray-100 text-gray-800",T=N.split(" ")[0].replace("bg-","").replace("-100","");return f.jsxs("li",{className:"p-2 bg-white rounded-md shadow-sm text-sm border-l-4",style:{borderColor:T},children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:`text-[10px] uppercase px-2 py-0.5 rounded font-semibold ${N}`,children:C.type.charAt(0).toUpperCase()+C.type.slice(1)}),f.jsx("span",{className:"text-gray-700",children:C.title})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-[11px] text-gray-600",children:[f.jsxs("span",{className:"flex items-center",children:[f.jsx(Tn,{className:"w-3 h-3 mr-1"}),new Date(C.date).toLocaleDateString("es-AR",{year:"numeric",month:"short",day:"numeric"})]}),f.jsxs("span",{className:"flex items-center",children:[f.jsx(Vh,{className:"w-3 h-3 mr-1"}),C.city,", ",C.province]})]})]},C.id)})})]},"profile")})]})}),f.jsx(ts,{children:c&&i&&f.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:()=>u(!1),children:f.jsxs(de.div,{onClick:C=>C.stopPropagation(),className:"relative",children:[f.jsx(de.img,{src:i.avatar||"/default-avatar.png",alt:i.full_name,initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.3},className:"max-w-full max-h-[90vh] rounded-lg shadow-lg cursor-zoom-out"}),f.jsx("button",{onClick:()=>u(!1),className:"absolute top-2 right-2 text-white bg-folkiRed rounded-full p-1 hover:bg-folkiAmber transition","aria-label":"Cerrar imagen",children:f.jsx(qt,{className:"w-6 h-6"})})]})},"imageModal")})]})}function k3({currentUser:e}){const[t,n]=v.useState([]),[r,s]=v.useState(!1);v.useEffect(()=>{(e==null?void 0:e.email)==="maxif.ruiz@gmail.com"&&i()},[e]);const i=async()=>{const{data:d,error:h}=await G.from("admin_notifications").select("*").order("created_at",{ascending:!1}).limit(50);h?console.error("Error al traer notis:",h):n(d||[])},o=async d=>{const{error:h}=await G.from("admin_notifications").update({read:!0}).eq("id",d);h&&console.error("Error al marcar como ledo:",h),i()},a=async()=>{const{error:d}=await G.from("admin_notifications").update({read:!0}).eq("read",!1);d&&console.error("Error al marcar todas como ledas:",d),i()},l=async()=>{const{error:d}=await G.from("admin_notifications").delete().eq("read",!0);d&&console.error("Error al limpiar ledas:",d),i()},c=t.filter(d=>!d.read).length,u=t.filter(d=>d.read).length;return(e==null?void 0:e.email)!=="maxif.ruiz@gmail.com"?null:f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>s(!r),className:"noti-button relative flex items-center gap-1 rounded-full px-3 py-1 shadow-md font-semibold hover:text-[#a71919] transition","aria-label":"Mostrar notificaciones Admin",title:"Mostrar notificaciones Admin",children:[f.jsx("img",{src:"/adminalert.png",alt:"Admin Alert",className:"w-5 h-5 rounded-full"}),c>0&&f.jsx("span",{className:"absolute top-0 right-0 text-xs bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center animate-pulse font-bold select-none",children:c})]}),r&&f.jsxs("div",{className:"noti-modal absolute right-0 mt-2 w-96 max-h-[60vh] overflow-y-auto z-50 bg-folkiCream border border-folkiRed rounded-2xl shadow-xl p-4 text-sm text-gray-800",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-lg font-bold text-folkiRed",children:"Notificaciones Admin"}),f.jsxs("div",{className:"flex gap-2 items-center",children:[c>0&&f.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-green-600 transition",title:"Marcar todas como ledas",children:[f.jsx(b2,{className:"w-4 h-4"}),"Marcar todas"]}),u>0&&f.jsxs("button",{onClick:l,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-red-600 transition",title:"Eliminar notificaciones ledas",children:[f.jsx(Bh,{className:"w-4 h-4"}),"Limpiar"]})]})]}),t.length===0?f.jsx("p",{className:"text-sm text-gray-500",children:"Sin notificaciones"}):f.jsx("ul",{className:"space-y-2",children:t.map(d=>f.jsxs("li",{className:`p-3 rounded-xl border ${d.read?"bg-folkiCream border-folkiRed text-folkiRed":"bg-[#fff8e6] border-red-200"}`,children:[f.jsx("p",{className:"text-sm",children:d.content}),f.jsx("p",{className:"text-xs text-gray-500",children:new Date(d.created_at).toLocaleString()}),!d.read&&f.jsx("button",{onClick:()=>o(d.id),className:"text-blue-600 text-xs mt-1 hover:underline","aria-label":"Marcar notificacin como leda",title:"Marcar como ledo",children:"Marcar como ledo"})]},d.id))})]})]})}const E3={pea:"bg-red-100 text-red-800",certamen:"bg-purple-100 text-purple-800",festival:"bg-orange-100 text-orange-800",recital:"bg-blue-100 text-blue-800",clase:"bg-green-100 text-green-800",taller:"bg-pink-100 text-pink-800",convocatoria:"bg-indigo-100 text-indigo-800",funcion:"bg-yellow-100 text-yellow-800"};function Nm({userId:e,onClose:t}){const[n,r]=v.useState(null),[s,i]=v.useState([]),[o,a]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),h=v.useRef(null);v.useEffect(()=>{(async()=>{var C;const{data:S,error:p}=await G.from("profiles").select("*").eq("id",e).single();if(p)return;r(S);const g=(C=(await G.auth.getSession()).data.session)==null?void 0:C.user.id;if(!g)return;const{data:b}=await G.from("communities").select("id").eq("user_id",g).eq("community_leader_id",e).maybeSingle();a(!!b);const{data:k}=await G.from("events").select("id, title, type, date, province, city").eq("organizer_id",e).order("date",{ascending:!0});i(k||[])})()},[e]);const m=async()=>{var y;const S=(y=(await G.auth.getSession()).data.session)==null?void 0:y.user.id;if(!S||!n)return;const{error:p}=await G.from("communities").insert({user_id:S,community_leader_id:n.id});p||(a(!0),c(!0),setTimeout(()=>c(!1),1200))},x=async()=>{var y;const S=(y=(await G.auth.getSession()).data.session)==null?void 0:y.user.id;if(!S||!n)return;const{error:p}=await G.from("communities").delete().match({user_id:S,community_leader_id:n.id});p||a(!1)};return v.useEffect(()=>{const w=S=>{!u&&h.current&&!h.current.contains(S.target)&&t()};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[t,u]),n?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center",children:f.jsxs(de.div,{ref:h,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3,ease:"easeOut"},className:"bg-amber-200 w-full max-w-md mx-4 rounded-xl shadow-2xl p-4 max-h-[90vh] overflow-y-auto border-4 border-folkiAmber relative",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("h2",{className:"text-lg font-bold text-folkiRed",children:"Perfil del usuario"}),f.jsx("button",{onClick:t,className:"text-folkiRed hover:text-folkiAmber transition",children:f.jsx(qt,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"bg-folkiCream border border-folkiAmber rounded-lg p-3 shadow-md flex items-center gap-3",children:[f.jsx("img",{onClick:()=>d(!0),src:n.avatar||"/default-avatar.png",alt:n.full_name,className:"w-12 h-12 rounded-full border-2 border-folkiRed object-cover cursor-pointer"}),f.jsxs("div",{className:"flex justify-between items-center w-full gap-2 flex-wrap",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-folkiRed leading-none",children:n.full_name}),n.instagram&&f.jsxs("p",{className:"text-xs text-folkiRed",children:[f.jsx("span",{className:"font-semibold mr-1",children:"Insta :"}),f.jsx("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-folkiAmber transition underline",children:n.instagram})]})]}),f.jsxs("div",{className:"relative flex flex-col items-center gap-1",children:[f.jsx("div",{className:"text-[10px] font-semibold text-folkiRed",children:o?"Dejar comunidad":"Unite a su comunidad"}),f.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o?x:m,className:`text-sm font-semibold px-3 py-1 rounded-full transition duration-300 shadow-sm ${o?"bg-gray-300 text-folkiRed":"bg-folkiRed text-folkiCream hover:bg-folkiAmber hover:text-folkiRed"}`,children:o?"Dejar":"Unirme"}),l&&f.jsx(de.div,{className:"absolute inset-0 rounded-full border-2 border-folkiAmber opacity-70 pointer-events-none",initial:{scale:1,opacity:.8},animate:{scale:2.2,opacity:0},transition:{duration:.8,ease:"easeOut"}})]})]})]}),f.jsx("h3",{className:"text-sm font-semibold text-folkiRed my-2",children:"Eventos activos"}),s.length===0?f.jsx("p",{className:"text-xs text-gray-500",children:"Este usuario no tiene eventos activos."}):f.jsx("ul",{className:"space-y-2",children:s.map(w=>{const S=E3[w.type]||"bg-gray-100 text-gray-800",p=S.split(" ")[0].replace("bg-","").replace("-100","");return f.jsxs("li",{className:"p-2 bg-white rounded-md shadow-sm text-sm border-l-4",style:{borderColor:p},children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:`text-[10px] uppercase px-2 py-0.5 rounded font-semibold ${S}`,children:w.type.charAt(0).toUpperCase()+w.type.slice(1)}),f.jsx("span",{className:"text-gray-700",children:w.title})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-[11px] text-gray-600",children:[f.jsxs("span",{className:"flex items-center",children:[f.jsx(Tn,{className:"w-3 h-3 mr-1"}),new Date(w.date).toLocaleDateString("es-AR",{year:"numeric",month:"short",day:"numeric"})]}),f.jsxs("span",{className:"flex items-center",children:[f.jsx(Vh,{className:"w-3 h-3 mr-1"}),w.city,", ",w.province]})]})]},w.id)})})]})}),f.jsx(ts,{children:u&&f.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:()=>d(!1),children:f.jsxs(de.div,{onClick:w=>w.stopPropagation(),className:"relative",children:[f.jsx(de.img,{src:n.avatar||"/default-avatar.png",alt:n.full_name,initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.3},className:"max-w-full max-h-[90vh] rounded-lg shadow-lg cursor-zoom-out"}),f.jsx("button",{onClick:()=>d(!1),className:"absolute top-2 right-2 text-white bg-folkiRed rounded-full p-1 hover:bg-folkiAmber transition","aria-label":"Cerrar imagen",children:f.jsx(qt,{className:"w-6 h-6"})})]})},"imageModal")})]}):null}const Wu=[{fecha:"29 y 30/Nov",numero:27,nombre:"La Matanza",provincia:"Buenos Aires",telefono:"1114849072"},{fecha:"29 y 30/Nov",numero:28,nombre:"La Plata",provincia:"Buenos Aires",telefono:"2214885539"},{fecha:"26-28/Sept",numero:31,nombre:"Leandro N. Alem",provincia:"Buenos Aires",telefono:"2362421858 / 2364511654"},{fecha:"7-9/Nov",numero:49,nombre:"San Isidro",provincia:"Buenos Aires",telefono:"1167831955"},{fecha:"4-5/Oct",numero:51,nombre:"San Martn",provincia:"Buenos Aires",telefono:"1164690636"},{fecha:"29-30/Nov",numero:53,nombre:"San Pedro",provincia:"Buenos Aires",telefono:"3329420520 de 8 a 12hs"},{fecha:"28-30/Nov",numero:56,nombre:"Santa Teresita",provincia:"Buenos Aires",telefono:"2246500573"},{fecha:"4-5/Oct",numero:62,nombre:"Zrate",provincia:"Buenos Aires",telefono:"3487645685 / 3487299021"},{fecha:"15-16/Nov",numero:1,nombre:"Alberti",provincia:"Buenos Aires",telefono:"2346567895"},{fecha:"7-9/Nov",numero:3,nombre:"Alte. Brown",provincia:"Buenos Aires",telefono:"1161758582"},{fecha:"7-8/Nov",numero:8,nombre:"Chascoms",provincia:"Buenos Aires",telefono:"2241500041"},{fecha:"-",numero:14,nombre:"Escobar",provincia:"Buenos Aires",telefono:"3484560409"},{fecha:"29-30/Nov",numero:32,nombre:"Lobos",provincia:"Buenos Aires",telefono:"2227479298"},{fecha:"29-30/Nov",numero:33,nombre:"Lomas de Zamora",provincia:"Buenos Aires",telefono:"1149688335"},{fecha:"15-16/Nov",numero:35,nombre:"Mar Chiquita",provincia:"Buenos Aires",telefono:"2235383713"},{fecha:"15-16/Nov",numero:36,nombre:"Mar del Plata",provincia:"Buenos Aires",telefono:"2233154368"},{fecha:"29-30/Nov",numero:37,nombre:"Mercedes",provincia:"Buenos Aires",telefono:"2324511363"},{fecha:"8-9/Nov",numero:38,nombre:"Pergamino",provincia:"Buenos Aires",telefono:"3412752872"},{fecha:"3 y 4/Oct",numero:18,nombre:"Fiambal",provincia:"Catamarca",telefono:"3834618029"},{fecha:"22-23/Nov",numero:34,nombre:"Los Varela",provincia:"Catamarca",telefono:"3834653729 / 3834541211"},{fecha:"15 y 16/Nov",numero:30,nombre:"Las Breas",provincia:"Chaco",telefono:"3731406228"},{fecha:"29-30/Nov",numero:58,nombre:"Tres Isletas",provincia:"Chaco",telefono:"3644216223"},{fecha:"22-23/Nov",numero:42,nombre:"Resistencia",provincia:"Chaco",telefono:"3624694987"},{fecha:"29 y 30/Nov",numero:17,nombre:"Esquel",provincia:"Chubut",telefono:"2944519529"},{fecha:"22-23/Nov",numero:11,nombre:"Comodoro Rivadavia",provincia:"Chubut",telefono:"2974740905"},{fecha:"29-30/Nov",numero:41,nombre:"Puerto Pirmides",provincia:"Chubut",telefono:"1163459287 / 1168826984"},{fecha:"17-18/Oct",numero:55,nombre:"Santa Rosa de Calamuchita",provincia:"Crdoba",telefono:"3564455872"},{fecha:"13-14/Sept",numero:5,nombre:"Bell Ville",provincia:"Crdoba",telefono:"3537666025 / 3537681753"},{fecha:"-",numero:6,nombre:"Berrotarn",provincia:"Crdoba",telefono:"3584368861"},{fecha:"22-23/Nov",numero:12,nombre:"Cruz del Eje",provincia:"Crdoba",telefono:"3549406607"},{fecha:"-",numero:13,nombre:"El To",provincia:"Crdoba",telefono:"3576529259"},{fecha:"7-8/Nov",numero:45,nombre:"Ro Tercero",provincia:"Crdoba",telefono:"3571629931"},{fecha:"29 y 30/Nov",numero:23,nombre:"Gualeguaych",provincia:"Entre Ros",telefono:"3442619559"},{fecha:"18-19/Oct",numero:60,nombre:"Villa",provincia:"Entre Ros",telefono:"3442484962"},{fecha:"15 y 16/Nov",numero:19,nombre:"Formosa",provincia:"Formosa",telefono:"3704503662"},{fecha:"11-12/Oct",numero:10,nombre:"Clorinda",provincia:"Formosa",telefono:"3718418725"},{fecha:"7-8/Sept",numero:39,nombre:"Piran",provincia:"Formosa",telefono:"3704590546"},{fecha:"29-30/Nov",numero:54,nombre:"San Salvador de Jujuy",provincia:"Jujuy",telefono:"3885222974"},{fecha:"4 y 5/Oct",numero:21,nombre:"General Acha",provincia:"La Pampa",telefono:"2952483003"},{fecha:"15 y 16/Nov",numero:24,nombre:"Ingeniero Luiggi",provincia:"La Pampa",telefono:"2302564209"},{fecha:"3 y 4/Oct",numero:29,nombre:"La Rioja",provincia:"La Rioja",telefono:"115833207"},{fecha:"15 y 16/Nov",numero:22,nombre:"Godoy Cruz",provincia:"Mendoza",telefono:"2614699001"},{fecha:"29 y 30/Nov",numero:25,nombre:"Junn",provincia:"Mendoza",telefono:"2624624096"},{fecha:"27-28/Sept",numero:61,nombre:"Zapala",provincia:"Neuqun",telefono:"2942407400"},{fecha:"4-5/Oct",numero:4,nombre:"Bariloche",provincia:"Ro Negro",telefono:"2944716040"},{fecha:"-",numero:9,nombre:"Chocle Choel",provincia:"Ro Negro",telefono:"2946413774"},{fecha:"31/Oct y 1/Nov",numero:48,nombre:"Salta",provincia:"Salta",telefono:"3874422673"},{fecha:"11-12/Oct",numero:47,nombre:"Rosario de Lerma",provincia:"Salta",telefono:"3874653532"},{fecha:"27-28/Sept",numero:50,nombre:"San Juan",provincia:"San Juan",telefono:"2644394066"},{fecha:"29-30/Nov",numero:52,nombre:"San Martn",provincia:"San Juan",telefono:"2645754031"},{fecha:"15-16/Nov",numero:40,nombre:"Puerto San Julin",provincia:"Santa Cruz",telefono:"2962450275"},{fecha:"14-15/Nov",numero:43,nombre:"Ro Gallegos",provincia:"Santa Cruz",telefono:"2964436200 interno 7023"},{fecha:"7 y 8/Sept",numero:20,nombre:"Glvez",provincia:"Santa Fe",telefono:"3404415039"},{fecha:"22-23/Nov",numero:57,nombre:"Santo Tom",provincia:"Santa Fe",telefono:"3424161344"},{fecha:"5-6/Dec",numero:59,nombre:"Villa Constitucin",provincia:"Santa Fe",telefono:"3400500844"},{fecha:"-",numero:7,nombre:"Carlos Pellegrini",provincia:"Santa Fe",telefono:"3408528677"},{fecha:"7-8/Nov",numero:15,nombre:"Esperanza",provincia:"Santa Fe",telefono:"3494620364"},{fecha:"29-30/Nov",numero:46,nombre:"Rosario",provincia:"Santa Fe",telefono:"3414480111"},{fecha:"8-9/Nov",numero:2,nombre:"Aatuya",provincia:"Santiago del Estero",telefono:"3844050545 / 3844542699"},{fecha:"11/Oct y 1-2/Nov",numero:26,nombre:"La Banda",provincia:"Sgo. del Estero",telefono:"3855894090"},{fecha:"29-30/Nov",numero:44,nombre:"Ro Grande",provincia:"Tierra del Fuego",telefono:"2964436200 interno 7023"}];function C3({isOpen:e,onClose:t}){const[n,r]=v.useState(""),[s,i]=v.useState("");if(!e)return null;const a=[...Wu].sort((u,d)=>u.fecha.localeCompare(d.fecha)).filter(u=>(n===""||u.nombre===n)&&(s===""||u.provincia===s)),l=Array.from(new Set(Wu.map(u=>u.nombre))),c=Array.from(new Set(Wu.map(u=>u.provincia)));return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-start pt-16 sm:pt-20 z-50",children:f.jsxs("div",{className:"bg-folkiCream rounded-xl shadow-lg w-full max-w-5xl mx-2 sm:mx-4 p-3 sm:p-6 overflow-auto max-h-[90vh]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2 sm:mb-4",children:[f.jsx("h2",{className:"text-folkiRed font-bold text-sm sm:text-xl truncate",children:"Pre Cosqun - Sedes"}),f.jsx("button",{onClick:t,className:"text-folkiRed font-bold px-2 py-1 rounded hover:bg-folkiAmber/50 transition text-xs sm:text-base",children:"X"})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-2 sm:mb-3 text-[10px] sm:text-sm",children:[f.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:"border border-folkiAmber rounded px-1 py-1 w-full sm:w-auto text-[10px] sm:text-sm",children:[f.jsx("option",{value:"",children:"Todas las sedes"}),l.map(u=>f.jsx("option",{value:u,children:u},u))]}),f.jsxs("select",{value:s,onChange:u=>i(u.target.value),className:"border border-folkiAmber rounded px-1 py-1 w-full sm:w-auto text-[10px] sm:text-sm",children:[f.jsx("option",{value:"",children:"Todas las provincias"}),c.map(u=>f.jsx("option",{value:u,children:u},u))]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full border border-folkiAmber text-[10px] sm:text-sm",children:[f.jsx("thead",{className:"bg-folkiAmber text-folkiRed text-[10px] sm:text-sm",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-1 py-0.5 border",children:"Fecha"}),f.jsx("th",{className:"px-1 py-0.5 border",children:"N"}),f.jsx("th",{className:"px-1 py-0.5 border",children:"Nombre Sede"}),f.jsx("th",{className:"px-1 py-0.5 border",children:"Provincia"}),f.jsx("th",{className:"px-1 py-0.5 border",children:"Telfono"})]})}),f.jsx("tbody",{children:a.map((u,d)=>f.jsxs("tr",{className:"even:bg-white/20 odd:bg-white/10",children:[f.jsx("td",{className:"px-1 py-0.5 border truncate",children:u.fecha}),f.jsx("td",{className:"px-1 py-0.5 border",children:u.numero}),f.jsx("td",{className:"px-1 py-0.5 border truncate",children:u.nombre}),f.jsx("td",{className:"px-1 py-0.5 border truncate",children:u.provincia}),f.jsx("td",{className:"px-1 py-0.5 border truncate",children:u.telefono})]},d))})]})})]})})}function j3({children:e,currentPage:t,onPageChange:n,user:r}){const[s,i]=v.useState([]),[o,a]=v.useState(!1),[l,c]=v.useState(!1),u=v.useRef(null),d=v.useRef(null),[h,m]=v.useState(!1),[x,w]=v.useState(null),[S,p]=v.useState(!1),[y,g]=v.useState(!1),[b,k]=v.useState(!1),[C,N]=v.useState(!1),[T,A]=v.useState(!1),[P,R]=v.useState(0),[z,V]=v.useState(null),[E,D]=v.useState(!1),M=v.useRef(null),O=v.useRef(0),_=async()=>{if(!(r!=null&&r.id))return;const{data:B,error:q}=await G.from("notifications").select(`
        id, type, leido, from_user_id, created_at,
        event:events(title, type),
        from_user:from_user_id (full_name, avatar)
      `).eq("user_id",r.id).order("created_at",{ascending:!1});q?console.error("Error cargando notificaciones:",q):i(B)};v.useEffect(()=>{_();const B=setInterval(()=>{_(),s.some(q=>!q.leido)&&(c(!0),setTimeout(()=>c(!1),500))},6e4);return()=>clearInterval(B)},[r==null?void 0:r.id,s]),v.useEffect(()=>{const B=s.filter(q=>!q.leido).length;B>0&&B>O.current&&!T&&(A(!0),R(0),d.current||(d.current=new Audio("/bombo.mp3")),E||(d.current.play().catch(()=>{}),D(!0)),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{A(!1),R(0),D(!1),M.current=null},3e3)),O.current=B},[s]);const j=B=>{const q="touches"in B?B.touches[0].clientX:B.clientX;V(q)},$=B=>{if(z===null)return;const K=("touches"in B?B.touches[0].clientX:B.clientX)-z;R(K)},L=()=>{Math.abs(P)>100&&(M.current&&(clearTimeout(M.current),M.current=null),A(!1),R(0),D(!1)),V(null)},I=async()=>{const B=s.filter(q=>!q.leido).map(q=>q.id);B.length>0&&(await G.from("notifications").update({leido:!0}).in("id",B),_())},W=async B=>{await G.from("notifications").update({leido:!0}).eq("id",B),_()},U=async()=>{const B=s.filter(q=>q.leido).map(q=>q.id);B.length>0&&(await G.from("notifications").delete().in("id",B),_())},X=[{id:"cartelera",label:"Cartelera",icon:y2},{id:"calendario",label:"Calendario",icon:v2},{id:"publicar",label:"Publicar",icon:C2},{id:"perfil",label:"Perfil",icon:uw},{id:"market",label:"Market",icon:T2}];return(r==null?void 0:r.role)==="admin"&&X.push({id:"admin",label:"Admin",icon:N2}),v.useEffect(()=>{function B(q){u.current&&!u.current.contains(q.target)&&a(!1)}return o?document.addEventListener("mousedown",B):document.removeEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[o]),f.jsxs("div",{className:"min-h-screen font-sans text-neutral-900 relative overflow-hidden",children:[f.jsx("div",{className:"bg"}),f.jsx("div",{className:"bg bg2"}),f.jsx("div",{className:"bg bg3"}),f.jsx("style",{children:`
          .bg {
            animation: slide 3s ease-in-out infinite alternate;
            background-image: linear-gradient(-60deg, #ebb24c 50%, #f5e8d5 50%);
            bottom: 0;
            left: -50%;
            opacity: 0.5;
            position: fixed;
            right: -50%;
            top: 0;
            z-index: -1;
          }
          .bg2 {
            animation-direction: alternate-reverse;
            animation-duration: 4s;
            background-image: linear-gradient(-60deg, #f5e8d5 50%, #800000 50%);
          }
          .bg3 {
            animation-duration: 5s;
            background-image: linear-gradient(-60deg,rgb(240, 220, 111) 50%, #ebb24c 50%);
          }
          @keyframes slide {
            0% { transform: translateX(-25%); }
            100% { transform: translateX(25%); }
          }
          .logo-container {
            position: relative;
            display: inline-block;
          }
          .logo-glow {
            filter: drop-shadow(0 0 14px rgba(255, 220, 100, 0.8)) drop-shadow(0 0 8px rgba(0, 0, 0, 0.6));
            animation: pulse 2.5s ease-in-out infinite;
            transition: filter 0.3s ease;
            z-index: 2;
            position: relative;
          }
          .logo-halo {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, rgba(255, 230, 150, 0.25) 0%, transparent 80%);
            border-radius: 50%;
            animation: halo-glow 3s ease-in-out infinite;
            z-index: 1;
          }
          @keyframes pulse {
            0%, 100% {
              filter: drop-shadow(0 0 14px rgba(255, 220, 100, 0.8)) drop-shadow(0 0 8px rgba(0, 0, 0, 0.6));
            }
            50% {
              filter: drop-shadow(0 0 18px rgba(255, 230, 120, 1)) drop-shadow(0 0 10px rgba(0, 0, 0, 0.7));
            }
          }
          @keyframes halo-glow {
            0%, 100% {
              transform: translate(-50%, -50%) scale(1);
              opacity: 0.3;
            }
            50% {
              transform: translate(-50%, -50%) scale(1.1);
              opacity: 0.6;
            }
          }
          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-1px); }
            50% { transform: translateX(2px); }
            75% { transform: translateX(-1px); }
          }
          .animate-shake {
            animation: shake 0.3s ease-in-out;
          }

          /* BOTON DE NOTIFICACIONES CON COLOR BORDO Y SOMBRA */
          .noti-button {
            background-color: #f5e8d5;
            border: 2px solid #800000;
            box-shadow: 0 2px 8px rgb(128 0 0 / 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
          }
          .noti-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgb(128 0 0 / 0.6);
          }

          @keyframes fadeSlideDown {
            0% {
              opacity: 0;
              transform: translateY(-10px);
            }
            100% {
              opacity: 1;
              transform: translateY(0);
            }
          }

          /* MODAL DE NOTIFICACIONES */
          .noti-modal {
            background-color: #f5e8d5;
            border: 2px solid #800000;
            border-radius: 1.25rem;
            box-shadow: 0 6px 16px rgb(128 0 0 / 0.5);
            padding: 0.75rem 1rem;
            width: 300px;
            max-height: 60vh;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            font-size: 0.875rem;
            animation: fadeSlideDown 0.3s ease forwards;
          }
          .noti-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.4rem;
            font-weight: 600;
            color: #800000;
            font-size: 1.1rem;
          }
          .noti-modal-list {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 0.3rem;
            margin-bottom: 0.4rem;
          }
          .noti-item {
            background-color: #fff3db;
            border: 1.5px solid #d1a58b;
            border-radius: 0.5rem;
            padding: 0.3rem 0.5rem;
            margin-bottom: 0.3rem;
            line-height: 1.2;
            color: #4b2c1a;
            display: flex;
            align-items: center;
            gap: 0.5rem;
          }
          .noti-item.read {
            background-color: #f5e8d5;
            border-color: #800000;
            color: #800000;
          }
          .noti-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 1.5px solid #800000;
            flex-shrink: 0;
          }
          .noti-text {
            flex-grow: 1;
          }
          .noti-item button {
            font-size: 0.7rem;
            color: #2f6b36;
            font-weight: 600;
            background: none;
            border: none;
            cursor: pointer;
            margin-left: 0.3rem;
          }
          .noti-item button:hover {
            text-decoration: underline;
          }
          .noti-clear-btn {
            margin-top: 0.3rem;
            align-self: center;
            font-size: 0.85rem;
            color: #800000;
            font-weight: 600;
            background: none;
            border: none;
            cursor: pointer;
            text-decoration: underline;
          }
          .noti-clear-btn:disabled {
            color: #c9a9a2;
            cursor: default;
            text-decoration: none;
          }

          /* POPUP DE NOTIFICACIONES NUEVAS ARRIBA */
          .new-noti-popup {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(calc(-50% + var(--popup-translate-x, 0px)));
            background-color: #f5e8d5;
            border: 2px solid #800000;
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgb(128 0 0 / 0.5);
            padding: 0.75rem 1.2rem;
            font-weight: 600;
            color: #800000;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            user-select: none;
            cursor: grab;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 10000;
          }
          .new-noti-popup:active {
            cursor: grabbing;
          }
        `}),T&&f.jsxs("div",{className:"new-noti-popup",style:{"--popup-translate-x":`${P}px`},onMouseDown:j,onTouchStart:j,onMouseMove:$,onTouchMove:$,onMouseUp:L,onTouchEnd:L,onMouseLeave:L,role:"alert","aria-live":"assertive",children:[f.jsxs("span",{children:["Tienes ",s.filter(B=>!B.leido).length," notificacin",s.filter(B=>!B.leido).length>1?"es":""," nuevas"]}),f.jsx("img",{src:"/notificacion.png",alt:"Campanita",className:"h-6 w-6"})]}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("header",{className:"backdrop-blur-md bg-folkiRed/90 shadow-lg sticky top-0 z-40",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16 overflow-visible",children:[f.jsxs("div",{className:"logo-container",children:[f.jsx("span",{className:"logo-halo"}),f.jsx("img",{src:"/logo.png",alt:"Folki Logo",className:"h-16 w-auto object-contain logo-glow"})]}),f.jsxs("div",{className:"flex items-center space-x-3 ml-auto",children:[f.jsx("div",{className:"relative",children:f.jsx("button",{onClick:()=>m(!0),className:"noti-button relative p-2 rounded-full shadow-md","aria-label":"Buscar usuarios",title:"Buscar usuarios",children:f.jsx("img",{src:"/lupa.png",alt:"Buscar",className:"h-6 w-6"})})}),f.jsxs("div",{className:"relative",ref:u,children:[f.jsxs("button",{onClick:()=>a(!o),className:"noti-button relative p-2 rounded-full shadow-md","aria-label":"Mostrar notificaciones",title:"Mostrar notificaciones",children:[f.jsx("img",{src:"/notificacion.png",alt:"Notificaciones",className:`h-6 w-6 ${l?"animate-shake":""}`}),s.filter(B=>!B.leido).length>0&&f.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.filter(B=>!B.leido).length})]}),o&&f.jsxs("div",{className:"noti-modal absolute right-0 mt-2 z-50",role:"dialog","aria-modal":"true","aria-label":"Lista de notificaciones",children:[f.jsxs("div",{className:"noti-modal-header",children:[f.jsx("span",{children:"Notificaciones"}),f.jsx("button",{className:"text-sm text-blue-700 hover:underline",onClick:I,title:"Marcar todas como ledas",children:"Marcar todo como ledo"})]}),f.jsxs("div",{className:"noti-modal-list",children:[s.length===0&&f.jsx("p",{className:"text-sm text-gray-600",children:"Sin notificaciones"}),s.map(B=>{var q;return f.jsxs("div",{className:`noti-item ${B.leido?"read":""}`,onClick:()=>{B.type==="follow"&&B.from_user_id&&(w(B.from_user_id),p(!0))},style:{cursor:B.type==="follow"?"pointer":"default"},children:[(q=B.from_user)!=null&&q.avatar?f.jsx("img",{src:B.from_user.avatar,alt:`${B.from_user.full_name} avatar`,className:"noti-avatar"}):f.jsx("div",{className:"noti-avatar bg-gray-300 flex items-center justify-center text-sm text-gray-600 font-semibold",children:"?"}),f.jsx("div",{className:"noti-text",children:(()=>{var ee,ae,ye,Ee;const K=((ee=B.from_user)==null?void 0:ee.full_name)??"Alguien";(ae=B.from_user)==null||ae.avatar;const te=((ye=B.event)==null?void 0:ye.type)??"un evento",ne=((Ee=B.event)==null?void 0:Ee.title)??"";switch(B.type){case"like":return` ${K} le dio like a ${te} "${ne}"`;case"attendance":case"asistire":return` ${K} indic que asistira a ${te} "${ne}"`;case"follow":return` ${K} se uni a tu comunidad`;case"new_event":return` ${K} public un nuevo evento: "${ne}"`;default:return null}})()}),!B.leido&&f.jsx("button",{onClick:()=>W(B.id),"aria-label":"Marcar notificacin como leda",title:"Marcar como ledo",children:""})]},B.id)})]}),f.jsx("button",{className:"noti-clear-btn",onClick:U,disabled:s.filter(B=>B.leido).length===0,title:"Limpiar notificaciones ledas",children:"Limpiar notificaciones"})]})]}),f.jsx(zN,{userId:r==null?void 0:r.id}),(r==null?void 0:r.email)==="maxif.ruiz@gmail.com"&&f.jsx(k3,{currentUser:r})]})]})})}),f.jsx("nav",{className:"bg-white/70 backdrop-blur-sm shadow-md sticky top-16 z-30 border-b border-folkiAmber",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-center space-x-1 sm:space-x-6 py-3",children:[X.map(({id:B,label:q,icon:K})=>f.jsxs("button",{onClick:()=>n(B),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 rounded-lg transition-all duration-300 font-medium ${t===B?"bg-folkiRed text-white shadow-md transform scale-105":"text-folkiRed hover:bg-folkiAmber/30 hover:text-folkiRed"}`,children:[f.jsx(K,{className:"h-5 w-5"}),f.jsx("span",{className:"hidden sm:block text-sm",children:q})]},B)),f.jsxs("button",{className:"flex items-center space-x-2 px-3 sm:px-4 py-2 rounded-lg transition-all duration-300 font-medium text-folkiRed hover:bg-folkiAmber/30 bg-transparent",onClick:()=>N(!0),children:[f.jsx("div",{className:"rounded-full p-1 animate-pulse-button shadow-neon flex items-center justify-center",children:f.jsx("img",{src:"/precosquin.png",alt:"Precosquin",className:"h-8 w-8 flex-shrink-0"})}),f.jsx("span",{className:"hidden sm:block text-sm",children:"Precosquin"})]})]})})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e}),f.jsx("footer",{className:"bg-folkiRed text-white border-t border-folkiAmber mt-12 pt-8 pb-10 text-sm",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"flex justify-center items-center overflow-visible",children:f.jsxs("div",{className:"logo-container",children:[f.jsx("span",{className:"logo-halo"}),f.jsx("img",{src:"/logo.png",alt:"Folki Icon",className:"h-[70px] w-auto object-contain logo-glow"})]})}),f.jsx("p",{className:"text-folkiCream text-base max-w-lg mx-auto",children:"La primer cartelera del Folklore Argentino. Conectando eventos, creando comunidad."})]}),f.jsxs("div",{className:"mt-8 border-t border-folkiAmber pt-4",children:[f.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm text-folkiCream",children:[f.jsx("button",{onClick:()=>g(!0),className:"underline hover:text-folkiAmber transition",type:"button",children:"Trminos y condiciones"}),f.jsx("button",{onClick:()=>k(!0),className:"underline hover:text-folkiAmber transition",type:"button",children:"Poltica de privacidad"})]}),f.jsxs("div",{className:"mt-4 text-center text-xs sm:text-sm text-folkiCream space-y-1",children:[f.jsx("div",{children:" 2025 Folki App. Todos los derechos reservados."}),f.jsxs("div",{children:["Soporte:"," ",f.jsx("a",{href:"mailto:eventos.folki@gmail.com",className:"underline hover:text-folkiAmber",children:"eventos.folki@gmail.com"})]})]})]})]})}),S&&x&&f.jsx(Nm,{userId:x,onClose:()=>p(!1)})]})," ",f.jsx($g,{open:y,onClose:()=>g(!1),type:"terminos"}),f.jsx($g,{open:b,onClose:()=>k(!1),type:"privacidad"}),h&&f.jsx(_3,{onClose:()=>m(!1)}),f.jsx(C3,{isOpen:C,onClose:()=>N(!1)})]})}function G0({isOpen:e,onClose:t,title:n,users:r,type:s}){return e?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-96 overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[s==="likes"?f.jsx(si,{className:"h-5 w-5 text-red-600"}):f.jsx(Tn,{className:"h-5 w-5 text-green-600"}),f.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:n})]}),f.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 transition-colors duration-200",children:f.jsx(qt,{className:"h-5 w-5"})})]}),f.jsx("div",{className:"p-4",children:r.length===0?f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-neutral-500",children:s==="likes"?'Nadie ha marcado "me gusta" an':"Nadie marc que asistir an"})}):f.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:r.map(i=>f.jsxs("div",{className:"flex items-center space-x-3 hover:bg-neutral-50 p-2 rounded-lg transition-colors duration-200",children:[f.jsx("img",{src:i.avatar,alt:i.full_name,className:"w-10 h-10 rounded-full object-cover"}),f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"font-medium text-neutral-800",children:i.full_name})}),s==="likes"?f.jsx(si,{className:"h-4 w-4 text-red-500 fill-current"}):f.jsx(Tn,{className:"h-4 w-4 text-green-500 fill-current"})]},i.id))})}),f.jsx("div",{className:"px-4 py-3 bg-neutral-50 border-t border-neutral-200",children:f.jsxs("p",{className:"text-sm text-neutral-600 text-center",children:[r.length," ",r.length===1?"persona":"personas"]})})]})}):null}var jf=new Map,Ia=new WeakMap,Y0=0,N3=void 0;function T3(e){return e?(Ia.has(e)||(Y0+=1,Ia.set(e,Y0.toString())),Ia.get(e)):"0"}function P3(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?T3(e.root):e[t]}`).toString()}function A3(e){const t=P3(e);let n=jf.get(t);if(!n){const r=new Map;let s;const i=new IntersectionObserver(o=>{o.forEach(a=>{var l;const c=a.isIntersecting&&s.some(u=>a.intersectionRatio>=u);e.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=r.get(a.target))==null||l.forEach(u=>{u(c,a)})})},e);s=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:r},jf.set(t,n)}return n}function R3(e,t,n={},r=N3){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:s,observer:i,elements:o}=A3(n),a=o.get(e)||[];return o.has(e)||o.set(e,a),a.push(t),i.observe(e),function(){a.splice(a.indexOf(t),1),a.length===0&&(o.delete(e),i.unobserve(e)),o.size===0&&(i.disconnect(),jf.delete(s))}}function M3({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:s,triggerOnce:i,skip:o,initialInView:a,fallbackInView:l,onChange:c}={}){var u;const[d,h]=v.useState(null),m=v.useRef(c),[x,w]=v.useState({inView:!!a,entry:void 0});m.current=c,v.useEffect(()=>{if(o||!d)return;let g;return g=R3(d,(b,k)=>{w({inView:b,entry:k}),m.current&&m.current(b,k),k.isIntersecting&&i&&g&&(g(),g=void 0)},{root:s,rootMargin:r,threshold:e,trackVisibility:n,delay:t},l),()=>{g&&g()}},[Array.isArray(e)?e.toString():e,d,s,r,i,o,n,l,t]);const S=(u=x.entry)==null?void 0:u.target,p=v.useRef(void 0);!d&&S&&!i&&!o&&p.current!==S&&(p.current=S,w({inView:!!a,entry:void 0}));const y=[h,x.inView,x.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}function Ql({event:e,currentUserId:t,onToggleLike:n,onToggleAttending:r,index:s=0,forceOpen:i=!1,onClose:o}){var U,X,B,q;const[a,l]=v.useState(!1),[c,u]=v.useState(!1),[d,h]=v.useState(!1),[m,x]=v.useState(!1),[w,S]=v.useState(!1),[p,y]=v.useState(!1),[g,b]=v.useState(!1),[k,C]=v.useState(null),N=((U=e.reactions.likes)==null?void 0:U.filter(Boolean))??[],T=((X=e.reactions.attending)==null?void 0:X.filter(Boolean))??[],A=N.some(K=>K.id===t),P=T.some(K=>K.id===t),R=e.multimedia&&e.multimedia.length>0?e.multimedia[0].url:"",z=((B=e.organizer)==null?void 0:B.full_name)||"Organizador desconocido",V=(q=e.organizer)!=null&&q.avatar&&e.organizer.avatar!==""?e.organizer.avatar:"https://via.placeholder.com/40?text=",E=(K,te)=>K.length<=te?K:K.slice(0,te)+"...",D=(!e.price_anticipada||e.price_anticipada===0)&&(!e.price_general||e.price_general===0),M={pea:"bg-red-100 text-red-800",certamen:"bg-purple-100 text-purple-800",festival:"bg-orange-100 text-orange-800",recital:"bg-blue-100 text-blue-800",clase:"bg-green-100 text-green-800",taller:"bg-pink-100 text-pink-800",convocatoria:"bg-indigo-100 text-indigo-800",funcion:"bg-yellow-100 text-yellow-800"}[e.type||""]||"bg-gray-100 text-gray-800",O=()=>{A||(S(!0),setTimeout(()=>S(!1),2e3)),n(e.id,t)},_=()=>{P||(y(!0),setTimeout(()=>y(!1),2e3)),r(e.id,t)},j=K=>{K&&(C(K),b(!0))},[$,L]=M3({triggerOnce:!0,threshold:.2}),I=()=>{i||h(!0)},W=()=>{o?o():h(!1)};return F.useEffect(()=>{h(!!i)},[i]),f.jsxs(f.Fragment,{children:[f.jsxs(de.div,{ref:$,initial:{opacity:0,y:30},animate:L?{opacity:1,y:0}:{},transition:{duration:1.2,ease:"easeOut",delay:s*.5},className:"relative bg-folkiCream rounded-3xl border-2 border-gray-300 shadow-[0_8px_30px_rgba(0,0,0,0.3),0_0_10px_rgba(255,255,255,0.3)_inset] overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-[1.05] hover:shadow-[0_12px_40px_rgba(0,0,0,0.4),0_0_15px_rgba(255,255,255,0.4)_inset]",onClick:I,children:[e.type&&f.jsx("div",{className:`absolute top-0 left-0 px-3 py-1 text-xs font-bold rounded-br-xl ${M} animate-flamear`,children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),R&&f.jsx("img",{src:R,alt:e.title,className:"w-full h-48 object-cover border-b border-gray-200"}),f.jsxs("div",{className:"p-1 space-y-0.5 pb-2 bg-folkiCream",children:[f.jsx("h2",{className:"text-base font-semibold text-gray-800",children:E(e.title,30)}),f.jsxs("div",{className:"text-xs text-gray-600",children:[f.jsxs("div",{className:"text-xs text-gray-600",children:[" ",f.jsx("strong",{})," ",(()=>{const K=new Date(e.date),te=K.toLocaleString("es-AR",{weekday:"long"}),ne=K.getDate().toString().padStart(2,"0"),ee=(K.getMonth()+1).toString().padStart(2,"0"),ae=K.getFullYear().toString().slice(-2);return`${te.charAt(0).toUpperCase()+te.slice(1)} ${ne}/${ee}/${ae}`})()]}),f.jsxs("div",{className:"flex items-center mt-1",children:[" ",f.jsx("strong",{}),`${new Date(e.date).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit",hour12:!1})} Hs`]})]}),(e.province||e.city)&&f.jsxs("div",{className:"text-xs text-gray-600",children:[" ",f.jsx("strong",{})," ",[e.province,e.city].filter(Boolean).join(" - ")]}),f.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[f.jsx("img",{src:V,alt:z,className:"w-8 h-8 rounded-full object-cover"}),f.jsxs("div",{className:"text-xs text-gray-700 leading-tight",children:["Evento creado por ",f.jsx("span",{className:"font-semibold",children:z})]})]}),f.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-2",children:[f.jsxs("div",{className:`flex items-center space-x-1 ${A?"text-red-600":"text-gray-600"}`,children:[f.jsx(si,{className:`w-5 h-5 ${A?"fill-current":""}`}),f.jsx("span",{className:"text-sm",children:N.length})]}),f.jsxs("div",{className:`flex items-center space-x-1 ${P?"text-green-600":"text-gray-600"}`,children:[f.jsx(Tn,{className:`w-5 h-5 ${P?"fill-current":""}`}),f.jsx("span",{className:"text-sm",children:T.length})]})]})]})]}),d&&f.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex items-center justify-center animate-fade-in",children:f.jsxs("div",{className:"bg-folkiCream max-w-2xl w-full mx-4 rounded-xl shadow-2xl relative animate-slide-up max-h-[90vh] overflow-y-auto",children:[f.jsx("button",{onClick:W,className:"absolute top-3 right-3 text-gray-700 hover:text-black text-3xl font-bold bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg","aria-label":"Cerrar detalle evento",children:f.jsx(qt,{className:"w-6 h-6 text-gray-800"})}),R&&f.jsx("img",{src:R,alt:e.title,className:"w-full h-auto max-h-[320px] object-cover cursor-pointer",onClick:()=>x(!0)}),f.jsxs("div",{className:"p-6 space-y-4 relative",children:[w&&f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"/like.gif",alt:"like animation",className:"absolute w-40 h-40 pointer-events-none z-[999]",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),f.jsx("div",{className:"absolute text-4xl font-bold text-red-600 pointer-events-none z-[999] select-none",style:{top:"60%",left:"50%",transform:"translate(-50%, 0)"},children:"Like!"})]}),p&&f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"/asistire.gif",alt:"asistir animation",className:"absolute w-40 h-40 pointer-events-none z-[999]",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),f.jsx("div",{className:"absolute text-4xl font-bold text-green-600 pointer-events-none z-[999] select-none",style:{top:"60%",left:"50%",transform:"translate(-50%, 0)"},children:"Asistir!"})]}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.title}),f.jsx("p",{className:"text-gray-800 whitespace-pre-line",children:e.description}),f.jsxs("div",{className:"text-gray-600 text-sm",children:[" ",f.jsx("strong",{children:"Fecha:"})," ",new Date(e.date).toLocaleString("es-AR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit"})]}),(e.province||e.city)&&f.jsxs("div",{className:"text-gray-600 text-sm",children:[" ",f.jsx("strong",{children:"Ubicacin:"})," ",[e.province,e.city].filter(Boolean).join(" - ")]}),e.address&&f.jsxs("div",{className:"text-gray-600 text-sm",children:[" ",f.jsx("strong",{children:"Direccin:"})," ",e.address]}),f.jsx("div",{className:"text-red-600 text-sm space-y-1",children:D?f.jsx("div",{children:"Evento gratuito"}):f.jsxs(f.Fragment,{children:[e.price_anticipada!==void 0&&e.price_anticipada!==0&&f.jsxs("div",{children:[f.jsx(gg,{className:"w-4 h-4 inline mr-1"}),"Valor anticipada: $",e.price_anticipada]}),e.price_general!==void 0&&e.price_general!==0&&f.jsxs("div",{children:[f.jsx(gg,{className:"w-4 h-4 inline mr-1"}),"Valor general: $",e.price_general]})]})}),f.jsxs("button",{onClick:()=>{var K;return j((K=e.organizer)==null?void 0:K.id)},className:"flex items-center space-x-3 w-full p-3 rounded-xl border border-folkiAmber shadow-md bg-folkiCream hover:bg-folkiAmber/70 transition",children:[f.jsx("img",{src:V,alt:z,className:"w-10 h-10 rounded-full object-cover border-2 border-folkiRed"}),f.jsxs("span",{className:"text-sm text-folkiRed font-semibold",children:["Evento creado por ",f.jsx("strong",{children:z})]})]}),g&&k&&f.jsx(Nm,{userId:k,onClose:()=>b(!1)}),f.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-6",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{onClick:O,className:`flex items-center space-x-1 focus:outline-none ${A?"text-red-600":"text-gray-400"}`,children:f.jsx(si,{className:`w-5 h-5 ${A?"fill-current":""}`})}),f.jsx("button",{onClick:()=>l(!0),className:"text-sm text-blue-600 hover:underline focus:outline-none",children:"Ver likes"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{onClick:_,className:`flex items-center space-x-1 focus:outline-none ${P?"text-green-600":"text-gray-400"}`,children:f.jsx(Tn,{className:`w-5 h-5 ${P?"fill-current":""}`})}),f.jsx("button",{onClick:()=>u(!0),className:"text-sm text-blue-600 hover:underline focus:outline-none",children:"Ver asistencia"})]})]})]})]})}),m&&R&&f.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:()=>x(!1),children:[f.jsx("img",{src:R,alt:"Imagen completa",className:"max-w-full max-h-full rounded-xl shadow-xl cursor-pointer",onClick:()=>x(!1)}),f.jsx("button",{className:"absolute top-4 right-4 text-white text-3xl bg-black bg-opacity-50 hover:bg-opacity-80 rounded-full px-4 py-2",onClick:()=>x(!1),"aria-label":"Cerrar imagen completa",children:""})]}),f.jsx(G0,{isOpen:a,onClose:()=>l(!1),title:`Me gusta - ${e.title}`,users:N,type:"likes"}),f.jsx(G0,{isOpen:c,onClose:()=>u(!1),title:`Asistirn - ${e.title}`,users:T,type:"attending"})]})}const $3=[{id:"ba",name:"Buenos Aires",cities:["La Plata","Mar del Plata","Baha Blanca","San Antonio de Areco","Tandil","Quilmes","San Isidro","Vicente Lpez","Tigre","Pilar"]},{id:"caba",name:"Ciudad Autnoma de Buenos Aires",cities:["CABA"]},{id:"cordoba",name:"Crdoba",cities:["Crdoba Capital","Villa Carlos Paz","Ro Cuarto","Villa Mara","Alta Gracia","Jess Mara"]},{id:"salta",name:"Salta",cities:["Salta Capital","Cafayate","Tartagal","Orn","Metn","Rosario de Lerma"]},{id:"jujuy",name:"Jujuy",cities:["San Salvador de Jujuy","Palpal","Perico","San Pedro","Libertador General San Martn"]},{id:"corrientes",name:"Corrientes",cities:["Corrientes Capital","Goya","Mercedes","Paso de los Libres","Curuz Cuati"]},{id:"tucuman",name:"Tucumn",cities:["San Miguel de Tucumn","Taf Viejo","Yerba Buena","Concepcin","Banda del Ro Sal"]},{id:"mendoza",name:"Mendoza",cities:["Mendoza Capital","San Rafael","Godoy Cruz","Maip","Las Heras","Lujn de Cuyo"]},{id:"santafe",name:"Santa Fe",cities:["Santa Fe Capital","Rosario","Rafaela","Reconquista","Venado Tuerto"]},{id:"entrerios",name:"Entre Ros",cities:["Paran","Concordia","Gualeguaych","Concepcin del Uruguay","Villaguay"]},{id:"misiones",name:"Misiones",cities:["Posadas","Ober","Eldorado","Puerto Iguaz","Apstoles"]},{id:"formosa",name:"Formosa",cities:["Formosa Capital","Clorinda","Piran","Las Lomitas","Ingeniero Jurez"]},{id:"chaco",name:"Chaco",cities:["Resistencia","Barranqueras","Fontana","Puerto Vilelas","Presidencia Roque Senz Pea"]},{id:"santiago",name:"Santiago del Estero",cities:["Santiago del Estero Capital","La Banda","Termas de Ro Hondo","Aatuya","Fras"]},{id:"catamarca",name:"Catamarca",cities:["San Fernando del Valle de Catamarca","Andalgal","Beln","Tinogasta","Santa Mara"]},{id:"larioja",name:"La Rioja",cities:["La Rioja Capital","Chilecito","Aimogasta","Chepes","Chamical"]},{id:"sanjuan",name:"San Juan",cities:["San Juan Capital","Rawson","Chimbas","Rivadavia","Santa Luca"]},{id:"sanluis",name:"San Luis",cities:["San Luis Capital","Villa Mercedes","Merlo","Juana Koslay","La Punta"]},{id:"neuquen",name:"Neuqun",cities:["Neuqun Capital","Plottier","Cipolletti","Cutral C","Zapala"]},{id:"rionegro",name:"Ro Negro",cities:["Viedma","San Carlos de Bariloche","General Roca","Cipolletti","Villa Regina"]},{id:"chubut",name:"Chubut",cities:["Rawson","Comodoro Rivadavia","Puerto Madryn","Trelew","Esquel"]},{id:"santacruz",name:"Santa Cruz",cities:["Ro Gallegos","Caleta Olivia","El Calafate","Pico Truncado","Puerto Deseado"]},{id:"tierradelfuego",name:"Tierra del Fuego",cities:["Ushuaia","Ro Grande","Tolhuin"]}],Nf={pea:"Pea",certamen:"Certamen",festival:"Festival",recital:"Recital",clase:"Clase",taller:"Taller",convocatoria:"Convocatoria",funcion:"Funcion"};function pb({selectedType:e,selectedProvince:t,onTypeChange:n,onProvinceChange:r,onClearFilters:s}){const[i,o]=v.useState(!1),a=e!=="all"||t!=="";return v.useEffect(()=>{localStorage.getItem("filtersOpen")==="true"&&o(!0)},[]),v.useEffect(()=>{localStorage.setItem("filtersOpen",i.toString())},[i]),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6 border border-neutral-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>o(l=>!l),className:"flex items-center space-x-2 text-sm font-semibold text-folkiRed hover:text-red-800 transition",children:[f.jsx(S2,{className:"h-5 w-5"}),f.jsx("span",{children:i?"Ocultar filtros":"Mostrar filtros"})]}),a&&i&&f.jsxs("button",{onClick:s,className:"flex items-center space-x-1 text-sm font-medium text-red-600 hover:text-red-800 transition","aria-label":"Limpiar filtros",children:[f.jsx(qt,{className:"h-4 w-4"}),f.jsx("span",{children:"Limpiar filtros"})]})]}),f.jsx(ts,{children:i&&f.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.4,ease:"easeInOut"},className:"overflow-hidden mt-5 space-y-5",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Tipo de evento"}),f.jsxs("select",{value:e,onChange:l=>n(l.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-folkiRed focus:border-folkiRed text-neutral-800",children:[f.jsx("option",{value:"all",children:"Todos los tipos"}),Object.entries(Nf).map(([l,c])=>f.jsx("option",{value:l,children:c},l))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Provincia"}),f.jsxs("select",{value:t,onChange:l=>r(l.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-folkiRed focus:border-folkiRed text-neutral-800",children:[f.jsx("option",{value:"",children:"Todas las provincias"}),$3.map(l=>f.jsx("option",{value:l.name,children:l.name},l.id))]})]})]}),a&&f.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[e!=="all"&&f.jsxs("span",{className:"inline-flex items-center px-4 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:["Tipo: ",Nf[e],f.jsx("button",{onClick:()=>n("all"),className:"ml-2 text-red-600 hover:text-red-800",children:f.jsx(qt,{className:"h-4 w-4"})})]}),t&&f.jsxs("span",{className:"inline-flex items-center px-4 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-300",children:[t,f.jsx("button",{onClick:()=>r(""),className:"ml-2 text-blue-600 hover:text-blue-800",children:f.jsx(qt,{className:"h-4 w-4"})})]})]})]},"filters")})]})}function L3({events:e,onLike:t,onAttend:n,currentUserId:r,currentUserFullName:s,currentUserAvatar:i}){const[o,a]=v.useState("all"),[l,c]=v.useState(""),u=()=>{a("all"),c("")},d=v.useMemo(()=>e.filter(_=>{const j=o==="all"||_.type===o,$=l===""||_.province===l;return j&&$}),[e,o,l]),[h,m]=v.useState(new Date),[x,w]=v.useState([]),[S,p]=v.useState(!1),[y,g]=v.useState(null),[b,k]=v.useState(null),C=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],N=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],T=_=>{const j=_.getFullYear(),$=_.getMonth(),L=new Date(j,$,1),I=new Date(j,$+1,0),W=[];for(let U=0;U<L.getDay();U++)W.push(null);for(let U=1;U<=I.getDate();U++)W.push(new Date(j,$,U));return W},A=_=>_?d.filter(j=>new Date(j.date).toDateString()===_.toDateString()).sort((j,$)=>new Date(j.date).getTime()-new Date($.date).getTime()):[],P=_=>m(j=>{const $=new Date(j);return _==="prev"?$.setMonth($.getMonth()-1):$.setMonth($.getMonth()+1),$}),R=_=>{w(A(_)),k(_),p(!0),g(null)},z=_=>{const j=d.find($=>$.id===_.id);j&&(g(j),p(!1))},V=()=>{g(null),p(!0)},E=async _=>{r&&await t(_,r)},D=async _=>{r&&await n(_,r)},M=_=>{if(!_)return"";const j=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],$=_.getDate().toString().padStart(2,"0"),L=(_.getMonth()+1).toString().padStart(2,"0"),I=_.getFullYear().toString().slice(-2);return`${j[_.getDay()]} ${$}/${L}/${I}`},O=T(h);return f.jsxs(f.Fragment,{children:[f.jsx(pb,{selectedType:o,selectedProvince:l,onTypeChange:a,onProvinceChange:c,onClearFilters:u}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h2",{className:"text-3xl font-bold text-neutral-800",children:[C[h.getMonth()]," ",h.getFullYear()]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("button",{onClick:()=>P("prev"),"aria-label":"Mes anterior",className:"p-2 rounded-lg hover:bg-neutral-100",children:f.jsx(x2,{className:"h-6 w-6 text-neutral-600"})}),f.jsx("button",{onClick:()=>P("next"),"aria-label":"Mes siguiente",className:"p-2 rounded-lg hover:bg-neutral-100",children:f.jsx(w2,{className:"h-6 w-6 text-neutral-600"})})]})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:N.map(_=>f.jsx("div",{className:"p-3 text-center text-sm font-semibold text-neutral-600",children:_},_))}),f.jsx("div",{className:"grid grid-cols-7 gap-1",children:O.map((_,j)=>{const $=_&&_.toDateString()===new Date().toDateString(),L=A(_);return f.jsx("div",{className:`relative min-h-[90px] p-3 rounded-lg border
                  ${_?"cursor-pointer hover:bg-neutral-50":""}
                  ${$?"bg-red-50 border-red-300":"border-neutral-100"}`,onClick:()=>_&&L.length&&R(_),children:_&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`text-sm font-semibold mb-2 ${$?"text-red-700":"text-neutral-800"}`,children:_.getDate()}),L.slice(0,2).map(I=>f.jsx("div",{className:`text-xs px-2 py-1 mb-1 rounded truncate font-semibold
                          ${I.type==="pea"?"bg-red-100 text-red-800":I.type==="festival"?"bg-orange-100 text-orange-800":I.type==="certamen"?"bg-purple-100 text-purple-800":I.type==="recital"?"bg-blue-100 text-blue-800":I.type==="clase"?"bg-green-100 text-green-800":I.type==="taller"?"bg-pink-100 text-pink-800":I.type==="convocatoria"?"bg-indigo-100 text-indigo-800":I.type==="funcion"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,title:I.title,children:I.title},I.id)),L.length>2&&f.jsxs("div",{className:"text-xs text-neutral-500",children:["+",L.length-2," ms"]})]})},j)})})]}),f.jsx(ts,{children:S&&!y&&f.jsx(de.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-5",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:f.jsxs(de.div,{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 space-y-4",initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},transition:{type:"spring",stiffness:300,damping:30},children:[f.jsxs("div",{className:"flex items-baseline justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Eventos del da"}),f.jsx("span",{className:"text-sm text-neutral-600 ml-2",children:M(b)})]}),x.map(_=>{const j={pea:"bg-red-100 text-red-800",certamen:"bg-purple-100 text-purple-800",festival:"bg-orange-100 text-orange-800",recital:"bg-blue-100 text-blue-800",clase:"bg-green-100 text-green-800",taller:"bg-pink-100 text-pink-800",convocatoria:"bg-indigo-100 text-indigo-800",funcion:"bg-yellow-100 text-yellow-800"}[_.type||""]||"bg-gray-100 text-gray-800";return f.jsxs("button",{onClick:()=>z(_),className:"w-full flex justify-between items-center p-2 rounded-lg bg-neutral-100 hover:bg-neutral-200 text-sm",children:[f.jsx("span",{className:"truncate max-w-[75%]",children:_.title}),f.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded ${j}`,children:_.type})]},_.id)}),f.jsx("button",{onClick:()=>p(!1),className:"text-sm text-red-600 hover:underline",children:"Cerrar"})]})})}),y&&f.jsx(Ql,{event:y,currentUserId:r||"",onToggleLike:E,onToggleAttending:D,forceOpen:!0,onClose:V})]})}const D3=[{id:1,name:"Buenos Aires"},{id:2,name:"Catamarca"},{id:3,name:"Chaco"},{id:4,name:"Chubut"},{id:5,name:"Crdoba"},{id:6,name:"Corrientes"},{id:7,name:"Entre Ros"},{id:8,name:"Formosa"},{id:9,name:"Jujuy"},{id:10,name:"La Pampa"},{id:11,name:"La Rioja"},{id:12,name:"Mendoza"},{id:13,name:"Misiones"},{id:14,name:"Neuqun"},{id:15,name:"Ro Negro"},{id:16,name:"Salta"},{id:17,name:"San Juan"},{id:18,name:"San Luis"},{id:19,name:"Santa Cruz"},{id:20,name:"Santa Fe"},{id:21,name:"Santiago del Estero"},{id:22,name:"Tierra del Fuego"},{id:23,name:"Tucumn"},{id:24,name:"Ciudad Autnoma de Buenos Aires"}];function gb({onSubmit:e,currentUser:t,initialData:n,isEditing:r=!1}){var N,T,A;const[s,i]=v.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",type:(n==null?void 0:n.type)||"pea",province:(n==null?void 0:n.province)||"",city:(n==null?void 0:n.city)||"",locality:"",address:(n==null?void 0:n.address)||"",date:n!=null&&n.date?n.date.split("T")[0]:"",time:n!=null&&n.date?(N=n.date.split("T")[1])==null?void 0:N.substring(0,5):"",isFree:(n==null?void 0:n.is_free)||!1,priceAnticipada:((T=n==null?void 0:n.price_anticipada)==null?void 0:T.toString())||"",priceGeneral:((A=n==null?void 0:n.price_general)==null?void 0:A.toString())||""}),[o,a]=v.useState([]),[l,c]=v.useState((n==null?void 0:n.multimedia)||[]),[u,d]=v.useState({}),[h,m]=v.useState(!1),[x,w]=v.useState(!1),[S,p]=v.useState(""),y=P=>{const{name:R,value:z,type:V}=P.target;if(V==="checkbox"){const E=P.target.checked;i(D=>({...D,[R]:E}))}else i(E=>({...E,[R]:z}));u[R]&&d(E=>({...E,[R]:""}))},g=P=>{var _;const R=Array.from(P.target.files||[]);if(R.length>1){d(j=>({...j,files:"Solo se permite un archivo"}));return}const z=R[0];if(!z){a([]),c([]),p(""),w(!1);return}const V=z.size<=8*1024*1024,E=["jpg","jpeg","png","webp","gif","heic","heif"],D=(_=z.name.split(".").pop())==null?void 0:_.toLowerCase(),M=D&&E.includes(D),O=z.type.startsWith("image/");if(!(V&&(O||M))){d(j=>({...j,files:"El archivo no es vlido. Mx 8MB, formato imagen"})),a([]),w(!1),p("");return}try{const j=URL.createObjectURL(z),$=new Image;$.onload=()=>{w(!0),p("Cargando archivo..."),a([z]),c([]),d(L=>({...L,files:""})),setTimeout(()=>{w(!1),p("Imagen lista para publicar.")},4e3)},$.onerror=()=>{d(L=>({...L,files:"No se pudo generar vista previa. Prob con otra imagen."})),a([]),w(!1),p("")},$.src=j}catch(j){console.error("Error generando preview:",j),d($=>({...$,files:"Error procesando la imagen. Prob con otra."})),a([]),w(!1),p("")}},b=()=>{const P={};return s.title.trim()||(P.title="El ttulo es obligatorio"),s.description.trim()||(P.description="La descripcin es obligatoria"),s.province||(P.province="La provincia es obligatoria"),s.city||(P.city="La ciudad es obligatoria"),s.address.trim()||(P.address="La direccin es obligatoria"),s.date||(P.date="La fecha es obligatoria"),s.time||(P.time="La hora es obligatoria"),!s.isFree&&(!s.priceAnticipada||!s.priceGeneral)&&(P.priceAnticipada="Obligatorio",P.priceGeneral="Obligatorio"),!r&&o.length===0&&l.length===0&&(P.files="Al menos una imagen es obligatoria"),new Date(`${s.date}T${s.time}`)<=new Date&&(P.date="La fecha y hora deben ser futuras"),d(P),Object.keys(P).length===0},k=async()=>{const P=o[0],R=`${Date.now()}-${P.name}`,{error:z}=await G.storage.from("event-files").upload(R,P);if(z)throw new Error("Error al subir imagen");const{data:V}=G.storage.from("event-files").getPublicUrl(R);return[{id:R,type:"image",url:V.publicUrl}]},C=async P=>{var R,z,V;if(P.preventDefault(),!!b()){m(!0);try{let E=l;o.length>0&&((R=l[0])!=null&&R.id&&await G.storage.from("event-files").remove([l[0].id]),E=await k());const D={title:s.title,description:s.description,type:s.type,province:s.province,city:s.city,address:s.address,date:new Date(`${s.date}T${s.time}`).toISOString(),is_free:s.isFree,price_anticipada:s.isFree?null:parseFloat(s.priceAnticipada),price_general:s.isFree?null:parseFloat(s.priceGeneral),multimedia:E,organizer_id:t.id,organizer:{full_name:((z=t.user_metadata)==null?void 0:z.full_name)||"Organizador",avatar:((V=t.user_metadata)==null?void 0:V.avatar_url)||""},...r&&{id:n==null?void 0:n.id}};e(D),r||(i({title:"",description:"",type:"pea",province:"",city:"",locality:"",address:"",date:"",time:"",isFree:!1,priceAnticipada:"",priceGeneral:""}),a([]),c([]),w(!1),p(""))}catch(E){d({submit:E.message||"Error al guardar el evento"})}finally{m(!1)}}};return f.jsxs("form",{onSubmit:C,className:"space-y-6 p-6 rounded-xl shadow-md max-w-2xl mx-auto bg-white",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Ttulo del evento *"}),f.jsx("input",{type:"text",name:"title",value:s.title,onChange:y,placeholder:"Ej: Pea de los Chalchaleros",className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.title&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.title})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Tipo de evento *"}),f.jsx("select",{name:"type",value:s.type,onChange:y,className:"w-full border rounded-lg px-4 py-2 mt-1",children:Object.entries(Nf).map(([P,R])=>f.jsx("option",{value:P,children:R},P))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Provincia *"}),f.jsxs("select",{name:"province",value:s.province,onChange:y,className:"w-full border rounded-lg px-4 py-2 mt-1",children:[f.jsx("option",{value:"",children:"Seleccionar provincia"}),D3.map(P=>f.jsx("option",{value:P.name,children:P.name},P.id))]}),u.province&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.province})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Ciudad *"}),f.jsx("input",{type:"text",name:"city",value:s.city,onChange:y,placeholder:"Indicar ciudad",className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.city&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.city})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium",children:"Direccin exacta *"}),f.jsx("input",{type:"text",name:"address",value:s.address,onChange:y,placeholder:"Ej: Av. Belgrano 1234, Centro",className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.address&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.address})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Fecha *"}),f.jsx("input",{type:"date",name:"date",value:s.date,onChange:y,min:new Date().toISOString().split("T")[0],className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.date&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.date})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Hora *"}),f.jsx("input",{type:"time",name:"time",value:s.time,onChange:y,className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.time&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.time})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Precio"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",name:"isFree",checked:s.isFree,onChange:y}),f.jsx("span",{children:"Evento gratuito"})]}),!s.isFree&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[f.jsx("input",{type:"number",name:"priceAnticipada",value:s.priceAnticipada,onChange:y,placeholder:"Precio anticipada ($)",className:"w-full border rounded-lg px-4 py-2"}),f.jsx("input",{type:"number",name:"priceGeneral",value:s.priceGeneral,onChange:y,placeholder:"Precio general ($)",className:"w-full border rounded-lg px-4 py-2"})]}),u.priceAnticipada&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.priceAnticipada}),u.priceGeneral&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.priceGeneral})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Descripcin *"}),f.jsx("textarea",{name:"description",placeholder:"Breve descripcion del evento",value:s.description,onChange:y,rows:5,className:"w-full border rounded-lg px-4 py-2 mt-1"}),u.description&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.description})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:"Foto del evento *"}),f.jsx("input",{type:"file",accept:"image/*,.heic,.heif",onChange:g,className:"mt-1"}),u.files&&f.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.files}),f.jsxs("div",{className:"mt-2 flex gap-4 flex-wrap items-center",children:[l.map((P,R)=>f.jsx("div",{className:"relative w-32 h-32 bg-gray-200 rounded-md overflow-hidden",children:f.jsx("img",{src:P.url,alt:"preview",className:"object-cover w-full h-full"})},R)),o.map((P,R)=>f.jsxs("div",{className:"relative w-32 h-32 bg-gray-200 rounded-md overflow-hidden flex items-center justify-center",children:[f.jsx("img",{src:URL.createObjectURL(P),alt:"preview",className:`object-cover w-full h-full transition-all duration-500 ${x?"blur-sm":"blur-0"}`}),f.jsx("button",{type:"button",onClick:()=>{a([]),w(!1),p("")},className:"absolute top-1 right-1 bg-white rounded-full p-1",children:f.jsx(qt,{size:16})}),x&&f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-white text-sm font-semibold",children:S})]},R)),x&&o.length===0&&f.jsx("p",{className:"text-gray-600 text-sm ml-2",children:S})]})]}),u.submit&&f.jsx("p",{className:"text-red-600 text-center",children:u.submit}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:h||x,className:"bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:h?r?"Actualizando...":"Publicando...":r?"Actualizar evento":"Publicar evento"})})]})}var yb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X0=F.createContext&&F.createContext(yb),O3=["attr","size","title"];function I3(e,t){if(e==null)return{};var n=z3(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z3(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Zl(){return Zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zl.apply(this,arguments)}function J0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J0(Object(n),!0).forEach(function(r){F3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F3(e,t,n){return t=V3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V3(e){var t=B3(e,"string");return typeof t=="symbol"?t:t+""}function B3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vb(e){return e&&e.map((t,n)=>F.createElement(t.tag,ec({key:n},t.attr),vb(t.child)))}function U3(e){return t=>F.createElement(H3,Zl({attr:ec({},e.attr)},t),vb(e.child))}function H3(e){var t=n=>{var{attr:r,size:s,title:i}=e,o=I3(e,O3),a=s||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),F.createElement("svg",Zl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:ec(ec({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&F.createElement("title",null,i),e.children)};return X0!==void 0?F.createElement(X0.Consumer,null,n=>t(n)):t(yb)}function W3(e){return U3({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}const q3=({onLogin:e,onRegister:t})=>{const[n,r]=v.useState(""),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,d]=v.useState("@"),[h,m]=v.useState(!1),[x,w]=v.useState(!1),[S,p]=v.useState(!1),[y,g]=v.useState(!1),[b,k]=v.useState(""),[C,N]=v.useState(!1),[T,A]=v.useState(!1),[P,R]=v.useState(""),z=()=>{r(""),i(""),a(""),c(""),d("@")},V=async M=>{if(M.preventDefault(),p(!0),h)await t({email:n,password:s,fullName:o,birthdate:l,instagram:u})?(z(),setTimeout(()=>{w(!0),p(!1)},300)):(p(!1),alert("Error al registrarse. Verific los datos."));else{if(!n.trim()||!s.trim()){alert("Complet email y contrasea antes de ingresar."),p(!1);return}const O=await e(n,s);p(!1),O||alert("Error al ingresar. Verific tus credenciales.")}},E=()=>{w(!1),m(!1),g(!1),A(!1),R(""),k("")},D=async M=>{M.preventDefault(),N(!0),R("");try{const{error:O}=await G.auth.resetPasswordForEmail(b,{redirectTo:window.location.origin+"/?resetpassword=1"});if(O)throw O;A(!0)}catch(O){R(O.message||"Error al enviar el correo.")}N(!1)};return f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-folkiCream to-white px-4 font-sans",children:f.jsx(ts,{mode:"wait",children:f.jsx(de.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:-40},transition:{duration:.5,ease:"easeInOut"},className:"backdrop-blur-xl bg-white/80 p-6 rounded-xl shadow-2xl w-full max-w-md border border-folkiAmber relative",children:y?f.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"space-y-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-folkiRed text-center",children:"Recuperar contrasea"}),T?f.jsxs("div",{className:"space-y-4 text-center",children:[f.jsx("p",{className:"text-green-600",children:"Te enviamos un correo con las instrucciones para recuperar tu contrasea. Revis tu bandeja de entrada (y spam)."}),f.jsx("button",{onClick:E,className:"bg-folkiRed text-white px-4 py-2 rounded-lg hover:bg-red-700 transition",children:"Aceptar"})]}):f.jsxs("form",{onSubmit:D,className:"space-y-4",children:[f.jsx("input",{type:"email",placeholder:"Tu email registrado",value:b,onChange:M=>k(M.target.value),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),P&&f.jsx("p",{className:"text-red-600",children:P}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("button",{type:"button",onClick:E,className:"text-folkiRed hover:underline",children:"Volver"}),f.jsx("button",{type:"submit",disabled:C,className:`bg-folkiRed text-white px-4 py-2 rounded-lg hover:bg-red-700 transition ${C?"opacity-50 cursor-not-allowed":""}`,children:C?"Enviando...":"Enviar"})]})]})]}):x?f.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4},className:"text-center space-y-6",children:[f.jsx(de.div,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{duration:.6,ease:"easeOut"},className:"flex justify-center",children:f.jsx(W3,{className:"text-green-500 text-6xl"})}),f.jsx("h2",{className:"text-2xl font-bold text-green-600",children:"Gracias por registrarte!"}),f.jsx("p",{className:"text-gray-700",children:"Te enviamos un correo para confirmar tu cuenta. Revis tu bandeja de entrada."}),f.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:E,className:"bg-folkiRed text-white px-4 py-2 rounded-lg hover:bg-red-700 transition",children:"Aceptar"})]}):f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-4 text-folkiRed",children:h?"Registrarse":"Iniciar Sesin"}),f.jsxs("form",{onSubmit:V,className:"space-y-4",children:[h&&f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",placeholder:"Nombre y apellido (visible en la app)",value:o,onChange:M=>a(M.target.value),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),f.jsx("input",{type:"date",placeholder:"Fecha de nacimiento ",value:l,onChange:M=>c(M.target.value),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),f.jsx("input",{type:"text",placeholder:"usuario @instagram (sin arroba)",value:u.replace("@",""),onChange:M=>d(`@${M.target.value}`),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"})]}),f.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:M=>r(M.target.value),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),f.jsx("input",{type:"password",placeholder:"Contrasea (mnimo 6 caracteres)",value:s,onChange:M=>i(M.target.value),required:!0,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),!h&&f.jsx("p",{className:"text-right text-sm text-folkiRed underline cursor-pointer select-none",onClick:()=>g(!0),children:"Olvidaste tu contrasea? Recuper contrasea"}),f.jsx(de.button,{type:"submit",disabled:S,whileHover:{scale:1.02},whileTap:{scale:.97},className:`w-full py-2 rounded-lg text-white font-semibold transition-all duration-300 shadow-md ${h?"bg-green-600 hover:bg-green-700":"bg-folkiRed hover:bg-red-800"} ${S?"opacity-50 cursor-not-allowed":""}`,children:h?S?"Registrando...":"Registrarse":S?"Ingresando...":"Ingresar"})]}),f.jsxs("p",{className:"mt-4 text-sm text-center",children:[h?"Ya tens cuenta?":"No tens cuenta?"," ",f.jsx("button",{className:"text-folkiRed hover:underline",onClick:()=>m(!h),type:"button",children:h?"Iniciar sesin":"Registrarse"})]})]})})})})},K3=({events:e,onDeleteEvent:t})=>{const[n,r]=v.useState(""),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(null),[u,d]=v.useState(null),[h,m]=v.useState(!1),[x,w]=v.useState([]),[S,p]=v.useState(!1),[y,g]=v.useState(""),[b,k]=v.useState("");v.useEffect(()=>{if(!h)return;(async()=>{const{data:j,error:$}=await G.from("profiles").select("id, full_name, avatar");if($){xn.error("Error al cargar usuarios registrados");return}j&&w(j)})()},[h]);const C=_=>new Date(_).toLocaleString("es-AR",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),N=_=>_==="free"||_===null||_===void 0||_===0?"Evento gratuito":`$${_.toLocaleString("es-AR")}`,T=v.useMemo(()=>Array.from(new Set(e.map(_=>_.province).filter(Boolean))),[e]),A=v.useMemo(()=>Array.from(new Set(e.map(_=>_.type).filter(Boolean))),[e]),P=v.useMemo(()=>e.filter(_=>{const j=_.title.toLowerCase().includes(n.toLowerCase()),$=s?_.province===s:!0,L=o?_.type===o:!0;return j&&$&&L}),[e,n,s,o]),R=e.reduce((_,j)=>{var $,L;return _+(((L=($=j.reactions)==null?void 0:$.likes)==null?void 0:L.length)||0)},0),z=e.reduce((_,j)=>{var $,L;return _+(((L=($=j.reactions)==null?void 0:$.attending)==null?void 0:L.length)||0)},0),V=new Set(e.map(_=>{var j;return(j=_.organizer)==null?void 0:j.id}).filter(Boolean)),E=async _=>{d(_)},D=()=>d(null),M=async()=>{if(u)try{const{error:_}=await G.from("events").delete().eq("id",u);if(_)throw _;xn.success("Evento eliminado correctamente"),d(null),setTimeout(()=>{window.location.reload()},1e3)}catch{xn.error("Error al eliminar el evento")}},O=async()=>{if(!y||!b){xn.error("Completa ambos campos");return}const{error:_}=await G.from("announcements").insert({title:y,message:b});_?xn.error("Error al enviar anuncio"):(xn.success("Anuncio enviado"),g(""),k(""),p(!1))};return f.jsxs("div",{className:"min-h-screen bg-transparent text-white p-6 max-w-7xl mx-auto",children:[f.jsx(ON,{position:"top-right"}),f.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Panel de Administracin"}),f.jsx("div",{className:"mb-6",children:f.jsxs("button",{onClick:()=>p(!0),className:"bg-yellow-600 px-4 py-2 rounded hover:bg-yellow-700 flex items-center gap-2",children:[f.jsx(cw,{className:"w-5 h-5"})," Enviar nuevo anuncio"]})}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[f.jsx(za,{title:"Publicaciones",icon:f.jsx(_2,{className:"w-6 h-6"}),value:e.length}),f.jsx(za,{title:"Total Likes",icon:f.jsx(si,{className:"w-6 h-6 text-red-500"}),value:R}),f.jsx(za,{title:"Asistentes",icon:f.jsx(Eu,{className:"w-6 h-6 text-green-500"}),value:z}),f.jsx(za,{title:"Organizadores",icon:f.jsx(uw,{className:"w-6 h-6 text-blue-500"}),value:V.size})]}),f.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-6",children:[f.jsxs("div",{className:"flex items-center bg-gray-800 rounded p-2 flex-grow max-w-md",children:[f.jsx(j2,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsx("input",{type:"text",placeholder:"Buscar evento por ttulo...",className:"bg-transparent outline-none text-white w-full",value:n,onChange:_=>r(_.target.value)})]}),f.jsxs("select",{className:"bg-gray-800 rounded p-2 text-white outline-none max-w-xs",value:s,onChange:_=>i(_.target.value),children:[f.jsx("option",{value:"",children:"Todas las provincias"}),T.map(_=>f.jsx("option",{value:_,children:_},_))]}),f.jsxs("select",{className:"bg-gray-800 rounded p-2 text-white outline-none max-w-xs",value:o,onChange:_=>a(_.target.value),children:[f.jsx("option",{value:"",children:"Todos los tipos"}),A.map(_=>f.jsx("option",{value:_,children:_},_))]})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("button",{onClick:()=>m(!0),className:"bg-teal-600 px-4 py-2 rounded hover:bg-teal-700 flex items-center gap-2",children:[f.jsx(Eu,{className:"w-5 h-5"})," Ver usuarios registrados (",x.length,")"]})}),P.length===0?f.jsx("p",{children:"No hay eventos que coincidan con los filtros."}):f.jsx("div",{className:"grid gap-6",children:P.map(_=>{var j,$,L,I,W,U,X;return f.jsxs("div",{className:"bg-gray-800 p-5 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h2",{className:"text-2xl font-semibold",children:_.title}),f.jsx("button",{onClick:()=>E(_.id),className:"text-red-500 hover:text-red-700","aria-label":"Eliminar evento",children:f.jsx(Bh,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 text-gray-300 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Tn,{className:"w-4 h-4"}),f.jsx("span",{children:C(_.date)})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Vh,{className:"w-4 h-4"}),f.jsx("span",{children:[_.province,_.city].filter(Boolean).join(" - ")})]}),f.jsxs("div",{children:[" Anticipada: ",N(_.price_anticipada)]}),f.jsxs("div",{children:[" General: ",N(_.price_general)]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(si,{className:"w-5 h-5 text-red-500"}),f.jsx("span",{children:(($=(j=_.reactions)==null?void 0:j.likes)==null?void 0:$.length)||0})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Eu,{className:"w-5 h-5 text-green-500"}),f.jsx("span",{children:((I=(L=_.reactions)==null?void 0:L.attending)==null?void 0:I.length)||0})]})]}),f.jsxs("div",{className:"flex items-center gap-3 mt-4 cursor-pointer",onClick:()=>c(_.organizer||null),children:[f.jsx("img",{src:((W=_.organizer)==null?void 0:W.avatar)||"https://via.placeholder.com/40?text=",alt:((U=_.organizer)==null?void 0:U.full_name)||"Organizador",className:"w-10 h-10 rounded-full object-cover"}),f.jsxs("div",{children:[f.jsx("p",{children:"Organizador:"}),f.jsx("p",{className:"font-semibold",children:((X=_.organizer)==null?void 0:X.full_name)||"Desconocido"})]})]})]},_.id)})}),l&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:f.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg max-w-sm w-full relative",children:[f.jsx("button",{onClick:()=>c(null),className:"absolute top-2 right-2 text-gray-400 hover:text-white","aria-label":"Cerrar modal",children:""}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("img",{src:l.avatar||"https://via.placeholder.com/100?text=",alt:l.full_name,className:"w-24 h-24 rounded-full object-cover mb-4"}),f.jsx("h3",{className:"text-2xl font-bold mb-2",children:l.full_name}),f.jsx("p",{className:"text-gray-300",children:l.email||"Sin email registrado"})]})]})}),h&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4 overflow-auto",children:f.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg max-w-lg w-full relative max-h-[80vh] overflow-y-auto",children:[f.jsx("button",{onClick:()=>m(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-white","aria-label":"Cerrar modal usuarios",children:""}),f.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center",children:["Usuarios Registrados (",x.length,")"]}),x.length===0?f.jsx("p",{children:"No hay usuarios registrados."}):f.jsx("ul",{className:"space-y-4",children:x.map(_=>f.jsxs("li",{className:"flex items-center gap-4 bg-gray-700 p-3 rounded",children:[f.jsx("img",{src:_.avatar||"https://via.placeholder.com/40?text=",alt:_.full_name,className:"w-10 h-10 rounded-full object-cover"}),f.jsx("span",{children:_.full_name})]},_.id))})]})}),u&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:f.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg max-w-xs w-full",children:[f.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Confirmar eliminacin"}),f.jsx("p",{className:"mb-6",children:"Ests seguro que deseas eliminar este evento? Esta accin no se puede deshacer."}),f.jsxs("div",{className:"flex justify-end gap-4",children:[f.jsx("button",{onClick:D,className:"bg-gray-600 px-4 py-2 rounded hover:bg-gray-700",children:"Cancelar"}),f.jsx("button",{onClick:M,className:"bg-red-600 px-4 py-2 rounded hover:bg-red-700 text-white",children:"Eliminar"})]})]})}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:f.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg w-full max-w-md",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nuevo Anuncio"}),f.jsx("input",{type:"text",placeholder:"Ttulo",className:"w-full mb-3 p-2 rounded bg-gray-700 text-white outline-none",value:y,onChange:_=>g(_.target.value)}),f.jsx("textarea",{placeholder:"Mensaje del anuncio",className:"w-full mb-3 p-2 rounded bg-gray-700 text-white outline-none h-32",value:b,onChange:_=>k(_.target.value)}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>p(!1),className:"bg-gray-600 px-4 py-2 rounded hover:bg-gray-700",children:"Cancelar"}),f.jsx("button",{onClick:O,className:"bg-yellow-600 px-4 py-2 rounded hover:bg-yellow-700 text-white",children:"Enviar"})]})]})})]})},za=({title:e,value:t,icon:n})=>f.jsxs("div",{className:"bg-gray-800 p-5 rounded-lg shadow flex items-center space-x-4 hover:scale-105 transform transition-transform duration-200 cursor-default",children:[f.jsx("div",{className:"text-gray-400",children:n}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-400",children:e}),f.jsx("div",{className:"text-3xl font-bold text-white",children:t})]})]}),Tm=()=>{const[e,t]=v.useState(null),[n,r]=v.useState(!0),s=async(c,u)=>{const{data:d,error:h}=await G.from("profiles").select("id").eq("id",c).single();if(h&&h.code!=="PGRST116"){console.error("[useAuth] Error al buscar perfil:",h.message);return}if(!d){const m=localStorage.getItem("pendingProfile");let x=u.split("@")[0],w="",S="";if(m)try{const y=JSON.parse(m);x=y.fullName||x,w=y.birthdate||"",S=y.instagram||""}catch{}const{error:p}=await G.from("profiles").insert({id:c,email:u,full_name:x,birthdate:w,instagram:S,created_at:new Date,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(x)}`});p&&console.error("[useAuth] Error al insertar perfil:",p.message),localStorage.removeItem("pendingProfile")}},i=async c=>{await s(c.id,c.email);const{data:u,error:d}=await G.from("profiles").select("*").eq("id",c.id).single();if(d){console.error("[useAuth] Error al cargar perfil:",d.message),t(null);return}t({id:c.id,email:c.email,createdAt:c.created_at,fullName:(u==null?void 0:u.full_name)||"",birthdate:(u==null?void 0:u.birthdate)||"",instagram:(u==null?void 0:u.instagram)||"",role:["maxif.ruiz@gmail.com","eventos.folki@gmail.com"].includes(c.email)?"admin":"user"})};return v.useEffect(()=>{(async()=>{var h;const{data:u}=await G.auth.getSession(),d=(h=u==null?void 0:u.session)==null?void 0:h.user;if(d)await i(d),r(!1);else{const{data:m}=G.auth.onAuthStateChange(async(x,w)=>{x==="SIGNED_IN"&&(w!=null&&w.user)&&await i(w.user),r(!1)});return setTimeout(()=>r(!1),1500),()=>{m.subscription.unsubscribe()}}})()},[]),{user:e,loading:n,login:async(c,u)=>{const{data:d,error:h}=await G.auth.signInWithPassword({email:c,password:u});return h?(console.error("Error al iniciar sesin:",h.message),!1):(d.user&&await s(d.user.id,c),!0)},register:async({email:c,password:u,fullName:d,birthdate:h,instagram:m})=>{const{data:x,error:w}=await G.auth.signUp({email:c,password:u});return w||!x.user?(w!=null&&w.message.includes("email rate limit exceeded")?alert("Ups! Se hicieron muchos registros seguidos. Por favor, esper unos minutos antes de intentar de nuevo."):alert(`Error al registrarse: ${w.message}`),console.error("Error al registrarse:",w.message),!1):(localStorage.setItem("pendingProfile",JSON.stringify({fullName:d,birthdate:h,instagram:m,email:c})),!0)},logout:async()=>{const{error:c}=await G.auth.signOut();return c?(console.error("Error al cerrar sesin:",c.message),!1):(t(null),!0)}}};function xb(){const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState(!1),[o,a]=v.useState("all"),[l,c]=v.useState(""),[u,d]=v.useState(""),h=async()=>{i(!0);try{const{data:g,error:b}=await G.from("events").select(`
          *,
          organizer:profiles!fk_events_organizer(
            id,
            full_name,
            avatar
          ),
          likes(
            id,
            user_id,
            full_name,
            avatar
          ),
          attendances(
            id,
            user_id,
            full_name,
            avatar
          )
        `);if(b)throw b;const k=g.map(T=>{var A,P;return{...T,organizer:T.organizer||null,reactions:{likes:((A=T.likes)==null?void 0:A.map(R=>({id:R.user_id,full_name:R.full_name,avatar:R.avatar})))||[],attending:((P=T.attendances)==null?void 0:P.map(R=>({id:R.user_id,full_name:R.full_name,avatar:R.avatar})))||[]}}});console.log(`fetchEvents: ${(g==null?void 0:g.length)||0} eventos cargados`);const C=JSON.stringify(e),N=JSON.stringify(k);C!==N&&t(k),i(!1)}catch(g){console.error("Error al cargar eventos:",g),i(!1)}};v.useEffect(()=>{let g=e;o&&o!=="all"&&(g=g.filter(b=>b.type===o)),l&&(g=g.filter(b=>b.province===l)),u&&(g=g.filter(b=>b.city===u)),r(g)},[e,o,l,u]),v.useEffect(()=>{h();const g=setInterval(()=>{h()},6e4);return()=>clearInterval(g)},[]);const m=async(g,b)=>{try{const{data:k,error:C}=await G.from(b).select("user_id, full_name, avatar").eq("event_id",g);if(C)throw C;const N=k.map(T=>({id:T.user_id,full_name:T.full_name,avatar:T.avatar}));t(T=>T.map(A=>A.id===g?{...A,reactions:{...A.reactions,[b==="likes"?"likes":"attending"]:N}}:A))}catch(k){console.error(`Error actualizando ${b}:`,k)}};return{events:n,allEvents:e,filters:{selectedType:o,selectedProvince:l,selectedCity:u},addEvent:async g=>{try{const{data:b,error:k}=await G.from("events").insert([{...g}]).select("id").single();if(k)throw k;await h()}catch(b){throw console.error("Error agregando evento:",b),b}},toggleLike:async(g,b)=>{try{const{data:k,error:C}=await G.from("profiles").select("full_name, avatar").eq("id",b).maybeSingle();if(C)throw C;if(!k)throw new Error("Perfil no encontrado");const{data:N,error:T}=await G.from("likes").select("*").eq("event_id",g).eq("user_id",b).maybeSingle();if(T)throw T;if(N){const{error:A}=await G.from("likes").delete().eq("event_id",g).eq("user_id",b);if(A)throw A}else{const{error:A}=await G.from("likes").insert([{event_id:g,user_id:b,full_name:k.full_name,avatar:k.avatar}]);if(A)throw A}await m(g,"likes")}catch(k){console.error("Error en toggleLike:",k)}},toggleAttending:async(g,b)=>{try{const{data:k,error:C}=await G.from("profiles").select("full_name, avatar").eq("id",b).maybeSingle();if(C)throw C;if(!k)throw new Error("Perfil no encontrado");const{data:N,error:T}=await G.from("attendances").select("*").eq("event_id",g).eq("user_id",b).maybeSingle();if(T)throw T;if(N){const{error:A}=await G.from("attendances").delete().eq("event_id",g).eq("user_id",b);if(A)throw A}else{const{error:A}=await G.from("attendances").insert([{event_id:g,user_id:b,full_name:k.full_name,avatar:k.avatar}]);if(A)throw A}await m(g,"attendances")}catch(k){console.error("Error en toggleAttending:",k)}},deleteEvent:async g=>{await G.from("events").delete().eq("id",g),t(b=>b.filter(k=>k.id!==g)),r(b=>b.filter(k=>k.id!==g))},setSelectedType:a,setSelectedProvince:c,setSelectedCity:d,clearFilters:()=>{a("all"),c(""),d("")},loading:s}}function it(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=it(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var wb={exports:{}},bb={},Sb={exports:{}},_b={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=v;function G3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Y3=typeof Object.is=="function"?Object.is:G3,X3=li.useState,J3=li.useEffect,Q3=li.useLayoutEffect,Z3=li.useDebugValue;function eM(e,t){var n=t(),r=X3({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return Q3(function(){s.value=n,s.getSnapshot=t,qu(s)&&i({inst:s})},[e,n,t]),J3(function(){return qu(s)&&i({inst:s}),e(function(){qu(s)&&i({inst:s})})},[e]),Z3(n),n}function qu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Y3(e,n)}catch{return!0}}function tM(e,t){return t()}var nM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tM:eM;_b.useSyncExternalStore=li.useSyncExternalStore!==void 0?li.useSyncExternalStore:nM;Sb.exports=_b;var rM=Sb.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=v,sM=rM;function iM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oM=typeof Object.is=="function"?Object.is:iM,aM=sM.useSyncExternalStore,lM=Fc.useRef,cM=Fc.useEffect,uM=Fc.useMemo,dM=Fc.useDebugValue;bb.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=lM(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=uM(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),s!==void 0&&o.hasValue){var x=o.value;if(s(x,m))return d=x}return d=m}if(x=d,oM(u,m))return x;var w=r(m);return s!==void 0&&s(x,w)?(u=m,x):(u=m,d=w)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,s]);var a=aM(e,i[0],i[1]);return cM(function(){o.hasValue=!0,o.value=a},[a]),dM(a),a};wb.exports=bb;var fM=wb.exports;const hM=qy(fM),mM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Q0=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,m))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(mM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,l);return l},pM=e=>e?Q0(e):Q0,{useDebugValue:gM}=F,{useSyncExternalStoreWithSelector:yM}=hM,vM=e=>e;function kb(e,t=vM,n){const r=yM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gM(r),r}const Z0=(e,t)=>{const n=pM(e),r=(s,i=t)=>kb(n,s,i);return Object.assign(r,n),r},xM=(e,t)=>e?Z0(e,t):Z0;function Qe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var wM={value:()=>{}};function Vc(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hl(n)}function hl(e){this._=e}function bM(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hl.prototype=Vc.prototype={constructor:hl,on:function(e,t){var n=this._,r=bM(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=SM(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=ey(n[s],e.name,t);else if(t==null)for(s in n)n[s]=ey(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hl(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function SM(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function ey(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=wM,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tf="http://www.w3.org/1999/xhtml";const ty={svg:"http://www.w3.org/2000/svg",xhtml:Tf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ty.hasOwnProperty(t)?{space:ty[t],local:e}:e}function _M(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tf&&t.documentElement.namespaceURI===Tf?t.createElement(e):t.createElementNS(n,e)}}function kM(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Eb(e){var t=Bc(e);return(t.local?kM:_M)(t)}function EM(){}function Pm(e){return e==null?EM:function(){return this.querySelector(e)}}function CM(e){typeof e!="function"&&(e=Pm(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new wt(r,this._parents)}function jM(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function NM(){return[]}function Cb(e){return e==null?NM:function(){return this.querySelectorAll(e)}}function TM(e){return function(){return jM(e.apply(this,arguments))}}function PM(e){typeof e=="function"?e=TM(e):e=Cb(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),s.push(l));return new wt(r,s)}function jb(e){return function(){return this.matches(e)}}function Nb(e){return function(t){return t.matches(e)}}var AM=Array.prototype.find;function RM(e){return function(){return AM.call(this.children,e)}}function MM(){return this.firstElementChild}function $M(e){return this.select(e==null?MM:RM(typeof e=="function"?e:Nb(e)))}var LM=Array.prototype.filter;function DM(){return Array.from(this.children)}function OM(e){return function(){return LM.call(this.children,e)}}function IM(e){return this.selectAll(e==null?DM:OM(typeof e=="function"?e:Nb(e)))}function zM(e){typeof e!="function"&&(e=jb(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new wt(r,this._parents)}function Tb(e){return new Array(e.length)}function FM(){return new wt(this._enter||this._groups.map(Tb),this._parents)}function tc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tc.prototype={constructor:tc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function VM(e){return function(){return e}}function BM(e,t,n,r,s,i){for(var o=0,a,l=t.length,c=i.length;o<c;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new tc(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function UM(e,t,n,r,s,i,o){var a,l,c=new Map,u=t.length,d=i.length,h=new Array(u),m;for(a=0;a<u;++a)(l=t[a])&&(h[a]=m=o.call(l,l.__data__,a,t)+"",c.has(m)?s[a]=l:c.set(m,l));for(a=0;a<d;++a)m=o.call(e,i[a],a,i)+"",(l=c.get(m))?(r[a]=l,l.__data__=i[a],c.delete(m)):n[a]=new tc(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(s[a]=l)}function HM(e){return e.__data__}function WM(e,t){if(!arguments.length)return Array.from(this,HM);var n=t?UM:BM,r=this._parents,s=this._groups;typeof e!="function"&&(e=VM(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=s[c],h=d.length,m=qM(e.call(u,u&&u.__data__,c,r)),x=m.length,w=a[c]=new Array(x),S=o[c]=new Array(x),p=l[c]=new Array(h);n(u,d,w,S,p,m,t);for(var y=0,g=0,b,k;y<x;++y)if(b=w[y]){for(y>=g&&(g=y+1);!(k=S[g])&&++g<x;);b._next=k||null}}return o=new wt(o,r),o._enter=a,o._exit=l,o}function qM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KM(){return new wt(this._exit||this._groups.map(Tb),this._parents)}function GM(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function YM(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=r[l],d=c.length,h=a[l]=new Array(d),m,x=0;x<d;++x)(m=c[x]||u[x])&&(h[x]=m);for(;l<s;++l)a[l]=n[l];return new wt(a,this._parents)}function XM(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function JM(e){e||(e=QM);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new wt(s,this._parents).order()}function QM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ZM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function e4(){return Array.from(this)}function t4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function n4(){let e=0;for(const t of this)++e;return e}function r4(){return!this.node()}function s4(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function i4(e){return function(){this.removeAttribute(e)}}function o4(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a4(e,t){return function(){this.setAttribute(e,t)}}function l4(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function c4(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function u4(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function d4(e,t){var n=Bc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?o4:i4:typeof t=="function"?n.local?u4:c4:n.local?l4:a4)(n,t))}function Pb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function f4(e){return function(){this.style.removeProperty(e)}}function h4(e,t,n){return function(){this.style.setProperty(e,t,n)}}function m4(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function p4(e,t,n){return arguments.length>1?this.each((t==null?f4:typeof t=="function"?m4:h4)(e,t,n??"")):ci(this.node(),e)}function ci(e,t){return e.style.getPropertyValue(t)||Pb(e).getComputedStyle(e,null).getPropertyValue(t)}function g4(e){return function(){delete this[e]}}function y4(e,t){return function(){this[e]=t}}function v4(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function x4(e,t){return arguments.length>1?this.each((t==null?g4:typeof t=="function"?v4:y4)(e,t)):this.node()[e]}function Ab(e){return e.trim().split(/^|\s+/)}function Am(e){return e.classList||new Rb(e)}function Rb(e){this._node=e,this._names=Ab(e.getAttribute("class")||"")}Rb.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mb(e,t){for(var n=Am(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function $b(e,t){for(var n=Am(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function w4(e){return function(){Mb(this,e)}}function b4(e){return function(){$b(this,e)}}function S4(e,t){return function(){(t.apply(this,arguments)?Mb:$b)(this,e)}}function _4(e,t){var n=Ab(e+"");if(arguments.length<2){for(var r=Am(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?S4:t?w4:b4)(n,t))}function k4(){this.textContent=""}function E4(e){return function(){this.textContent=e}}function C4(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function j4(e){return arguments.length?this.each(e==null?k4:(typeof e=="function"?C4:E4)(e)):this.node().textContent}function N4(){this.innerHTML=""}function T4(e){return function(){this.innerHTML=e}}function P4(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function A4(e){return arguments.length?this.each(e==null?N4:(typeof e=="function"?P4:T4)(e)):this.node().innerHTML}function R4(){this.nextSibling&&this.parentNode.appendChild(this)}function M4(){return this.each(R4)}function $4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L4(){return this.each($4)}function D4(e){var t=typeof e=="function"?e:Eb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function O4(){return null}function I4(e,t){var n=typeof e=="function"?e:Eb(e),r=t==null?O4:typeof t=="function"?t:Pm(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function z4(){var e=this.parentNode;e&&e.removeChild(this)}function F4(){return this.each(z4)}function V4(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function B4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function U4(e){return this.select(e?B4:V4)}function H4(e){return arguments.length?this.property("__data__",e):this.node().__data__}function W4(e){return function(t){e.call(this,t,this.__data__)}}function q4(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function K4(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function G4(e,t,n){return function(){var r=this.__on,s,i=W4(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Y4(e,t,n){var r=q4(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?G4:K4,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function Lb(e,t,n){var r=Pb(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function X4(e,t){return function(){return Lb(this,e,t)}}function J4(e,t){return function(){return Lb(this,e,t.apply(this,arguments))}}function Q4(e,t){return this.each((typeof t=="function"?J4:X4)(e,t))}function*Z4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var Db=[null];function wt(e,t){this._groups=e,this._parents=t}function aa(){return new wt([[document.documentElement]],Db)}function e$(){return this}wt.prototype=aa.prototype={constructor:wt,select:CM,selectAll:PM,selectChild:$M,selectChildren:IM,filter:zM,data:WM,enter:FM,exit:KM,join:GM,merge:YM,selection:e$,order:XM,sort:JM,call:ZM,nodes:e4,node:t4,size:n4,empty:r4,each:s4,attr:d4,style:p4,property:x4,classed:_4,text:j4,html:A4,raise:M4,lower:L4,append:D4,insert:I4,remove:F4,clone:U4,datum:H4,on:Y4,dispatch:Q4,[Symbol.iterator]:Z4};function Bt(e){return typeof e=="string"?new wt([[document.querySelector(e)]],[document.documentElement]):new wt([[e]],Db)}function t$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function en(e,t){if(e=t$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const n$={passive:!1},Vo={capture:!0,passive:!1};function Ku(e){e.stopImmediatePropagation()}function Ks(e){e.preventDefault(),e.stopImmediatePropagation()}function Ob(e){var t=e.document.documentElement,n=Bt(e).on("dragstart.drag",Ks,Vo);"onselectstart"in t?n.on("selectstart.drag",Ks,Vo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ib(e,t){var n=e.document.documentElement,r=Bt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ks,Vo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fa=e=>()=>e;function Pf(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Pf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function r$(e){return!e.ctrlKey&&!e.button}function s$(){return this.parentNode}function i$(e,t){return t??{x:e.x,y:e.y}}function o$(){return navigator.maxTouchPoints||"ontouchstart"in this}function a$(){var e=r$,t=s$,n=i$,r=o$,s={},i=Vc("start","drag","end"),o=0,a,l,c,u,d=0;function h(b){b.on("mousedown.drag",m).filter(r).on("touchstart.drag",S).on("touchmove.drag",p,n$).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(b,k){if(!(u||!e.call(this,b,k))){var C=g(this,t.call(this,b,k),b,k,"mouse");C&&(Bt(b.view).on("mousemove.drag",x,Vo).on("mouseup.drag",w,Vo),Ob(b.view),Ku(b),c=!1,a=b.clientX,l=b.clientY,C("start",b))}}function x(b){if(Ks(b),!c){var k=b.clientX-a,C=b.clientY-l;c=k*k+C*C>d}s.mouse("drag",b)}function w(b){Bt(b.view).on("mousemove.drag mouseup.drag",null),Ib(b.view,c),Ks(b),s.mouse("end",b)}function S(b,k){if(e.call(this,b,k)){var C=b.changedTouches,N=t.call(this,b,k),T=C.length,A,P;for(A=0;A<T;++A)(P=g(this,N,b,k,C[A].identifier,C[A]))&&(Ku(b),P("start",b,C[A]))}}function p(b){var k=b.changedTouches,C=k.length,N,T;for(N=0;N<C;++N)(T=s[k[N].identifier])&&(Ks(b),T("drag",b,k[N]))}function y(b){var k=b.changedTouches,C=k.length,N,T;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<C;++N)(T=s[k[N].identifier])&&(Ku(b),T("end",b,k[N]))}function g(b,k,C,N,T,A){var P=i.copy(),R=en(A||C,k),z,V,E;if((E=n.call(b,new Pf("beforestart",{sourceEvent:C,target:h,identifier:T,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:P}),N))!=null)return z=E.x-R[0]||0,V=E.y-R[1]||0,function D(M,O,_){var j=R,$;switch(M){case"start":s[T]=D,$=o++;break;case"end":delete s[T],--o;case"drag":R=en(_||O,k),$=o;break}P.call(M,b,new Pf(M,{sourceEvent:O,subject:E,target:h,identifier:T,active:$,x:R[0]+z,y:R[1]+V,dx:R[0]-j[0],dy:R[1]-j[1],dispatch:P}),N)}}return h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Fa(!!b),h):e},h.container=function(b){return arguments.length?(t=typeof b=="function"?b:Fa(b),h):t},h.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Fa(b),h):n},h.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:Fa(!!b),h):r},h.on=function(){var b=i.on.apply(i,arguments);return b===i?h:b},h.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,h):Math.sqrt(d)},h}function Rm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zb(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function la(){}var Bo=.7,nc=1/Bo,Gs="\\s*([+-]?\\d+)\\s*",Uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l$=/^#([0-9a-f]{3,8})$/,c$=new RegExp(`^rgb\\(${Gs},${Gs},${Gs}\\)$`),u$=new RegExp(`^rgb\\(${ln},${ln},${ln}\\)$`),d$=new RegExp(`^rgba\\(${Gs},${Gs},${Gs},${Uo}\\)$`),f$=new RegExp(`^rgba\\(${ln},${ln},${ln},${Uo}\\)$`),h$=new RegExp(`^hsl\\(${Uo},${ln},${ln}\\)$`),m$=new RegExp(`^hsla\\(${Uo},${ln},${ln},${Uo}\\)$`),ny={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rm(la,Ho,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ry,formatHex:ry,formatHex8:p$,formatHsl:g$,formatRgb:sy,toString:sy});function ry(){return this.rgb().formatHex()}function p$(){return this.rgb().formatHex8()}function g$(){return Fb(this).formatHsl()}function sy(){return this.rgb().formatRgb()}function Ho(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?iy(t):n===3?new dt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Va(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Va(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c$.exec(e))?new dt(t[1],t[2],t[3],1):(t=u$.exec(e))?new dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d$.exec(e))?Va(t[1],t[2],t[3],t[4]):(t=f$.exec(e))?Va(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h$.exec(e))?ly(t[1],t[2]/100,t[3]/100,1):(t=m$.exec(e))?ly(t[1],t[2]/100,t[3]/100,t[4]):ny.hasOwnProperty(e)?iy(ny[e]):e==="transparent"?new dt(NaN,NaN,NaN,0):null}function iy(e){return new dt(e>>16&255,e>>8&255,e&255,1)}function Va(e,t,n,r){return r<=0&&(e=t=n=NaN),new dt(e,t,n,r)}function y$(e){return e instanceof la||(e=Ho(e)),e?(e=e.rgb(),new dt(e.r,e.g,e.b,e.opacity)):new dt}function Af(e,t,n,r){return arguments.length===1?y$(e):new dt(e,t,n,r??1)}function dt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rm(dt,Af,zb(la,{brighter(e){return e=e==null?nc:Math.pow(nc,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dt(Yr(this.r),Yr(this.g),Yr(this.b),rc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oy,formatHex:oy,formatHex8:v$,formatRgb:ay,toString:ay}));function oy(){return`#${Ur(this.r)}${Ur(this.g)}${Ur(this.b)}`}function v$(){return`#${Ur(this.r)}${Ur(this.g)}${Ur(this.b)}${Ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function ay(){const e=rc(this.opacity);return`${e===1?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${e===1?")":`, ${e})`}`}function rc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ur(e){return e=Yr(e),(e<16?"0":"")+e.toString(16)}function ly(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ut(e,t,n,r)}function Fb(e){if(e instanceof Ut)return new Ut(e.h,e.s,e.l,e.opacity);if(e instanceof la||(e=Ho(e)),!e)return new Ut;if(e instanceof Ut)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Ut(o,a,l,e.opacity)}function x$(e,t,n,r){return arguments.length===1?Fb(e):new Ut(e,t,n,r??1)}function Ut(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rm(Ut,x$,zb(la,{brighter(e){return e=e==null?nc:Math.pow(nc,e),new Ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new Ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new dt(Gu(e>=240?e-240:e+120,s,r),Gu(e,s,r),Gu(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Ut(cy(this.h),Ba(this.s),Ba(this.l),rc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rc(this.opacity);return`${e===1?"hsl(":"hsla("}${cy(this.h)}, ${Ba(this.s)*100}%, ${Ba(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cy(e){return e=(e||0)%360,e<0?e+360:e}function Ba(e){return Math.max(0,Math.min(1,e||0))}function Gu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vb=e=>()=>e;function w$(e,t){return function(n){return e+n*t}}function b$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function S$(e){return(e=+e)==1?Bb:function(t,n){return n-t?b$(t,n,e):Vb(isNaN(t)?n:t)}}function Bb(e,t){var n=t-e;return n?w$(e,n):Vb(isNaN(e)?t:e)}const uy=function e(t){var n=S$(t);function r(s,i){var o=n((s=Af(s)).r,(i=Af(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=Bb(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Rf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yu=new RegExp(Rf.source,"g");function _$(e){return function(){return e}}function k$(e){return function(t){return e(t)+""}}function E$(e,t){var n=Rf.lastIndex=Yu.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Rf.exec(e))&&(s=Yu.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Wn(r,s)})),n=Yu.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?k$(l[0].x):_$(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var dy=180/Math.PI,Mf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ub(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*dy,skewX:Math.atan(l)*dy,scaleX:o,scaleY:a}}var Ua;function C$(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mf:Ub(t.a,t.b,t.c,t.d,t.e,t.f)}function j$(e){return e==null||(Ua||(Ua=document.createElementNS("http://www.w3.org/2000/svg","g")),Ua.setAttribute("transform",e),!(e=Ua.transform.baseVal.consolidate()))?Mf:(e=e.matrix,Ub(e.a,e.b,e.c,e.d,e.e,e.f))}function Hb(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function i(c,u,d,h,m,x){if(c!==d||u!==h){var w=m.push("translate(",null,t,null,n);x.push({i:w-4,x:Wn(c,d)},{i:w-2,x:Wn(u,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(s(d)+"rotate(",null,r)-2,x:Wn(c,u)})):u&&d.push(s(d)+"rotate("+u+r)}function a(c,u,d,h){c!==u?h.push({i:d.push(s(d)+"skewX(",null,r)-2,x:Wn(c,u)}):u&&d.push(s(d)+"skewX("+u+r)}function l(c,u,d,h,m,x){if(c!==d||u!==h){var w=m.push(s(m)+"scale(",null,",",null,")");x.push({i:w-4,x:Wn(c,d)},{i:w-2,x:Wn(u,h)})}else(d!==1||h!==1)&&m.push(s(m)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,h),o(c.rotate,u.rotate,d,h),a(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(m){for(var x=-1,w=h.length,S;++x<w;)d[(S=h[x]).i]=S.x(m);return d.join("")}}}var N$=Hb(C$,"px, ","px)","deg)"),T$=Hb(j$,", ",")",")"),P$=1e-12;function fy(e){return((e=Math.exp(e))+1/e)/2}function A$(e){return((e=Math.exp(e))-1/e)/2}function R$(e){return((e=Math.exp(2*e))-1)/(e+1)}const M$=function e(t,n,r){function s(i,o){var a=i[0],l=i[1],c=i[2],u=o[0],d=o[1],h=o[2],m=u-a,x=d-l,w=m*m+x*x,S,p;if(w<P$)p=Math.log(h/c)/t,S=function(N){return[a+N*m,l+N*x,c*Math.exp(t*N*p)]};else{var y=Math.sqrt(w),g=(h*h-c*c+r*w)/(2*c*n*y),b=(h*h-c*c-r*w)/(2*h*n*y),k=Math.log(Math.sqrt(g*g+1)-g),C=Math.log(Math.sqrt(b*b+1)-b);p=(C-k)/t,S=function(N){var T=N*p,A=fy(k),P=c/(n*y)*(A*R$(t*T+k)-A$(k));return[a+P*m,l+P*x,c*A/fy(t*T+k)]}}return S.duration=p*1e3*t/Math.SQRT2,S}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,l=a*a;return e(o,a,l)},s}(Math.SQRT2,2,4);var ui=0,Ki=0,Li=0,Wb=1e3,sc,Gi,ic=0,ns=0,Uc=0,Wo=typeof performance=="object"&&performance.now?performance:Date,qb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mm(){return ns||(qb($$),ns=Wo.now()+Uc)}function $$(){ns=0}function oc(){this._call=this._time=this._next=null}oc.prototype=Kb.prototype={constructor:oc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mm():+n)+(t==null?0:+t),!this._next&&Gi!==this&&(Gi?Gi._next=this:sc=this,Gi=this),this._call=e,this._time=n,$f()},stop:function(){this._call&&(this._call=null,this._time=1/0,$f())}};function Kb(e,t,n){var r=new oc;return r.restart(e,t,n),r}function L$(){Mm(),++ui;for(var e=sc,t;e;)(t=ns-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ui}function hy(){ns=(ic=Wo.now())+Uc,ui=Ki=0;try{L$()}finally{ui=0,O$(),ns=0}}function D$(){var e=Wo.now(),t=e-ic;t>Wb&&(Uc-=t,ic=e)}function O$(){for(var e,t=sc,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sc=n);Gi=e,$f(r)}function $f(e){if(!ui){Ki&&(Ki=clearTimeout(Ki));var t=e-ns;t>24?(e<1/0&&(Ki=setTimeout(hy,e-Wo.now()-Uc)),Li&&(Li=clearInterval(Li))):(Li||(ic=Wo.now(),Li=setInterval(D$,Wb)),ui=1,qb(hy))}}function my(e,t,n){var r=new oc;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var I$=Vc("start","end","cancel","interrupt"),z$=[],Gb=0,py=1,Lf=2,ml=3,gy=4,Df=5,pl=6;function Hc(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;F$(e,n,{name:t,index:r,group:s,on:I$,tween:z$,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Gb})}function $m(e,t){var n=Yt(e,t);if(n.state>Gb)throw new Error("too late; already scheduled");return n}function un(e,t){var n=Yt(e,t);if(n.state>ml)throw new Error("too late; already running");return n}function Yt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function F$(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Kb(i,0,n.time);function i(c){n.state=py,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,h,m;if(n.state!==py)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===ml)return my(o);m.state===gy?(m.state=pl,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=pl,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(my(function(){n.state===ml&&(n.state=gy,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Lf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Lf){for(n.state=ml,s=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++d]=m);s.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Df,1),d=-1,h=s.length;++d<h;)s[d].call(e,u);n.state===Df&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=pl,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function gl(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Lf&&r.state<Df,r.state=pl,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function V$(e){return this.each(function(){gl(this,e)})}function B$(e,t){var n,r;return function(){var s=un(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function U$(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=un(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}i.tween=s}}function H$(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Yt(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?B$:U$)(n,e,t))}function Lm(e,t,n){var r=e._id;return e.each(function(){var s=un(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Yt(s,r).value[t]}}function Yb(e,t){var n;return(typeof t=="number"?Wn:t instanceof Ho?uy:(n=Ho(t))?(t=n,uy):E$)(e,t)}function W$(e){return function(){this.removeAttribute(e)}}function q$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K$(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function G$(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function Y$(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function X$(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function J$(e,t){var n=Bc(e),r=n==="transform"?T$:Yb;return this.attrTween(e,typeof t=="function"?(n.local?X$:Y$)(n,r,Lm(this,"attr."+e,t)):t==null?(n.local?q$:W$)(n):(n.local?G$:K$)(n,r,t))}function Q$(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Z$(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function e5(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Z$(e,i)),n}return s._value=t,s}function t5(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Q$(e,i)),n}return s._value=t,s}function n5(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Bc(e);return this.tween(n,(r.local?e5:t5)(r,t))}function r5(e,t){return function(){$m(this,e).delay=+t.apply(this,arguments)}}function s5(e,t){return t=+t,function(){$m(this,e).delay=t}}function i5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r5:s5)(t,e)):Yt(this.node(),t).delay}function o5(e,t){return function(){un(this,e).duration=+t.apply(this,arguments)}}function a5(e,t){return t=+t,function(){un(this,e).duration=t}}function l5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?o5:a5)(t,e)):Yt(this.node(),t).duration}function c5(e,t){if(typeof t!="function")throw new Error;return function(){un(this,e).ease=t}}function u5(e){var t=this._id;return arguments.length?this.each(c5(t,e)):Yt(this.node(),t).ease}function d5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;un(this,e).ease=n}}function f5(e){if(typeof e!="function")throw new Error;return this.each(d5(this._id,e))}function h5(e){typeof e!="function"&&(e=jb(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Mn(r,this._parents,this._name,this._id)}function m5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,d=o[a]=new Array(u),h,m=0;m<u;++m)(h=l[m]||c[m])&&(d[m]=h);for(;a<r;++a)o[a]=t[a];return new Mn(o,this._parents,this._name,this._id)}function p5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function g5(e,t,n){var r,s,i=p5(t)?$m:un;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function y5(e,t){var n=this._id;return arguments.length<2?Yt(this.node(),n).on.on(e):this.each(g5(n,e,t))}function v5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function x5(){return this.on("end.remove",v5(this._id))}function w5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pm(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,c=i[o]=new Array(l),u,d,h=0;h<l;++h)(u=a[h])&&(d=e.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,Hc(c[h],t,n,h,c,Yt(u,n)));return new Mn(i,this._parents,t,n)}function b5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cb(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=e.call(u,u.__data__,d,l),m,x=Yt(u,n),w=0,S=h.length;w<S;++w)(m=h[w])&&Hc(m,t,n,w,h,x);i.push(h),o.push(u)}return new Mn(i,o,t,n)}var S5=aa.prototype.constructor;function _5(){return new S5(this._groups,this._parents)}function k5(e,t){var n,r,s;return function(){var i=ci(this,e),o=(this.style.removeProperty(e),ci(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function Xb(e){return function(){this.style.removeProperty(e)}}function E5(e,t,n){var r,s=n+"",i;return function(){var o=ci(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function C5(e,t,n){var r,s,i;return function(){var o=ci(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),ci(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function j5(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=un(this,e),c=l.on,u=l.value[i]==null?a||(a=Xb(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(o,s=u),l.on=r}}function N5(e,t,n){var r=(e+="")=="transform"?N$:Yb;return t==null?this.styleTween(e,k5(e,r)).on("end.style."+e,Xb(e)):typeof t=="function"?this.styleTween(e,C5(e,r,Lm(this,"style."+e,t))).each(j5(this._id,e)):this.styleTween(e,E5(e,r,t),n).on("end.style."+e,null)}function T5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function P5(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&T5(e,o,n)),r}return i._value=t,i}function A5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,P5(e,t,n??""))}function R5(e){return function(){this.textContent=e}}function M5(e){return function(){var t=e(this);this.textContent=t??""}}function $5(e){return this.tween("text",typeof e=="function"?M5(Lm(this,"text",e)):R5(e==null?"":e+""))}function L5(e){return function(t){this.textContent=e.call(this,t)}}function D5(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&L5(s)),t}return r._value=e,r}function O5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,D5(e))}function I5(){for(var e=this._name,t=this._id,n=Jb(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Yt(l,t);Hc(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Mn(r,this._parents,e,n)}function z5(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var c=un(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&i()})}var F5=0;function Mn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Jb(){return++F5}var mn=aa.prototype;Mn.prototype={constructor:Mn,select:w5,selectAll:b5,selectChild:mn.selectChild,selectChildren:mn.selectChildren,filter:h5,merge:m5,selection:_5,transition:I5,call:mn.call,nodes:mn.nodes,node:mn.node,size:mn.size,empty:mn.empty,each:mn.each,on:y5,attr:J$,attrTween:n5,style:N5,styleTween:A5,text:$5,textTween:O5,remove:x5,tween:H$,delay:i5,duration:l5,ease:u5,easeVarying:f5,end:z5,[Symbol.iterator]:mn[Symbol.iterator]};function V5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var B5={time:null,delay:0,duration:250,ease:V5};function U5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function H5(e){var t,n;e instanceof Mn?(t=e._id,e=e._name):(t=Jb(),(n=B5).time=Mm(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Hc(l,e,t,c,o,n||U5(l,t));return new Mn(r,this._parents,e,t)}aa.prototype.interrupt=V$;aa.prototype.transition=H5;const Ha=e=>()=>e;function W5(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Sn(e,t,n){this.k=e,this.x=t,this.y=n}Sn.prototype={constructor:Sn,scale:function(e){return e===1?this:new Sn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Sn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lr=new Sn(1,0,0);Sn.prototype;function Xu(e){e.stopImmediatePropagation()}function Di(e){e.preventDefault(),e.stopImmediatePropagation()}function q5(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function K5(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function yy(){return this.__zoom||lr}function G5(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Y5(){return navigator.maxTouchPoints||"ontouchstart"in this}function X5(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function J5(){var e=q5,t=K5,n=X5,r=G5,s=Y5,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=M$,c=Vc("start","zoom","end"),u,d,h,m=500,x=150,w=0,S=10;function p(E){E.property("__zoom",yy).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",P).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(E,D,M,O){var _=E.selection?E.selection():E;_.property("__zoom",yy),E!==_?k(E,D,M,O):_.interrupt().each(function(){C(this,arguments).event(O).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},p.scaleBy=function(E,D,M,O){p.scaleTo(E,function(){var _=this.__zoom.k,j=typeof D=="function"?D.apply(this,arguments):D;return _*j},M,O)},p.scaleTo=function(E,D,M,O){p.transform(E,function(){var _=t.apply(this,arguments),j=this.__zoom,$=M==null?b(_):typeof M=="function"?M.apply(this,arguments):M,L=j.invert($),I=typeof D=="function"?D.apply(this,arguments):D;return n(g(y(j,I),$,L),_,o)},M,O)},p.translateBy=function(E,D,M,O){p.transform(E,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),o)},null,O)},p.translateTo=function(E,D,M,O,_){p.transform(E,function(){var j=t.apply(this,arguments),$=this.__zoom,L=O==null?b(j):typeof O=="function"?O.apply(this,arguments):O;return n(lr.translate(L[0],L[1]).scale($.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof M=="function"?-M.apply(this,arguments):-M),j,o)},O,_)};function y(E,D){return D=Math.max(i[0],Math.min(i[1],D)),D===E.k?E:new Sn(D,E.x,E.y)}function g(E,D,M){var O=D[0]-M[0]*E.k,_=D[1]-M[1]*E.k;return O===E.x&&_===E.y?E:new Sn(E.k,O,_)}function b(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function k(E,D,M,O){E.on("start.zoom",function(){C(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(O).end()}).tween("zoom",function(){var _=this,j=arguments,$=C(_,j).event(O),L=t.apply(_,j),I=M==null?b(L):typeof M=="function"?M.apply(_,j):M,W=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),U=_.__zoom,X=typeof D=="function"?D.apply(_,j):D,B=l(U.invert(I).concat(W/U.k),X.invert(I).concat(W/X.k));return function(q){if(q===1)q=X;else{var K=B(q),te=W/K[2];q=new Sn(te,I[0]-K[0]*te,I[1]-K[1]*te)}$.zoom(null,q)}})}function C(E,D,M){return!M&&E.__zooming||new N(E,D)}function N(E,D){this.that=E,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,D),this.taps=0}N.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,D){return this.mouse&&E!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var D=Bt(this.that).datum();c.call(E,this.that,new W5(E,{sourceEvent:this.sourceEvent,target:p,type:E,transform:this.that.__zoom,dispatch:c}),D)}};function T(E,...D){if(!e.apply(this,arguments))return;var M=C(this,D).event(E),O=this.__zoom,_=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,r.apply(this,arguments)))),j=en(E);if(M.wheel)(M.mouse[0][0]!==j[0]||M.mouse[0][1]!==j[1])&&(M.mouse[1]=O.invert(M.mouse[0]=j)),clearTimeout(M.wheel);else{if(O.k===_)return;M.mouse=[j,O.invert(j)],gl(this),M.start()}Di(E),M.wheel=setTimeout($,x),M.zoom("mouse",n(g(y(O,_),M.mouse[0],M.mouse[1]),M.extent,o));function $(){M.wheel=null,M.end()}}function A(E,...D){if(h||!e.apply(this,arguments))return;var M=E.currentTarget,O=C(this,D,!0).event(E),_=Bt(E.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",W,!0),j=en(E,M),$=E.clientX,L=E.clientY;Ob(E.view),Xu(E),O.mouse=[j,this.__zoom.invert(j)],gl(this),O.start();function I(U){if(Di(U),!O.moved){var X=U.clientX-$,B=U.clientY-L;O.moved=X*X+B*B>w}O.event(U).zoom("mouse",n(g(O.that.__zoom,O.mouse[0]=en(U,M),O.mouse[1]),O.extent,o))}function W(U){_.on("mousemove.zoom mouseup.zoom",null),Ib(U.view,O.moved),Di(U),O.event(U).end()}}function P(E,...D){if(e.apply(this,arguments)){var M=this.__zoom,O=en(E.changedTouches?E.changedTouches[0]:E,this),_=M.invert(O),j=M.k*(E.shiftKey?.5:2),$=n(g(y(M,j),O,_),t.apply(this,D),o);Di(E),a>0?Bt(this).transition().duration(a).call(k,$,O,E):Bt(this).call(p.transform,$,O,E)}}function R(E,...D){if(e.apply(this,arguments)){var M=E.touches,O=M.length,_=C(this,D,E.changedTouches.length===O).event(E),j,$,L,I;for(Xu(E),$=0;$<O;++$)L=M[$],I=en(L,this),I=[I,this.__zoom.invert(I),L.identifier],_.touch0?!_.touch1&&_.touch0[2]!==I[2]&&(_.touch1=I,_.taps=0):(_.touch0=I,j=!0,_.taps=1+!!u);u&&(u=clearTimeout(u)),j&&(_.taps<2&&(d=I[0],u=setTimeout(function(){u=null},m)),gl(this),_.start())}}function z(E,...D){if(this.__zooming){var M=C(this,D).event(E),O=E.changedTouches,_=O.length,j,$,L,I;for(Di(E),j=0;j<_;++j)$=O[j],L=en($,this),M.touch0&&M.touch0[2]===$.identifier?M.touch0[0]=L:M.touch1&&M.touch1[2]===$.identifier&&(M.touch1[0]=L);if($=M.that.__zoom,M.touch1){var W=M.touch0[0],U=M.touch0[1],X=M.touch1[0],B=M.touch1[1],q=(q=X[0]-W[0])*q+(q=X[1]-W[1])*q,K=(K=B[0]-U[0])*K+(K=B[1]-U[1])*K;$=y($,Math.sqrt(q/K)),L=[(W[0]+X[0])/2,(W[1]+X[1])/2],I=[(U[0]+B[0])/2,(U[1]+B[1])/2]}else if(M.touch0)L=M.touch0[0],I=M.touch0[1];else return;M.zoom("touch",n(g($,L,I),M.extent,o))}}function V(E,...D){if(this.__zooming){var M=C(this,D).event(E),O=E.changedTouches,_=O.length,j,$;for(Xu(E),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),j=0;j<_;++j)$=O[j],M.touch0&&M.touch0[2]===$.identifier?delete M.touch0:M.touch1&&M.touch1[2]===$.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&($=en($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<S)){var L=Bt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return p.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:Ha(+E),p):r},p.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Ha(!!E),p):e},p.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:Ha(!!E),p):s},p.extent=function(E){return arguments.length?(t=typeof E=="function"?E:Ha([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),p):t},p.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],p):[i[0],i[1]]},p.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(E){return arguments.length?(n=E,p):n},p.duration=function(E){return arguments.length?(a=+E,p):a},p.interpolate=function(E){return arguments.length?(l=E,p):l},p.on=function(){var E=c.on.apply(c,arguments);return E===c?p:E},p.clickDistance=function(E){return arguments.length?(w=(E=+E)*E,p):Math.sqrt(w)},p.tapDistance=function(E){return arguments.length?(S=+E,p):S},p}const Wc=v.createContext(null),Q5=Wc.Provider,$n={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Qb=$n.error001();function ke(e,t){const n=v.useContext(Wc);if(n===null)throw new Error(Qb);return kb(n,e,t)}const ze=()=>{const e=v.useContext(Wc);if(e===null)throw new Error(Qb);return v.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Z5=e=>e.userSelectionActive?"none":"all";function Zb({position:e,children:t,className:n,style:r,...s}){const i=ke(Z5),o=`${e}`.split("-");return F.createElement("div",{className:it(["react-flow__panel",n,...o]),style:{...r,pointerEvents:i},...s},t)}function eL({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:F.createElement(Zb,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},F.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const tL=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u})=>{const d=v.useRef(null),[h,m]=v.useState({x:0,y:0,width:0,height:0}),x=it(["react-flow__edge-textwrapper",c]);return v.useEffect(()=>{if(d.current){const w=d.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:F.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...u},s&&F.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),F.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),l)};var nL=v.memo(tL);const Dm=e=>({width:e.offsetWidth,height:e.offsetHeight}),di=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Om=(e={x:0,y:0},t)=>({x:di(e.x,t[0][0],t[1][0]),y:di(e.y,t[0][1],t[1][1])}),vy=(e,t,n)=>e<t?di(Math.abs(e-t),1,50)/50:e>n?-di(Math.abs(e-n),1,50)/50:0,eS=(e,t)=>{const n=vy(e.x,35,t.width-35)*20,r=vy(e.y,35,t.height-35)*20;return[n,r]},tS=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},rL=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Im=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),sL=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),xy=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Of=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},iL=e=>Nt(e.width)&&Nt(e.height)&&Nt(e.x)&&Nt(e.y),Nt=e=>!isNaN(e)&&isFinite(e),Ne=Symbol.for("internals"),nS=["Enter"," ","Escape"],oL=(e,t)=>{},aL=e=>"nativeEvent"in e;function If(e){var s,i;const t=aL(e)?e.nativeEvent:e,n=((i=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const rS=e=>"clientX"in e,cr=(e,t)=>{var i,o;const n=rS(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},ac=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},ca=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:m=20})=>F.createElement(F.Fragment,null,F.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),m&&F.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),s&&Nt(n)&&Nt(r)?F.createElement(nL,{x:n,y:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);ca.displayName="BaseEdge";function Oi(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(i=>i.id===e);s&&n(r,{...s})}}function sS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[i,a,s,o]}function iS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const l=e*.125+s*.375+o*.375+n*.125,c=t*.125+i*.375+a*.375+r*.125,u=Math.abs(l-e),d=Math.abs(c-t);return[l,c,u,d]}var rs;(function(e){e.Strict="strict",e.Loose="loose"})(rs||(rs={}));var Hr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Hr||(Hr={}));var qo;(function(e){e.Partial="partial",e.Full="full"})(qo||(qo={}));var Jn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Jn||(Jn={}));var lc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(lc||(lc={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));function wy({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===J.Left||e===J.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function oS({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:i=J.Top}){const[o,a]=wy({pos:n,x1:e,y1:t,x2:r,y2:s}),[l,c]=wy({pos:i,x1:r,y1:s,x2:e,y2:t}),[u,d,h,m]=iS({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${o},${a} ${l},${c} ${r},${s}`,u,d,h,m]}const zm=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:i=J.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:x,interactionWidth:w})=>{const[S,p,y]=oS({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i});return F.createElement(ca,{path:S,labelX:p,labelY:y,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:x,interactionWidth:w})});zm.displayName="SimpleBezierEdge";const by={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},lL=({source:e,sourcePosition:t=J.Bottom,target:n})=>t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Sy=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function cL({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:s,offset:i}){const o=by[t],a=by[r],l={x:e.x+o.x*i,y:e.y+o.y*i},c={x:n.x+a.x*i,y:n.y+a.y*i},u=lL({source:l,sourcePosition:t,target:c}),d=u.x!==0?"x":"y",h=u[d];let m=[],x,w;const S={x:0,y:0},p={x:0,y:0},[y,g,b,k]=sS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){x=s.x??y,w=s.y??g;const N=[{x,y:l.y},{x,y:c.y}],T=[{x:l.x,y:w},{x:c.x,y:w}];o[d]===h?m=d==="x"?N:T:m=d==="x"?T:N}else{const N=[{x:l.x,y:c.y}],T=[{x:c.x,y:l.y}];if(d==="x"?m=o.x===h?T:N:m=o.y===h?N:T,t===r){const V=Math.abs(e[d]-n[d]);if(V<=i){const E=Math.min(i-1,i-V);o[d]===h?S[d]=(l[d]>e[d]?-1:1)*E:p[d]=(c[d]>n[d]?-1:1)*E}}if(t!==r){const V=d==="x"?"y":"x",E=o[d]===a[V],D=l[V]>c[V],M=l[V]<c[V];(o[d]===1&&(!E&&D||E&&M)||o[d]!==1&&(!E&&M||E&&D))&&(m=d==="x"?N:T)}const A={x:l.x+S.x,y:l.y+S.y},P={x:c.x+p.x,y:c.y+p.y},R=Math.max(Math.abs(A.x-m[0].x),Math.abs(P.x-m[0].x)),z=Math.max(Math.abs(A.y-m[0].y),Math.abs(P.y-m[0].y));R>=z?(x=(A.x+P.x)/2,w=m[0].y):(x=m[0].x,w=(A.y+P.y)/2)}return[[e,{x:l.x+S.x,y:l.y+S.y},...m,{x:c.x+p.x,y:c.y+p.y},n],x,w,b,k]}function uL(e,t,n,r){const s=Math.min(Sy(e,t)/2,Sy(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+s*c},${o}Q ${i},${o} ${i},${o+s*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${o+s*l}Q ${i},${o} ${i+s*a},${o}`}function zf({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:i=J.Top,borderRadius:o=5,centerX:a,centerY:l,offset:c=20}){const[u,d,h,m,x]=cL({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:a,y:l},offset:c});return[u.reduce((S,p,y)=>{let g="";return y>0&&y<u.length-1?g=uL(u[y-1],p,u[y+1],o):g=`${y===0?"M":"L"}${p.x} ${p.y}`,S+=g,S},""),d,h,m,x]}const qc=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:d=J.Bottom,targetPosition:h=J.Top,markerEnd:m,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[p,y,g]=zf({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return F.createElement(ca,{path:p,labelX:y,labelY:g,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:m,markerStart:x,interactionWidth:S})});qc.displayName="SmoothStepEdge";const Fm=v.memo(e=>{var t;return F.createElement(qc,{...e,pathOptions:v.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Fm.displayName="StepEdge";function dL({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,a]=sS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,a]}const Vm=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:m})=>{const[x,w,S]=dL({sourceX:e,sourceY:t,targetX:n,targetY:r});return F.createElement(ca,{path:x,labelX:w,labelY:S,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:m})});Vm.displayName="StraightEdge";function Wa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _y({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case J.Left:return[t-Wa(t-r,i),n];case J.Right:return[t+Wa(r-t,i),n];case J.Top:return[t,n-Wa(n-s,i)];case J.Bottom:return[t,n+Wa(s-n,i)]}}function aS({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:i=J.Top,curvature:o=.25}){const[a,l]=_y({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[c,u]=_y({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[d,h,m,x]=iS({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${s}`,d,h,m,x]}const cc=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:i=J.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[p,y,g]=aS({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i,curvature:w==null?void 0:w.curvature});return F.createElement(ca,{path:p,labelX:y,labelY:g,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:x,interactionWidth:S})});cc.displayName="BezierEdge";const Bm=v.createContext(null),fL=Bm.Provider;Bm.Consumer;const hL=()=>v.useContext(Bm),mL=e=>"id"in e&&"source"in e&&"target"in e,pL=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Ff=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,gL=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),lS=(e,t)=>{if(!e.source||!e.target)return t;let n;return mL(e)?n={...e}:n={...e,id:pL(e)},gL(n,t)?t:t.concat(n)},Vf=({x:e,y:t},[n,r,s],i,[o,a])=>{const l={x:(e-n)/s,y:(t-r)/s};return i?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},cS=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),Ys=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},Um=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:i,y:o}=Ys(s,t).positionAbsolute;return rL(r,Im({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return sL(n)},uS=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1,a=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},c=[];return e.forEach(u=>{const{width:d,height:h,selectable:m=!0,hidden:x=!1}=u;if(o&&!m||x)return!1;const{positionAbsolute:w}=Ys(u,a),S={x:w.x,y:w.y,width:d||0,height:h||0},p=Of(l,S),y=typeof d>"u"||typeof h>"u"||d===null||h===null,g=i&&p>0,b=(d||0)*(h||0);(y||g||p>=b||u.dragging)&&c.push(u)}),c},dS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},fS=(e,t,n,r,s,i=.1)=>{const o=t/(e.width*(1+i)),a=n/(e.height*(1+i)),l=Math.min(o,a),c=di(l,r,s),u=e.x+e.width/2,d=e.y+e.height/2,h=t/2-u*c,m=n/2-d*c;return{x:h,y:m,zoom:c}},Lr=(e,t=0)=>e.transition().duration(t);function ky(e,t,n,r){return(t[n]||[]).reduce((s,i)=>{var o,a;return`${e.id}-${i.id}-${n}`!==r&&s.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),s},[])}function yL(e,t,n,r,s,i){const{x:o,y:a}=cr(e),c=t.elementsFromPoint(o,a).find(x=>x.classList.contains("react-flow__handle"));if(c){const x=c.getAttribute("data-nodeid");if(x){const w=Hm(void 0,c),S=c.getAttribute("data-handleid"),p=i({nodeId:x,id:S,type:w});if(p){const y=s.find(g=>g.nodeId===x&&g.type===w&&g.id===S);return{handle:{id:S,type:w,nodeId:x,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:p}}}}let u=[],d=1/0;if(s.forEach(x=>{const w=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(w<=r){const S=i(x);w<=d&&(w<d?u=[{handle:x,validHandleResult:S}]:w===d&&u.push({handle:x,validHandleResult:S}),d=w)}}),!u.length)return{handle:null,validHandleResult:hS()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:x})=>x.isValid),m=u.some(({handle:x})=>x.type==="target");return u.find(({handle:x,validHandleResult:w})=>m?x.type==="target":h?w.isValid:!0)||u[0]}const vL={source:null,target:null,sourceHandle:null,targetHandle:null},hS=()=>({handleDomNode:null,isValid:!1,connection:vL,endHandle:null});function mS(e,t,n,r,s,i,o){const a=s==="target",l=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...hS(),handleDomNode:l};if(l){const u=Hm(void 0,l),d=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),x=l.classList.contains("connectableend"),w={source:a?d:n,sourceHandle:a?h:r,target:a?n:d,targetHandle:a?r:h};c.connection=w,m&&x&&(t===rs.Strict?a&&u==="source"||!a&&u==="target":d!==n||h!==r)&&(c.endHandle={nodeId:d,handleId:h,type:u},c.isValid=i(w))}return c}function xL({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,i)=>{if(i[Ne]){const{handleBounds:o}=i[Ne];let a=[],l=[];o&&(a=ky(i,o,"source",`${t}-${n}-${r}`),l=ky(i,o,"target",`${t}-${n}-${r}`)),s.push(...a,...l)}return s},[])}function Hm(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ju(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function wL(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function pS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:i,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const u=tS(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:m,connectionRadius:x,onConnectStart:w,panBy:S,getNodes:p,cancelConnection:y}=i();let g=0,b;const{x:k,y:C}=cr(e),N=u==null?void 0:u.elementFromPoint(k,C),T=Hm(l,N),A=h==null?void 0:h.getBoundingClientRect();if(!A||!T)return;let P,R=cr(e,A),z=!1,V=null,E=!1,D=null;const M=xL({nodes:p(),nodeId:n,handleId:t,handleType:T}),O=()=>{if(!m)return;const[$,L]=eS(R,A);S({x:$,y:L}),g=requestAnimationFrame(O)};o({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),w==null||w(e,{nodeId:n,handleId:t,handleType:T});function _($){const{transform:L}=i();R=cr($,A);const{handle:I,validHandleResult:W}=yL($,u,Vf(R,L,!1,[1,1]),x,M,U=>mS(U,d,n,t,s?"target":"source",a,u));if(b=I,z||(O(),z=!0),D=W.handleDomNode,V=W.connection,E=W.isValid,o({connectionPosition:b&&E?cS({x:b.x,y:b.y},L):R,connectionStatus:wL(!!b,E),connectionEndHandle:W.endHandle}),!b&&!E&&!D)return Ju(P);V.source!==V.target&&D&&(Ju(P),P=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",E),D.classList.toggle("react-flow__handle-valid",E))}function j($){var L,I;(b||D)&&V&&E&&(r==null||r(V)),(I=(L=i()).onConnectEnd)==null||I.call(L,$),l&&(c==null||c($)),Ju(P),y(),cancelAnimationFrame(g),z=!1,E=!1,V=null,D=null,u.removeEventListener("mousemove",_),u.removeEventListener("mouseup",j),u.removeEventListener("touchmove",_),u.removeEventListener("touchend",j)}u.addEventListener("mousemove",_),u.addEventListener("mouseup",j),u.addEventListener("touchmove",_),u.addEventListener("touchend",j)}const Ey=()=>!0,bL=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),SL=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},gS=v.forwardRef(({type:e="source",position:t=J.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:d,...h},m)=>{var A,P;const x=o||null,w=e==="target",S=ze(),p=hL(),{connectOnClick:y,noPanClassName:g}=ke(bL,Qe),{connecting:b,clickConnecting:k}=ke(SL(p,x,e),Qe);p||(P=(A=S.getState()).onError)==null||P.call(A,"010",$n.error010());const C=R=>{const{defaultEdgeOptions:z,onConnect:V,hasDefaultEdges:E}=S.getState(),D={...z,...R};if(E){const{edges:M,setEdges:O}=S.getState();O(lS(D,M))}V==null||V(D),a==null||a(D)},N=R=>{if(!p)return;const z=rS(R);s&&(z&&R.button===0||!z)&&pS({event:R,handleId:x,nodeId:p,onConnect:C,isTarget:w,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||Ey}),z?u==null||u(R):d==null||d(R)},T=R=>{const{onClickConnectStart:z,onClickConnectEnd:V,connectionClickStartHandle:E,connectionMode:D,isValidConnection:M}=S.getState();if(!p||!E&&!s)return;if(!E){z==null||z(R,{nodeId:p,handleId:x,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:p,type:e,handleId:x}});return}const O=tS(R.target),_=n||M||Ey,{connection:j,isValid:$}=mS({nodeId:p,id:x,type:e},D,E.nodeId,E.handleId||null,E.type,_,O);$&&C(j),V==null||V(R),S.setState({connectionClickStartHandle:null})};return F.createElement("div",{"data-handleid":x,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${x}-${e}`,className:it(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,c,{source:!w,target:w,connectable:r,connectablestart:s,connectableend:i,connecting:k,connectionindicator:r&&(s&&!b||i&&b)}]),onMouseDown:N,onTouchStart:N,onClick:y?T:void 0,ref:m,...h},l)});gS.displayName="Handle";var uc=v.memo(gS);const yS=({data:e,isConnectable:t,targetPosition:n=J.Top,sourcePosition:r=J.Bottom})=>F.createElement(F.Fragment,null,F.createElement(uc,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,F.createElement(uc,{type:"source",position:r,isConnectable:t}));yS.displayName="DefaultNode";var Bf=v.memo(yS);const vS=({data:e,isConnectable:t,sourcePosition:n=J.Bottom})=>F.createElement(F.Fragment,null,e==null?void 0:e.label,F.createElement(uc,{type:"source",position:n,isConnectable:t}));vS.displayName="InputNode";var xS=v.memo(vS);const wS=({data:e,isConnectable:t,targetPosition:n=J.Top})=>F.createElement(F.Fragment,null,F.createElement(uc,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);wS.displayName="OutputNode";var bS=v.memo(wS);const Wm=()=>null;Wm.displayName="GroupNode";const _L=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),qa=e=>e.id;function kL(e,t){return Qe(e.selectedNodes.map(qa),t.selectedNodes.map(qa))&&Qe(e.selectedEdges.map(qa),t.selectedEdges.map(qa))}const SS=v.memo(({onSelectionChange:e})=>{const t=ze(),{selectedNodes:n,selectedEdges:r}=ke(_L,kL);return v.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(i=>i(s))},[n,r,e]),null});SS.displayName="SelectionListener";const EL=e=>!!e.onSelectionChange;function CL({onSelectionChange:e}){const t=ke(EL);return e||t?F.createElement(SS,{onSelectionChange:e}):null}const jL=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function vs(e,t){v.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function se(e,t,n){v.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const NL=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:x,minZoom:w,maxZoom:S,nodeExtent:p,onNodesChange:y,onEdgesChange:g,elementsSelectable:b,connectionMode:k,snapGrid:C,snapToGrid:N,translateExtent:T,connectOnClick:A,defaultEdgeOptions:P,fitView:R,fitViewOptions:z,onNodesDelete:V,onEdgesDelete:E,onNodeDrag:D,onNodeDragStart:M,onNodeDragStop:O,onSelectionDrag:_,onSelectionDragStart:j,onSelectionDragStop:$,noPanClassName:L,nodeOrigin:I,rfId:W,autoPanOnConnect:U,autoPanOnNodeDrag:X,onError:B,connectionRadius:q,isValidConnection:K,nodeDragThreshold:te})=>{const{setNodes:ne,setEdges:ee,setDefaultNodesAndEdges:ae,setMinZoom:ye,setMaxZoom:Ee,setTranslateExtent:Me,setNodeExtent:Xt,reset:he}=ke(jL,Qe),Q=ze();return v.useEffect(()=>{const pt=r==null?void 0:r.map(Sr=>({...Sr,...P}));return ae(n,pt),()=>{he()}},[]),se("defaultEdgeOptions",P,Q.setState),se("connectionMode",k,Q.setState),se("onConnect",s,Q.setState),se("onConnectStart",i,Q.setState),se("onConnectEnd",o,Q.setState),se("onClickConnectStart",a,Q.setState),se("onClickConnectEnd",l,Q.setState),se("nodesDraggable",c,Q.setState),se("nodesConnectable",u,Q.setState),se("nodesFocusable",d,Q.setState),se("edgesFocusable",h,Q.setState),se("edgesUpdatable",m,Q.setState),se("elementsSelectable",b,Q.setState),se("elevateNodesOnSelect",x,Q.setState),se("snapToGrid",N,Q.setState),se("snapGrid",C,Q.setState),se("onNodesChange",y,Q.setState),se("onEdgesChange",g,Q.setState),se("connectOnClick",A,Q.setState),se("fitViewOnInit",R,Q.setState),se("fitViewOnInitOptions",z,Q.setState),se("onNodesDelete",V,Q.setState),se("onEdgesDelete",E,Q.setState),se("onNodeDrag",D,Q.setState),se("onNodeDragStart",M,Q.setState),se("onNodeDragStop",O,Q.setState),se("onSelectionDrag",_,Q.setState),se("onSelectionDragStart",j,Q.setState),se("onSelectionDragStop",$,Q.setState),se("noPanClassName",L,Q.setState),se("nodeOrigin",I,Q.setState),se("rfId",W,Q.setState),se("autoPanOnConnect",U,Q.setState),se("autoPanOnNodeDrag",X,Q.setState),se("onError",B,Q.setState),se("connectionRadius",q,Q.setState),se("isValidConnection",K,Q.setState),se("nodeDragThreshold",te,Q.setState),vs(e,ne),vs(t,ee),vs(w,ye),vs(S,Ee),vs(T,Me),vs(p,Xt),null},Cy={display:"none"},TL={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},_S="react-flow__node-desc",kS="react-flow__edge-desc",PL="react-flow__aria-live",AL=e=>e.ariaLiveMessage;function RL({rfId:e}){const t=ke(AL);return F.createElement("div",{id:`${PL}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:TL},t)}function ML({rfId:e,disableKeyboardA11y:t}){return F.createElement(F.Fragment,null,F.createElement("div",{id:`${_S}-${e}`,style:Cy},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),F.createElement("div",{id:`${kS}-${e}`,style:Cy},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&F.createElement(RL,{rfId:e}))}var Ko=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=v.useState(!1),s=v.useRef(!1),i=v.useRef(new Set([])),[o,a]=v.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=c.reduce((d,h)=>d.concat(...h),[]);return[c,u]}return[[],[]]},[e]);return v.useEffect(()=>{const l=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||l;if(e!==null){const u=m=>{if(s.current=m.ctrlKey||m.metaKey||m.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&If(m))return!1;const w=Ny(m.code,a);i.current.add(m[w]),jy(o,i.current,!1)&&(m.preventDefault(),r(!0))},d=m=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&If(m))return!1;const w=Ny(m.code,a);jy(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(m[w]),m.key==="Meta"&&i.current.clear(),s.current=!1},h=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function jy(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function Ny(e,t){return t.includes(e)?"code":"key"}function ES(e,t,n,r){var a,l;const s=e.parentNode||e.parentId;if(!s)return n;const i=t.get(s),o=Ys(i,r);return ES(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=i[Ne])==null?void 0:a.z)??0)>(n.z??0)?((l=i[Ne])==null?void 0:l.z)??0:n.z??0},r)}function CS(e,t,n){e.forEach(r=>{var i;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:o,y:a,z:l}=ES(r,e,{...r.position,z:((i=r[Ne])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:a},r[Ne].z=l,n!=null&&n[r.id]&&(r[Ne].isParent=!0)}})}function Qu(e,t,n,r){const s=new Map,i={},o=r?1e3:0;return e.forEach(a=>{var m;const l=(Nt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),c=t.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(i[d]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(u,Ne,{enumerable:!1,value:{handleBounds:h||(m=c==null?void 0:c[Ne])==null?void 0:m.handleBounds,z:l}}),s.set(a.id,u)}),CS(s,n,i),s}function jS(e,t={}){const{getNodes:n,width:r,height:s,minZoom:i,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),h=t.initial&&!c&&u;if(a&&l&&(h||!t.initial)){const x=n().filter(S=>{var y;const p=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(y=t.nodes)!=null&&y.length?p&&t.nodes.some(g=>g.id===S.id):p}),w=x.every(S=>S.width&&S.height);if(x.length>0&&w){const S=Um(x,d),{x:p,y,zoom:g}=fS(S,r,s,t.minZoom??i,t.maxZoom??o,t.padding??.1),b=lr.translate(p,y).scale(g);return typeof t.duration=="number"&&t.duration>0?a.transform(Lr(l,t.duration),b):a.transform(l,b),!0}}return!1}function $L(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ne]:r[Ne],selected:n.selected})}),new Map(t)}function LL(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Ka({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&r({nodeInternals:$L(e,s)}),o==null||o(e)),t!=null&&t.length&&(c&&r({edges:LL(t,i)}),a==null||a(t))}const xs=()=>{},DL={zoomIn:xs,zoomOut:xs,zoomTo:xs,getZoom:()=>1,setViewport:xs,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xs,fitBounds:xs,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},OL=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),IL=()=>{const e=ze(),{d3Zoom:t,d3Selection:n}=ke(OL,Qe);return v.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Lr(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Lr(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(Lr(n,i==null?void 0:i.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[o,a,l]=e.getState().transform,c=lr.translate(s.x??o,s.y??a).scale(s.zoom??l);t.transform(Lr(n,i==null?void 0:i.duration),c)},getViewport:()=>{const[s,i,o]=e.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>jS(e.getState,s),setCenter:(s,i,o)=>{const{width:a,height:l,maxZoom:c}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,d=a/2-s*u,h=l/2-i*u,m=lr.translate(d,h).scale(u);t.transform(Lr(n,o==null?void 0:o.duration),m)},fitBounds:(s,i)=>{const{width:o,height:a,minZoom:l,maxZoom:c}=e.getState(),{x:u,y:d,zoom:h}=fS(s,o,a,l,c,(i==null?void 0:i.padding)??.1),m=lr.translate(u,d).scale(h);t.transform(Lr(n,i==null?void 0:i.duration),m)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Vf(s,i,o,a)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:a,domNode:l}=e.getState();if(!l)return s;const{x:c,y:u}=l.getBoundingClientRect(),d={x:s.x-c,y:s.y-u};return Vf(d,i,o,a)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=e.getState();if(!o)return s;const{x:a,y:l}=o.getBoundingClientRect(),c=cS(s,i);return{x:c.x+a,y:c.y+l}},viewportInitialized:!0}:DL,[t,n])};function qm(){const e=IL(),t=ze(),n=v.useCallback(()=>t.getState().getNodes().map(w=>({...w})),[]),r=v.useCallback(w=>t.getState().nodeInternals.get(w),[]),s=v.useCallback(()=>{const{edges:w=[]}=t.getState();return w.map(S=>({...S}))},[]),i=v.useCallback(w=>{const{edges:S=[]}=t.getState();return S.find(p=>p.id===w)},[]),o=v.useCallback(w=>{const{getNodes:S,setNodes:p,hasDefaultNodes:y,onNodesChange:g}=t.getState(),b=S(),k=typeof w=="function"?w(b):w;if(y)p(k);else if(g){const C=k.length===0?b.map(N=>({type:"remove",id:N.id})):k.map(N=>({item:N,type:"reset"}));g(C)}},[]),a=v.useCallback(w=>{const{edges:S=[],setEdges:p,hasDefaultEdges:y,onEdgesChange:g}=t.getState(),b=typeof w=="function"?w(S):w;if(y)p(b);else if(g){const k=b.length===0?S.map(C=>({type:"remove",id:C.id})):b.map(C=>({item:C,type:"reset"}));g(k)}},[]),l=v.useCallback(w=>{const S=Array.isArray(w)?w:[w],{getNodes:p,setNodes:y,hasDefaultNodes:g,onNodesChange:b}=t.getState();if(g){const C=[...p(),...S];y(C)}else if(b){const k=S.map(C=>({item:C,type:"add"}));b(k)}},[]),c=v.useCallback(w=>{const S=Array.isArray(w)?w:[w],{edges:p=[],setEdges:y,hasDefaultEdges:g,onEdgesChange:b}=t.getState();if(g)y([...p,...S]);else if(b){const k=S.map(C=>({item:C,type:"add"}));b(k)}},[]),u=v.useCallback(()=>{const{getNodes:w,edges:S=[],transform:p}=t.getState(),[y,g,b]=p;return{nodes:w().map(k=>({...k})),edges:S.map(k=>({...k})),viewport:{x:y,y:g,zoom:b}}},[]),d=v.useCallback(({nodes:w,edges:S})=>{const{nodeInternals:p,getNodes:y,edges:g,hasDefaultNodes:b,hasDefaultEdges:k,onNodesDelete:C,onEdgesDelete:N,onNodesChange:T,onEdgesChange:A}=t.getState(),P=(w||[]).map(D=>D.id),R=(S||[]).map(D=>D.id),z=y().reduce((D,M)=>{const O=M.parentNode||M.parentId,_=!P.includes(M.id)&&O&&D.find($=>$.id===O);return(typeof M.deletable=="boolean"?M.deletable:!0)&&(P.includes(M.id)||_)&&D.push(M),D},[]),V=g.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),E=V.filter(D=>R.includes(D.id));if(z||E){const D=dS(z,V),M=[...E,...D],O=M.reduce((_,j)=>(_.includes(j.id)||_.push(j.id),_),[]);if((k||b)&&(k&&t.setState({edges:g.filter(_=>!O.includes(_.id))}),b&&(z.forEach(_=>{p.delete(_.id)}),t.setState({nodeInternals:new Map(p)}))),O.length>0&&(N==null||N(M),A&&A(O.map(_=>({id:_,type:"remove"})))),z.length>0&&(C==null||C(z),T)){const _=z.map(j=>({id:j.id,type:"remove"}));T(_)}}},[]),h=v.useCallback(w=>{const S=iL(w),p=S?null:t.getState().nodeInternals.get(w.id);return!S&&!p?[null,null,S]:[S?w:xy(p),p,S]},[]),m=v.useCallback((w,S=!0,p)=>{const[y,g,b]=h(w);return y?(p||t.getState().getNodes()).filter(k=>{if(!b&&(k.id===g.id||!k.positionAbsolute))return!1;const C=xy(k),N=Of(C,y);return S&&N>0||N>=y.width*y.height}):[]},[]),x=v.useCallback((w,S,p=!0)=>{const[y]=h(w);if(!y)return!1;const g=Of(y,S);return p&&g>0||g>=y.width*y.height},[]);return v.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:i,setNodes:o,setEdges:a,addNodes:l,addEdges:c,toObject:u,deleteElements:d,getIntersectingNodes:m,isNodeIntersecting:x}),[e,n,r,s,i,o,a,l,c,u,d,m,x])}const zL={actInsideInputWithModifier:!1};var FL=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ze(),{deleteElements:r}=qm(),s=Ko(e,zL),i=Ko(t);v.useEffect(()=>{if(s){const{edges:o,getNodes:a}=n.getState(),l=a().filter(u=>u.selected),c=o.filter(u=>u.selected);r({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[s]),v.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function VL(e){const t=ze();v.useEffect(()=>{let n;const r=()=>{var i,o;if(!e.current)return;const s=Dm(e.current);(s.height===0||s.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",$n.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Km={position:"absolute",width:"100%",height:"100%",top:0,left:0},BL=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ga=e=>({x:e.x,y:e.y,zoom:e.k}),ws=(e,t)=>e.target.closest(`.${t}`),Ty=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Py=e=>{const t=e.ctrlKey&&ac()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},UL=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),HL=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Hr.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:h,translateExtent:m,minZoom:x,maxZoom:w,zoomActivationKeyCode:S,preventScrolling:p=!0,children:y,noWheelClassName:g,noPanClassName:b})=>{const k=v.useRef(),C=ze(),N=v.useRef(!1),T=v.useRef(!1),A=v.useRef(null),P=v.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:z,d3ZoomHandler:V,userSelectionActive:E}=ke(UL,Qe),D=Ko(S),M=v.useRef(0),O=v.useRef(!1),_=v.useRef();return VL(A),v.useEffect(()=>{if(A.current){const j=A.current.getBoundingClientRect(),$=J5().scaleExtent([x,w]).translateExtent(m),L=Bt(A.current).call($),I=lr.translate(h.x,h.y).scale(di(h.zoom,x,w)),W=[[0,0],[j.width,j.height]],U=$.constrain()(I,W,m);$.transform(L,U),$.wheelDelta(Py),C.setState({d3Zoom:$,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[U.x,U.y,U.k],domNode:A.current.closest(".react-flow")})}},[]),v.useEffect(()=>{z&&R&&(o&&!D&&!E?z.on("wheel.zoom",j=>{if(ws(j,g))return!1;j.preventDefault(),j.stopImmediatePropagation();const $=z.property("__zoom").k||1;if(j.ctrlKey&&i){const K=en(j),te=Py(j),ne=$*Math.pow(2,te);R.scaleTo(z,ne,K,j);return}const L=j.deltaMode===1?20:1;let I=l===Hr.Vertical?0:j.deltaX*L,W=l===Hr.Horizontal?0:j.deltaY*L;!ac()&&j.shiftKey&&l!==Hr.Vertical&&(I=j.deltaY*L,W=0),R.translateBy(z,-(I/$)*a,-(W/$)*a,{internal:!0});const U=Ga(z.property("__zoom")),{onViewportChangeStart:X,onViewportChange:B,onViewportChangeEnd:q}=C.getState();clearTimeout(_.current),O.current||(O.current=!0,t==null||t(j,U),X==null||X(U)),O.current&&(e==null||e(j,U),B==null||B(U),_.current=setTimeout(()=>{n==null||n(j,U),q==null||q(U),O.current=!1},150))},{passive:!1}):typeof V<"u"&&z.on("wheel.zoom",function(j,$){if(!p&&j.type==="wheel"&&!j.ctrlKey||ws(j,g))return null;j.preventDefault(),V.call(this,j,$)},{passive:!1}))},[E,o,l,z,R,V,D,i,p,g,t,e,n]),v.useEffect(()=>{R&&R.on("start",j=>{var I,W;if(!j.sourceEvent||j.sourceEvent.internal)return null;M.current=(I=j.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:$}=C.getState(),L=Ga(j.transform);N.current=!0,P.current=L,((W=j.sourceEvent)==null?void 0:W.type)==="mousedown"&&C.setState({paneDragging:!0}),$==null||$(L),t==null||t(j.sourceEvent,L)})},[R,t]),v.useEffect(()=>{R&&(E&&!N.current?R.on("zoom",null):E||R.on("zoom",j=>{var L;const{onViewportChange:$}=C.getState();if(C.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),T.current=!!(r&&Ty(d,M.current??0)),(e||$)&&!((L=j.sourceEvent)!=null&&L.internal)){const I=Ga(j.transform);$==null||$(I),e==null||e(j.sourceEvent,I)}}))},[E,R,e,d,r]),v.useEffect(()=>{R&&R.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=C.getState();if(N.current=!1,C.setState({paneDragging:!1}),r&&Ty(d,M.current??0)&&!T.current&&r(j.sourceEvent),T.current=!1,(n||$)&&BL(P.current,j.transform)){const L=Ga(j.transform);P.current=L,clearTimeout(k.current),k.current=setTimeout(()=>{$==null||$(L),n==null||n(j.sourceEvent,L)},o?150:0)}})},[R,o,d,n,r]),v.useEffect(()=>{R&&R.filter(j=>{const $=D||s,L=i&&j.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&j.button===1&&j.type==="mousedown"&&(ws(j,"react-flow__node")||ws(j,"react-flow__edge")))return!0;if(!d&&!$&&!o&&!c&&!i||E||!c&&j.type==="dblclick"||ws(j,g)&&j.type==="wheel"||ws(j,b)&&(j.type!=="wheel"||o&&j.type==="wheel"&&!D)||!i&&j.ctrlKey&&j.type==="wheel"||!$&&!o&&!L&&j.type==="wheel"||!d&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(d)&&!d.includes(j.button)&&j.type==="mousedown")return!1;const I=Array.isArray(d)&&d.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&I})},[E,R,s,i,o,c,d,u,D]),F.createElement("div",{className:"react-flow__renderer",ref:A,style:Km},y)},WL=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function qL(){const{userSelectionActive:e,userSelectionRect:t}=ke(WL,Qe);return e&&t?F.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Ay(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),i>0&&(r.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function NS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const i=e.filter(a=>a.id===s.id);if(i.length===0)return r.push(s),r;const o={...s};for(const a of i)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Ay(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Ay(r,o);break}case"remove":return r}return r.push(o),r},n)}function TS(e,t){return NS(e,t)}function KL(e,t){return NS(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function Fs(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const Zu=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},GL=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),PS=v.memo(({isSelecting:e,selectionMode:t=qo.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:d})=>{const h=v.useRef(null),m=ze(),x=v.useRef(0),w=v.useRef(0),S=v.useRef(),{userSelectionActive:p,elementsSelectable:y,dragging:g}=ke(GL,Qe),b=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,w.current=0},k=V=>{i==null||i(V),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},C=V=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){V.preventDefault();return}o==null||o(V)},N=a?V=>a(V):void 0,T=V=>{const{resetSelectedElements:E,domNode:D}=m.getState();if(S.current=D==null?void 0:D.getBoundingClientRect(),!y||!e||V.button!==0||V.target!==h.current||!S.current)return;const{x:M,y:O}=cr(V,S.current);E(),m.setState({userSelectionRect:{width:0,height:0,startX:M,startY:O,x:M,y:O}}),r==null||r(V)},A=V=>{const{userSelectionRect:E,nodeInternals:D,edges:M,transform:O,onNodesChange:_,onEdgesChange:j,nodeOrigin:$,getNodes:L}=m.getState();if(!e||!S.current||!E)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=cr(V,S.current),W=E.startX??0,U=E.startY??0,X={...E,x:I.x<W?I.x:W,y:I.y<U?I.y:U,width:Math.abs(I.x-W),height:Math.abs(I.y-U)},B=L(),q=uS(D,X,O,t===qo.Partial,!0,$),K=dS(q,M).map(ne=>ne.id),te=q.map(ne=>ne.id);if(x.current!==te.length){x.current=te.length;const ne=Fs(B,te);ne.length&&(_==null||_(ne))}if(w.current!==K.length){w.current=K.length;const ne=Fs(M,K);ne.length&&(j==null||j(ne))}m.setState({userSelectionRect:X})},P=V=>{if(V.button!==0)return;const{userSelectionRect:E}=m.getState();!p&&E&&V.target===h.current&&(k==null||k(V)),m.setState({nodesSelectionActive:x.current>0}),b(),s==null||s(V)},R=V=>{p&&(m.setState({nodesSelectionActive:x.current>0}),s==null||s(V)),b()},z=y&&(e||p);return F.createElement("div",{className:it(["react-flow__pane",{dragging:g,selection:e}]),onClick:z?void 0:Zu(k,h),onContextMenu:Zu(C,h),onWheel:Zu(N,h),onMouseEnter:z?void 0:l,onMouseDown:z?T:void 0,onMouseMove:z?A:c,onMouseUp:z?P:void 0,onMouseLeave:z?R:u,ref:h,style:Km},d,F.createElement(qL,null))});PS.displayName="Pane";function AS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:AS(r,t):!1}function Ry(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function YL(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!AS(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var i,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function XL(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function RS(e,t,n,r,s=[0,0],i){const o=XL(e,e.extent||r);let a=o;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const d=n.get(l),{x:h,y:m}=Ys(d,s).positionAbsolute;a=d&&Nt(h)&&Nt(m)&&Nt(d.width)&&Nt(d.height)?[[h+e.width*s[0],m+e.height*s[1]],[h+d.width-e.width+e.width*s[0],m+d.height-e.height+e.height*s[1]]]:a}else i==null||i("005",$n.error005()),a=o;else if(e.extent&&l&&e.extent!=="parent"){const d=n.get(l),{x:h,y:m}=Ys(d,s).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let c={x:0,y:0};if(l){const d=n.get(l);c=Ys(d,s).positionAbsolute}const u=a&&a!=="parent"?Om(t,a):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function ed({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const My=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return i.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-o.left-a.x)/n,y:(c.top-o.top-a.y)/n,...Dm(l)}})};function Ii(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function Uf({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a,onError:l}=t.getState(),c=a.get(e);if(!c){l==null||l("012",$n.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):s([e])}function JL(){const e=ze();return v.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:i?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:i?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function td(e){return(t,n,r)=>e==null?void 0:e(t,r)}function MS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const a=ze(),[l,c]=v.useState(!1),u=v.useRef([]),d=v.useRef({x:null,y:null}),h=v.useRef(0),m=v.useRef(null),x=v.useRef({x:0,y:0}),w=v.useRef(null),S=v.useRef(!1),p=v.useRef(!1),y=v.useRef(!1),g=JL();return v.useEffect(()=>{if(e!=null&&e.current){const b=Bt(e.current),k=({x:T,y:A})=>{const{nodeInternals:P,onNodeDrag:R,onSelectionDrag:z,updateNodePositions:V,nodeExtent:E,snapGrid:D,snapToGrid:M,nodeOrigin:O,onError:_}=a.getState();d.current={x:T,y:A};let j=!1,$={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&E){const I=Um(u.current,O);$=Im(I)}if(u.current=u.current.map(I=>{const W={x:T-I.distance.x,y:A-I.distance.y};M&&(W.x=D[0]*Math.round(W.x/D[0]),W.y=D[1]*Math.round(W.y/D[1]));const U=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];u.current.length>1&&E&&!I.extent&&(U[0][0]=I.positionAbsolute.x-$.x+E[0][0],U[1][0]=I.positionAbsolute.x+(I.width??0)-$.x2+E[1][0],U[0][1]=I.positionAbsolute.y-$.y+E[0][1],U[1][1]=I.positionAbsolute.y+(I.height??0)-$.y2+E[1][1]);const X=RS(I,W,P,U,O,_);return j=j||I.position.x!==X.position.x||I.position.y!==X.position.y,I.position=X.position,I.positionAbsolute=X.positionAbsolute,I}),!j)return;V(u.current,!0,!0),c(!0);const L=s?R:td(z);if(L&&w.current){const[I,W]=ed({nodeId:s,dragItems:u.current,nodeInternals:P});L(w.current,I,W)}},C=()=>{if(!m.current)return;const[T,A]=eS(x.current,m.current);if(T!==0||A!==0){const{transform:P,panBy:R}=a.getState();d.current.x=(d.current.x??0)-T/P[2],d.current.y=(d.current.y??0)-A/P[2],R({x:T,y:A})&&k(d.current)}h.current=requestAnimationFrame(C)},N=T=>{var O;const{nodeInternals:A,multiSelectionActive:P,nodesDraggable:R,unselectNodesAndEdges:z,onNodeDragStart:V,onSelectionDragStart:E}=a.getState();p.current=!0;const D=s?V:td(E);(!o||!i)&&!P&&s&&((O=A.get(s))!=null&&O.selected||z()),s&&i&&o&&Uf({id:s,store:a,nodeRef:e});const M=g(T);if(d.current=M,u.current=YL(A,R,M,s),D&&u.current){const[_,j]=ed({nodeId:s,dragItems:u.current,nodeInternals:A});D(T.sourceEvent,_,j)}};if(t)b.on(".drag",null);else{const T=a$().on("start",A=>{const{domNode:P,nodeDragThreshold:R}=a.getState();R===0&&N(A),y.current=!1;const z=g(A);d.current=z,m.current=(P==null?void 0:P.getBoundingClientRect())||null,x.current=cr(A.sourceEvent,m.current)}).on("drag",A=>{var V,E;const P=g(A),{autoPanOnNodeDrag:R,nodeDragThreshold:z}=a.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!S.current&&p.current&&R&&(S.current=!0,C()),!p.current){const D=P.xSnapped-(((V=d==null?void 0:d.current)==null?void 0:V.x)??0),M=P.ySnapped-(((E=d==null?void 0:d.current)==null?void 0:E.y)??0);Math.sqrt(D*D+M*M)>z&&N(A)}(d.current.x!==P.xSnapped||d.current.y!==P.ySnapped)&&u.current&&p.current&&(w.current=A.sourceEvent,x.current=cr(A.sourceEvent,m.current),k(P))}}).on("end",A=>{if(!(!p.current||y.current)&&(c(!1),S.current=!1,p.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:P,nodeInternals:R,onNodeDragStop:z,onSelectionDragStop:V}=a.getState(),E=s?z:td(V);if(P(u.current,!1,!1),E){const[D,M]=ed({nodeId:s,dragItems:u.current,nodeInternals:R});E(A.sourceEvent,D,M)}}}).filter(A=>{const P=A.target;return!A.button&&(!n||!Ry(P,`.${n}`,e))&&(!r||Ry(P,r,e))});return b.call(T),()=>{b.on(".drag",null)}}}},[e,t,n,r,i,a,s,o,g]),l}function $S(){const e=ze();return v.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:a,snapGrid:l,onError:c,nodesDraggable:u}=e.getState(),d=o().filter(y=>y.selected&&(y.draggable||u&&typeof y.draggable>"u")),h=a?l[0]:5,m=a?l[1]:5,x=n.isShiftPressed?4:1,w=n.x*h*x,S=n.y*m*x,p=d.map(y=>{if(y.positionAbsolute){const g={x:y.positionAbsolute.x+w,y:y.positionAbsolute.y+S};a&&(g.x=l[0]*Math.round(g.x/l[0]),g.y=l[1]*Math.round(g.y/l[1]));const{positionAbsolute:b,position:k}=RS(y,g,r,s,void 0,c);y.position=k,y.positionAbsolute=b}return y});i(p,!0,!1)},[])}const Xs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var zi=e=>{const t=({id:n,type:r,data:s,xPos:i,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:d,onMouseMove:h,onMouseLeave:m,onContextMenu:x,onDoubleClick:w,style:S,className:p,isDraggable:y,isSelectable:g,isConnectable:b,isFocusable:k,selectNodesOnDrag:C,sourcePosition:N,targetPosition:T,hidden:A,resizeObserver:P,dragHandle:R,zIndex:z,isParent:V,noDragClassName:E,noPanClassName:D,initialized:M,disableKeyboardA11y:O,ariaLabel:_,rfId:j,hasHandleBounds:$})=>{const L=ze(),I=v.useRef(null),W=v.useRef(null),U=v.useRef(N),X=v.useRef(T),B=v.useRef(r),q=g||y||u||d||h||m,K=$S(),te=Ii(n,L.getState,d),ne=Ii(n,L.getState,h),ee=Ii(n,L.getState,m),ae=Ii(n,L.getState,x),ye=Ii(n,L.getState,w),Ee=he=>{const{nodeDragThreshold:Q}=L.getState();if(g&&(!C||!y||Q>0)&&Uf({id:n,store:L,nodeRef:I}),u){const pt=L.getState().nodeInternals.get(n);pt&&u(he,{...pt})}},Me=he=>{if(!If(he)&&!O)if(nS.includes(he.key)&&g){const Q=he.key==="Escape";Uf({id:n,store:L,unselect:Q,nodeRef:I})}else y&&c&&Object.prototype.hasOwnProperty.call(Xs,he.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${he.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),K({x:Xs[he.key].x,y:Xs[he.key].y,isShiftPressed:he.shiftKey}))};v.useEffect(()=>()=>{W.current&&(P==null||P.unobserve(W.current),W.current=null)},[]),v.useEffect(()=>{if(I.current&&!A){const he=I.current;(!M||!$||W.current!==he)&&(W.current&&(P==null||P.unobserve(W.current)),P==null||P.observe(he),W.current=he)}},[A,M,$]),v.useEffect(()=>{const he=B.current!==r,Q=U.current!==N,pt=X.current!==T;I.current&&(he||Q||pt)&&(he&&(B.current=r),Q&&(U.current=N),pt&&(X.current=T),L.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,r,N,T]);const Xt=MS({nodeRef:I,disabled:A||!y,noDragClassName:E,handleSelector:R,nodeId:n,isSelectable:g,selectNodesOnDrag:C});return A?null:F.createElement("div",{className:it(["react-flow__node",`react-flow__node-${r}`,{[D]:y},p,{selected:c,selectable:g,parent:V,dragging:Xt}]),ref:I,style:{zIndex:z,transform:`translate(${a}px,${l}px)`,pointerEvents:q?"all":"none",visibility:M?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:ne,onMouseLeave:ee,onContextMenu:ae,onClick:Ee,onDoubleClick:ye,onKeyDown:k?Me:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":O?void 0:`${_S}-${j}`,"aria-label":_},F.createElement(fL,{value:n},F.createElement(e,{id:n,data:s,type:r,xPos:i,yPos:o,selected:c,isConnectable:b,sourcePosition:N,targetPosition:T,dragging:Xt,dragHandle:R,zIndex:z})))};return t.displayName="NodeWrapper",v.memo(t)};const QL=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Um(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ZL({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ze(),{width:s,height:i,x:o,y:a,transformString:l,userSelectionActive:c}=ke(QL,Qe),u=$S(),d=v.useRef(null);if(v.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),MS({nodeRef:d}),c||!s||!i)return null;const h=e?x=>{const w=r.getState().getNodes().filter(S=>S.selected);e(x,w)}:void 0,m=x=>{Object.prototype.hasOwnProperty.call(Xs,x.key)&&u({x:Xs[x.key].x,y:Xs[x.key].y,isShiftPressed:x.shiftKey})};return F.createElement("div",{className:it(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},F.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:s,height:i,top:a,left:o}}))}var eD=v.memo(ZL);const tD=e=>e.nodesSelectionActive,LS=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:m,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:p,zoomActivationKeyCode:y,elementsSelectable:g,zoomOnScroll:b,zoomOnPinch:k,panOnScroll:C,panOnScrollSpeed:N,panOnScrollMode:T,zoomOnDoubleClick:A,panOnDrag:P,defaultViewport:R,translateExtent:z,minZoom:V,maxZoom:E,preventScrolling:D,onSelectionContextMenu:M,noWheelClassName:O,noPanClassName:_,disableKeyboardA11y:j})=>{const $=ke(tD),L=Ko(d),I=Ko(p),W=I||P,U=I||C,X=L||h&&W!==!0;return FL({deleteKeyCode:a,multiSelectionKeyCode:S}),F.createElement(HL,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:g,zoomOnScroll:b,zoomOnPinch:k,panOnScroll:U,panOnScrollSpeed:N,panOnScrollMode:T,zoomOnDoubleClick:A,panOnDrag:!L&&W,defaultViewport:R,translateExtent:z,minZoom:V,maxZoom:E,zoomActivationKeyCode:y,preventScrolling:D,noWheelClassName:O,noPanClassName:_},F.createElement(PS,{onSelectionStart:x,onSelectionEnd:w,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:W,isSelecting:!!X,selectionMode:m},e,$&&F.createElement(eD,{onSelectionContextMenu:M,noPanClassName:_,disableKeyboardA11y:j})))};LS.displayName="FlowRenderer";var nD=v.memo(LS);function rD(e){return ke(v.useCallback(n=>e?uS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function sD(e){const t={input:zi(e.input||xS),default:zi(e.default||Bf),output:zi(e.output||bS),group:zi(e.group||Wm)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=zi(e[i]||Bf),s),n);return{...t,...r}}const iD=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},oD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),DS=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:i,onError:o}=ke(oD,Qe),a=rD(e.onlyRenderVisibleElements),l=v.useRef(),c=v.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const h=d.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));i(h)});return l.current=u,u},[]);return v.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),F.createElement("div",{className:"react-flow__nodes",style:Km},a.map(u=>{var k,C,N;let d=u.type||"default";e.nodeTypes[d]||(o==null||o("003",$n.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,m=!!(u.draggable||t&&typeof u.draggable>"u"),x=!!(u.selectable||s&&typeof u.selectable>"u"),w=!!(u.connectable||n&&typeof u.connectable>"u"),S=!!(u.focusable||r&&typeof u.focusable>"u"),p=e.nodeExtent?Om(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,y=(p==null?void 0:p.x)??0,g=(p==null?void 0:p.y)??0,b=iD({x:y,y:g,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return F.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||J.Bottom,targetPosition:u.targetPosition||J.Top,hidden:u.hidden,xPos:y,yPos:g,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:m,isSelectable:x,isConnectable:w,isFocusable:S,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((k=u[Ne])==null?void 0:k.z)??0,isParent:!!((C=u[Ne])!=null&&C.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((N=u[Ne])!=null&&N.handleBounds)})}))};DS.displayName="NodeRenderer";var aD=v.memo(DS);const lD=(e,t,n)=>n===J.Left?e-t:n===J.Right?e+t:e,cD=(e,t,n)=>n===J.Top?e-t:n===J.Bottom?e+t:e,$y="react-flow__edgeupdater",Ly=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a})=>F.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:it([$y,`${$y}-${a}`]),cx:lD(t,r,e),cy:cD(n,r,e),r,stroke:"transparent",fill:"transparent"}),uD=()=>!0;var bs=e=>{const t=({id:n,className:r,type:s,data:i,onClick:o,onEdgeDoubleClick:a,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,style:S,source:p,target:y,sourceX:g,sourceY:b,targetX:k,targetY:C,sourcePosition:N,targetPosition:T,elementsSelectable:A,hidden:P,sourceHandleId:R,targetHandleId:z,onContextMenu:V,onMouseEnter:E,onMouseMove:D,onMouseLeave:M,reconnectRadius:O,onReconnect:_,onReconnectStart:j,onReconnectEnd:$,markerEnd:L,markerStart:I,rfId:W,ariaLabel:U,isFocusable:X,isReconnectable:B,pathOptions:q,interactionWidth:K,disableKeyboardA11y:te})=>{const ne=v.useRef(null),[ee,ae]=v.useState(!1),[ye,Ee]=v.useState(!1),Me=ze(),Xt=v.useMemo(()=>`url('#${Ff(I,W)}')`,[I,W]),he=v.useMemo(()=>`url('#${Ff(L,W)}')`,[L,W]);if(P)return null;const Q=We=>{var Jt;const{edges:$t,addSelectedEdges:Er,unselectNodesAndEdges:Cr,multiSelectionActive:jr}=Me.getState(),fn=$t.find(_i=>_i.id===n);fn&&(A&&(Me.setState({nodesSelectionActive:!1}),fn.selected&&jr?(Cr({nodes:[],edges:[fn]}),(Jt=ne.current)==null||Jt.blur()):Er([n])),o&&o(We,fn))},pt=Oi(n,Me.getState,a),Sr=Oi(n,Me.getState,V),bi=Oi(n,Me.getState,E),ls=Oi(n,Me.getState,D),cs=Oi(n,Me.getState,M),dn=(We,$t)=>{if(We.button!==0)return;const{edges:Er,isValidConnection:Cr}=Me.getState(),jr=$t?y:p,fn=($t?z:R)||null,Jt=$t?"target":"source",_i=Cr||uD,Xc=$t,ki=Er.find(Nr=>Nr.id===n);Ee(!0),j==null||j(We,ki,Jt);const Jc=Nr=>{Ee(!1),$==null||$(Nr,ki,Jt)};pS({event:We,handleId:fn,nodeId:jr,onConnect:Nr=>_==null?void 0:_(ki,Nr),isTarget:Xc,getState:Me.getState,setState:Me.setState,isValidConnection:_i,edgeUpdaterType:Jt,onReconnectEnd:Jc})},us=We=>dn(We,!0),_r=We=>dn(We,!1),kr=()=>ae(!0),ds=()=>ae(!1),fs=!A&&!o,Si=We=>{var $t;if(!te&&nS.includes(We.key)&&A){const{unselectNodesAndEdges:Er,addSelectedEdges:Cr,edges:jr}=Me.getState();We.key==="Escape"?(($t=ne.current)==null||$t.blur(),Er({edges:[jr.find(Jt=>Jt.id===n)]})):Cr([n])}};return F.createElement("g",{className:it(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:c,inactive:fs,updating:ee}]),onClick:Q,onDoubleClick:pt,onContextMenu:Sr,onMouseEnter:bi,onMouseMove:ls,onMouseLeave:cs,onKeyDown:X?Si:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${p} to ${y}`,"aria-describedby":X?`${kS}-${W}`:void 0,ref:ne},!ye&&F.createElement(e,{id:n,source:p,target:y,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:m,labelBgPadding:x,labelBgBorderRadius:w,data:i,style:S,sourceX:g,sourceY:b,targetX:k,targetY:C,sourcePosition:N,targetPosition:T,sourceHandleId:R,targetHandleId:z,markerStart:Xt,markerEnd:he,pathOptions:q,interactionWidth:K}),B&&F.createElement(F.Fragment,null,(B==="source"||B===!0)&&F.createElement(Ly,{position:N,centerX:g,centerY:b,radius:O,onMouseDown:us,onMouseEnter:kr,onMouseOut:ds,type:"source"}),(B==="target"||B===!0)&&F.createElement(Ly,{position:T,centerX:k,centerY:C,radius:O,onMouseDown:_r,onMouseEnter:kr,onMouseOut:ds,type:"target"})))};return t.displayName="EdgeWrapper",v.memo(t)};function dD(e){const t={default:bs(e.default||cc),straight:bs(e.bezier||Vm),step:bs(e.step||Fm),smoothstep:bs(e.step||qc),simplebezier:bs(e.simplebezier||zm)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=bs(e[i]||cc),s),n);return{...t,...r}}function Dy(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case J.Top:return{x:r+i/2,y:s};case J.Right:return{x:r+i,y:s+o/2};case J.Bottom:return{x:r+i/2,y:s+o};case J.Left:return{x:r,y:s+o/2}}}function Oy(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const fD=(e,t,n,r,s,i)=>{const o=Dy(n,e,t),a=Dy(i,r,s);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function hD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:i,width:o,height:a,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=Im({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),h=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*h)>0}function Iy(e){var r,s,i,o,a;const t=((r=e==null?void 0:e[Ne])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const mD=[{level:0,isMaxLevel:!0,edges:[]}];function pD(e,t,n=!1){let r=-1;const s=e.reduce((o,a)=>{var u,d;const l=Nt(a.zIndex);let c=l?a.zIndex:0;if(n){const h=t.get(a.target),m=t.get(a.source),x=a.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),w=Math.max(((u=m==null?void 0:m[Ne])==null?void 0:u.z)||0,((d=h==null?void 0:h[Ne])==null?void 0:d.z)||0,1e3);c=(l?a.zIndex:0)+(x?w:0)}return o[c]?o[c].push(a):o[c]=[a],r=c>r?c:r,o},{}),i=Object.entries(s).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return i.length===0?mD:i}function gD(e,t,n){const r=ke(v.useCallback(s=>e?s.edges.filter(i=>{const o=t.get(i.source),a=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&hD({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return pD(r,t,n)}const yD=({color:e="none",strokeWidth:t=1})=>F.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),vD=({color:e="none",strokeWidth:t=1})=>F.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),zy={[lc.Arrow]:yD,[lc.ArrowClosed]:vD};function xD(e){const t=ze();return v.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(zy,e)?zy[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",$n.error009(e)),null)},[e])}const wD=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=xD(t);return l?F.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},F.createElement(l,{color:n,strokeWidth:o})):null},bD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Ff(o,t);r.includes(a)||(s.push({id:a,color:o.color||e,...o}),r.push(a))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},OS=({defaultColor:e,rfId:t})=>{const n=ke(v.useCallback(bD({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((i,o)=>i.id!==s[o].id)));return F.createElement("defs",null,n.map(r=>F.createElement(wD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};OS.displayName="MarkerDefinitions";var SD=v.memo(OS);const _D=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),IS=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:m,onReconnectEnd:x,reconnectRadius:w,children:S,disableKeyboardA11y:p})=>{const{edgesFocusable:y,edgesUpdatable:g,elementsSelectable:b,width:k,height:C,connectionMode:N,nodeInternals:T,onError:A}=ke(_D,Qe),P=gD(t,T,n);return k?F.createElement(F.Fragment,null,P.map(({level:R,edges:z,isMaxLevel:V})=>F.createElement("svg",{key:R,style:{zIndex:R},width:k,height:C,className:"react-flow__edges react-flow__container"},V&&F.createElement(SD,{defaultColor:e,rfId:r}),F.createElement("g",null,z.map(E=>{const[D,M,O]=Iy(T.get(E.source)),[_,j,$]=Iy(T.get(E.target));if(!O||!$)return null;let L=E.type||"default";s[L]||(A==null||A("011",$n.error011(L)),L="default");const I=s[L]||s.default,W=N===rs.Strict?j.target:(j.target??[]).concat(j.source??[]),U=Oy(M.source,E.sourceHandle),X=Oy(W,E.targetHandle),B=(U==null?void 0:U.position)||J.Bottom,q=(X==null?void 0:X.position)||J.Top,K=!!(E.focusable||y&&typeof E.focusable>"u"),te=E.reconnectable||E.updatable,ne=typeof h<"u"&&(te||g&&typeof te>"u");if(!U||!X)return A==null||A("008",$n.error008(U,E)),null;const{sourceX:ee,sourceY:ae,targetX:ye,targetY:Ee}=fD(D,U,B,_,X,q);return F.createElement(I,{key:E.id,id:E.id,className:it([E.className,i]),type:L,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:ee,sourceY:ae,targetX:ye,targetY:Ee,sourcePosition:B,targetPosition:q,elementsSelectable:b,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:u,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:m,onReconnectEnd:x,reconnectRadius:w,rfId:r,ariaLabel:E.ariaLabel,isFocusable:K,isReconnectable:ne,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:p})})))),S):null};IS.displayName="EdgeRenderer";var kD=v.memo(IS);const ED=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function CD({children:e}){const t=ke(ED);return F.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function jD(e){const t=qm(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ND={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top},zS=({nodeId:e,handleType:t,style:n,type:r=Jn.Bezier,CustomComponent:s,connectionStatus:i})=>{var C,N,T;const{fromNode:o,handleId:a,toX:l,toY:c,connectionMode:u}=ke(v.useCallback(A=>({fromNode:A.nodeInternals.get(e),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[e]),Qe),d=(C=o==null?void 0:o[Ne])==null?void 0:C.handleBounds;let h=d==null?void 0:d[t];if(u===rs.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!h)return null;const m=a?h.find(A=>A.id===a):h[0],x=m?m.x+m.width/2:(o.width??0)/2,w=m?m.y+m.height/2:o.height??0,S=(((N=o.positionAbsolute)==null?void 0:N.x)??0)+x,p=(((T=o.positionAbsolute)==null?void 0:T.y)??0)+w,y=m==null?void 0:m.position,g=y?ND[y]:null;if(!y||!g)return null;if(s)return F.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:S,fromY:p,toX:l,toY:c,fromPosition:y,toPosition:g,connectionStatus:i});let b="";const k={sourceX:S,sourceY:p,sourcePosition:y,targetX:l,targetY:c,targetPosition:g};return r===Jn.Bezier?[b]=aS(k):r===Jn.Step?[b]=zf({...k,borderRadius:0}):r===Jn.SmoothStep?[b]=zf(k):r===Jn.SimpleBezier?[b]=oS(k):b=`M${S},${p} ${l},${c}`,F.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};zS.displayName="ConnectionLine";const TD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function PD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:i,nodesConnectable:o,width:a,height:l,connectionStatus:c}=ke(TD,Qe);return!(s&&i&&a&&o)?null:F.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},F.createElement("g",{className:it(["react-flow__connection",c])},F.createElement(zS,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:c})))}function Fy(e,t){return v.useRef(null),ze(),v.useMemo(()=>t(e),[e])}const FS=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:x,onSelectionStart:w,onSelectionEnd:S,connectionLineType:p,connectionLineStyle:y,connectionLineComponent:g,connectionLineContainerStyle:b,selectionKeyCode:k,selectionOnDrag:C,selectionMode:N,multiSelectionKeyCode:T,panActivationKeyCode:A,zoomActivationKeyCode:P,deleteKeyCode:R,onlyRenderVisibleElements:z,elementsSelectable:V,selectNodesOnDrag:E,defaultViewport:D,translateExtent:M,minZoom:O,maxZoom:_,preventScrolling:j,defaultMarkerColor:$,zoomOnScroll:L,zoomOnPinch:I,panOnScroll:W,panOnScrollSpeed:U,panOnScrollMode:X,zoomOnDoubleClick:B,panOnDrag:q,onPaneClick:K,onPaneMouseEnter:te,onPaneMouseMove:ne,onPaneMouseLeave:ee,onPaneScroll:ae,onPaneContextMenu:ye,onEdgeContextMenu:Ee,onEdgeMouseEnter:Me,onEdgeMouseMove:Xt,onEdgeMouseLeave:he,onReconnect:Q,onReconnectStart:pt,onReconnectEnd:Sr,reconnectRadius:bi,noDragClassName:ls,noWheelClassName:cs,noPanClassName:dn,elevateEdgesOnSelect:us,disableKeyboardA11y:_r,nodeOrigin:kr,nodeExtent:ds,rfId:fs})=>{const Si=Fy(e,sD),We=Fy(t,dD);return jD(i),F.createElement(nD,{onPaneClick:K,onPaneMouseEnter:te,onPaneMouseMove:ne,onPaneMouseLeave:ee,onPaneContextMenu:ye,onPaneScroll:ae,deleteKeyCode:R,selectionKeyCode:k,selectionOnDrag:C,selectionMode:N,onSelectionStart:w,onSelectionEnd:S,multiSelectionKeyCode:T,panActivationKeyCode:A,zoomActivationKeyCode:P,elementsSelectable:V,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:L,zoomOnPinch:I,zoomOnDoubleClick:B,panOnScroll:W,panOnScrollSpeed:U,panOnScrollMode:X,panOnDrag:q,defaultViewport:D,translateExtent:M,minZoom:O,maxZoom:_,onSelectionContextMenu:x,preventScrolling:j,noDragClassName:ls,noWheelClassName:cs,noPanClassName:dn,disableKeyboardA11y:_r},F.createElement(CD,null,F.createElement(kD,{edgeTypes:We,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:z,onEdgeContextMenu:Ee,onEdgeMouseEnter:Me,onEdgeMouseMove:Xt,onEdgeMouseLeave:he,onReconnect:Q,onReconnectStart:pt,onReconnectEnd:Sr,reconnectRadius:bi,defaultMarkerColor:$,noPanClassName:dn,elevateEdgesOnSelect:!!us,disableKeyboardA11y:_r,rfId:fs},F.createElement(PD,{style:y,type:p,component:g,containerStyle:b})),F.createElement("div",{className:"react-flow__edgelabel-renderer"}),F.createElement(aD,{nodeTypes:Si,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:E,onlyRenderVisibleElements:z,noPanClassName:dn,noDragClassName:ls,disableKeyboardA11y:_r,nodeOrigin:kr,nodeExtent:ds,rfId:fs})))};FS.displayName="GraphView";var AD=v.memo(FS);const Hf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],zn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Hf,nodeExtent:Hf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:rs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:oL,isValidConnection:void 0},RD=()=>xM((e,t)=>({...zn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:Qu(n,r,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",i=typeof r<"u",o=s?Qu(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?r:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(d.transform),m=n.reduce((w,S)=>{const p=s.get(S.id);if(p!=null&&p.hidden)s.set(p.id,{...p,[Ne]:{...p[Ne],handleBounds:void 0}});else if(p){const y=Dm(S.nodeElement);!!(y.width&&y.height&&(p.width!==y.width||p.height!==y.height||S.forceUpdate))&&(s.set(p.id,{...p,[Ne]:{...p[Ne],handleBounds:{source:My(".source",S.nodeElement,h,c),target:My(".target",S.nodeElement,h,c)}},...y}),w.push({id:p.id,type:"dimensions",dimensions:y}))}return w},[]);CS(s,c);const x=o||i&&!o&&jS(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:x}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:s};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(i){const c=TS(n,a()),u=Qu(c,s,o,l);e({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,a=null;r?o=n.map(l=>qn(l,!0)):(o=Fs(i(),n),a=Fs(s,[])),Ka({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,a=null;r?o=n.map(l=>qn(l,!0)):(o=Fs(s,n),a=Fs(i(),[])),Ka({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:i}=t(),o=n||i(),a=r||s,l=o.map(u=>(u.selected=!1,qn(u.id,!1))),c=a.map(u=>qn(u.id,!1));Ka({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(a=>a.selected).map(a=>qn(a.id,!1)),o=n.filter(a=>a.selected).map(a=>qn(a.id,!1));Ka({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=Om(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:i,d3Zoom:o,d3Selection:a,translateExtent:l}=t();if(!o||!a||!n.x&&!n.y)return!1;const c=lr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[s,i]],d=o==null?void 0:o.constrain()(c,u,l);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:zn.connectionNodeId,connectionHandleId:zn.connectionHandleId,connectionHandleType:zn.connectionHandleType,connectionStatus:zn.connectionStatus,connectionStartHandle:zn.connectionStartHandle,connectionEndHandle:zn.connectionEndHandle}),reset:()=>e({...zn})}),Object.is),VS=({children:e})=>{const t=v.useRef(null);return t.current||(t.current=RD()),F.createElement(Q5,{value:t.current},e)};VS.displayName="ReactFlowProvider";const BS=({children:e})=>v.useContext(Wc)?F.createElement(F.Fragment,null,e):F.createElement(VS,null,e);BS.displayName="ReactFlowWrapper";const MD={input:xS,default:Bf,output:bS,group:Wm},$D={default:cc,straight:Vm,step:Fm,smoothstep:qc,simplebezier:zm},LD=[0,0],DD=[15,15],OD={x:0,y:0,zoom:1},ID={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},US=v.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i=MD,edgeTypes:o=$D,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:h,onConnect:m,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:p,onNodeMouseEnter:y,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:k,onNodeDoubleClick:C,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:A,onNodesDelete:P,onEdgesDelete:R,onSelectionChange:z,onSelectionDragStart:V,onSelectionDrag:E,onSelectionDragStop:D,onSelectionContextMenu:M,onSelectionStart:O,onSelectionEnd:_,connectionMode:j=rs.Strict,connectionLineType:$=Jn.Bezier,connectionLineStyle:L,connectionLineComponent:I,connectionLineContainerStyle:W,deleteKeyCode:U="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:B=!1,selectionMode:q=qo.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:te=ac()?"Meta":"Control",zoomActivationKeyCode:ne=ac()?"Meta":"Control",snapToGrid:ee=!1,snapGrid:ae=DD,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:Ee=!0,nodesDraggable:Me,nodesConnectable:Xt,nodesFocusable:he,nodeOrigin:Q=LD,edgesFocusable:pt,edgesUpdatable:Sr,elementsSelectable:bi,defaultViewport:ls=OD,minZoom:cs=.5,maxZoom:dn=2,translateExtent:us=Hf,preventScrolling:_r=!0,nodeExtent:kr,defaultMarkerColor:ds="#b1b1b7",zoomOnScroll:fs=!0,zoomOnPinch:Si=!0,panOnScroll:We=!1,panOnScrollSpeed:$t=.5,panOnScrollMode:Er=Hr.Free,zoomOnDoubleClick:Cr=!0,panOnDrag:jr=!0,onPaneClick:fn,onPaneMouseEnter:Jt,onPaneMouseMove:_i,onPaneMouseLeave:Xc,onPaneScroll:ki,onPaneContextMenu:Jc,children:rp,onEdgeContextMenu:Nr,onEdgeDoubleClick:c_,onEdgeMouseEnter:u_,onEdgeMouseMove:d_,onEdgeMouseLeave:f_,onEdgeUpdate:h_,onEdgeUpdateStart:m_,onEdgeUpdateEnd:p_,onReconnect:g_,onReconnectStart:y_,onReconnectEnd:v_,reconnectRadius:x_=10,edgeUpdaterRadius:w_=10,onNodesChange:b_,onEdgesChange:S_,noDragClassName:__="nodrag",noWheelClassName:k_="nowheel",noPanClassName:sp="nopan",fitView:E_=!1,fitViewOptions:C_,connectOnClick:j_=!0,attributionPosition:N_,proOptions:T_,defaultEdgeOptions:P_,elevateNodesOnSelect:A_=!0,elevateEdgesOnSelect:R_=!1,disableKeyboardA11y:ip=!1,autoPanOnConnect:M_=!0,autoPanOnNodeDrag:$_=!0,connectionRadius:L_=20,isValidConnection:D_,onError:O_,style:I_,id:op,nodeDragThreshold:z_,...F_},V_)=>{const Qc=op||"1";return F.createElement("div",{...F_,style:{...I_,...ID},ref:V_,className:it(["react-flow",s]),"data-testid":"rf__wrapper",id:op},F.createElement(BS,null,F.createElement(AD,{onInit:c,onMove:u,onMoveStart:d,onMoveEnd:h,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:k,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:o,connectionLineType:$,connectionLineStyle:L,connectionLineComponent:I,connectionLineContainerStyle:W,selectionKeyCode:X,selectionOnDrag:B,selectionMode:q,deleteKeyCode:U,multiSelectionKeyCode:te,panActivationKeyCode:K,zoomActivationKeyCode:ne,onlyRenderVisibleElements:ye,selectNodesOnDrag:Ee,defaultViewport:ls,translateExtent:us,minZoom:cs,maxZoom:dn,preventScrolling:_r,zoomOnScroll:fs,zoomOnPinch:Si,zoomOnDoubleClick:Cr,panOnScroll:We,panOnScrollSpeed:$t,panOnScrollMode:Er,panOnDrag:jr,onPaneClick:fn,onPaneMouseEnter:Jt,onPaneMouseMove:_i,onPaneMouseLeave:Xc,onPaneScroll:ki,onPaneContextMenu:Jc,onSelectionContextMenu:M,onSelectionStart:O,onSelectionEnd:_,onEdgeContextMenu:Nr,onEdgeDoubleClick:c_,onEdgeMouseEnter:u_,onEdgeMouseMove:d_,onEdgeMouseLeave:f_,onReconnect:g_??h_,onReconnectStart:y_??m_,onReconnectEnd:v_??p_,reconnectRadius:x_??w_,defaultMarkerColor:ds,noDragClassName:__,noWheelClassName:k_,noPanClassName:sp,elevateEdgesOnSelect:R_,rfId:Qc,disableKeyboardA11y:ip,nodeOrigin:Q,nodeExtent:kr}),F.createElement(NL,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:p,nodesDraggable:Me,nodesConnectable:Xt,nodesFocusable:he,edgesFocusable:pt,edgesUpdatable:Sr,elementsSelectable:bi,elevateNodesOnSelect:A_,minZoom:cs,maxZoom:dn,nodeExtent:kr,onNodesChange:b_,onEdgesChange:S_,snapToGrid:ee,snapGrid:ae,connectionMode:j,translateExtent:us,connectOnClick:j_,defaultEdgeOptions:P_,fitView:E_,fitViewOptions:C_,onNodesDelete:P,onEdgesDelete:R,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:A,onSelectionDrag:E,onSelectionDragStart:V,onSelectionDragStop:D,noPanClassName:sp,nodeOrigin:Q,rfId:Qc,autoPanOnConnect:M_,autoPanOnNodeDrag:$_,onError:O_,connectionRadius:L_,isValidConnection:D_,nodeDragThreshold:z_}),F.createElement(CL,{onSelectionChange:z}),rp,F.createElement(eL,{proOptions:T_,position:N_}),F.createElement(ML,{rfId:Qc,disableKeyboardA11y:ip})))});US.displayName="ReactFlow";function HS(e){return t=>{const[n,r]=v.useState(t),s=v.useCallback(i=>r(o=>e(i,o)),[]);return[n,r,s]}}const zD=HS(TS),FD=HS(KL);function VD(){return F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},F.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function BD(){return F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},F.createElement("path",{d:"M0 0h32v4.2H0z"}))}function UD(){return F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},F.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function HD(){return F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},F.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function WD(){return F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},F.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Yi=({children:e,className:t,...n})=>F.createElement("button",{type:"button",className:it(["react-flow__controls-button",t]),...n},e);Yi.displayName="ControlButton";const qD=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),WS=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:c,children:u,position:d="bottom-left"})=>{const h=ze(),[m,x]=v.useState(!1),{isInteractive:w,minZoomReached:S,maxZoomReached:p}=ke(qD,Qe),{zoomIn:y,zoomOut:g,fitView:b}=qm();if(v.useEffect(()=>{x(!0)},[]),!m)return null;const k=()=>{y(),i==null||i()},C=()=>{g(),o==null||o()},N=()=>{b(s),a==null||a()},T=()=>{h.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),l==null||l(!w)};return F.createElement(Zb,{className:it(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls"},t&&F.createElement(F.Fragment,null,F.createElement(Yi,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:p},F.createElement(VD,null)),F.createElement(Yi,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},F.createElement(BD,null))),n&&F.createElement(Yi,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},F.createElement(UD,null)),r&&F.createElement(Yi,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},w?F.createElement(WD,null):F.createElement(HD,null)),u)};WS.displayName="Controls";var KD=v.memo(WS),Kt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Kt||(Kt={}));function GD({color:e,dimensions:t,lineWidth:n}){return F.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function YD({color:e,radius:t}){return F.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const XD={[Kt.Dots]:"#91919a",[Kt.Lines]:"#eee",[Kt.Cross]:"#e2e2e2"},JD={[Kt.Dots]:1,[Kt.Lines]:1,[Kt.Cross]:6},QD=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function qS({id:e,variant:t=Kt.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=2,color:o,style:a,className:l}){const c=v.useRef(null),{transform:u,patternId:d}=ke(QD,Qe),h=o||XD[t],m=r||JD[t],x=t===Kt.Dots,w=t===Kt.Cross,S=Array.isArray(n)?n:[n,n],p=[S[0]*u[2]||1,S[1]*u[2]||1],y=m*u[2],g=w?[y,y]:p,b=x?[y/i,y/i]:[g[0]/i,g[1]/i];return F.createElement("svg",{className:it(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},F.createElement("pattern",{id:d+e,x:u[0]%p[0],y:u[1]%p[1],width:p[0],height:p[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},x?F.createElement(YD,{color:h,radius:y/i}):F.createElement(GD,{dimensions:g,color:h,lineWidth:s})),F.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}qS.displayName="Background";var ZD=v.memo(qS);const eO=({userId:e,onClose:t})=>{const[n,r,s]=zD([]),[i,o,a]=FD([]),[l,c]=v.useState(null),[u,d]=v.useState([]),[h,m]=v.useState([]),[x,w]=v.useState({}),[S,p]=v.useState(!0);Tm();const[y,g]=v.useState({followers:!1,events:!1,likesSection:{},attendSection:{}}),b=0,k=0,C=v.useCallback(R=>o(z=>lS(R,z)),[o]);v.useEffect(()=>{(async()=>{p(!0);const{data:z,error:V}=await G.from("profiles").select("id, full_name, avatar").eq("id",e).single();if(V){console.error("Error fetching profile:",V),p(!1);return}const{data:E,error:D}=await G.from("communities").select("user_id").eq("community_leader_id",e);if(D){console.error("Error fetching community followers:",D),p(!1);return}const M=(E==null?void 0:E.map(ee=>ee.user_id))||[];let O=[];if(M.length){const{data:ee,error:ae}=await G.from("profiles").select("id, full_name, avatar").in("id",M);if(ae){console.error("Error fetching followers profiles:",ae),p(!1);return}O=ee||[]}d(O);const{data:_,error:j}=await G.from("events").select("*").eq("organizer_id",e);if(j){console.error("Error fetching events:",j),p(!1);return}const $=(_||[]).map(ee=>ee.id);let L=[],I=[];if($.length){const{data:ee,error:ae}=await G.from("likes").select("event_id, user_id").in("event_id",$);if(ae){console.error("Error fetching likes:",ae),p(!1);return}L=ee||[];const{data:ye,error:Ee}=await G.from("attendances").select("event_id, user_id").in("event_id",$);if(Ee){console.error("Error fetching attendances:",Ee),p(!1);return}I=ye||[]}const W=L.map(ee=>ee.user_id),U=I.map(ee=>ee.user_id),X=Array.from(new Set([...M,...W,...U,e])),{data:B,error:q}=await G.from("profiles").select("id, full_name, avatar").in("id",X);if(q){console.error("Error fetching extra profiles:",q),p(!1);return}const K=B||[],te={};K.forEach(ee=>{te[ee.id]=ee}),w(te);const ne=(_||[]).map(ee=>{const ae=L.filter(Ee=>Ee.event_id===ee.id),ye=I.filter(Ee=>Ee.event_id===ee.id);return{...ee,likes:ae,attending:ye}});m(ne),p(!1)})()},[e]);const N=()=>g(R=>({...R,followers:!R.followers})),T=()=>g(R=>({...R,events:!R.events})),A=R=>g(z=>({...z,likesSection:{...z.likesSection,[R]:!z.likesSection[R]}})),P=R=>g(z=>({...z,attendSection:{...z.attendSection,[R]:!z.attendSection[R]}}));return v.useEffect(()=>{var V,E,D;if(S)return;const R=[{id:"user",data:{label:f.jsxs("div",{className:"flex items-center gap-2 cursor-default select-none",children:[f.jsx("img",{src:((V=x[e])==null?void 0:V.avatar)||"/default-avatar.png",alt:(E=x[e])==null?void 0:E.full_name,className:"w-6 h-6 rounded-full border border-white object-cover"}),f.jsx("span",{className:"text-white font-semibold",children:((D=x[e])==null?void 0:D.full_name)||"Mi Usuario"})]})},position:{x:b,y:k},style:{backgroundColor:"#800000",padding:10,borderRadius:12,color:"white",cursor:"default"},sourcePosition:"right"},{id:"my-network",data:{label:f.jsx("button",{onClick:M=>{M.stopPropagation(),N()},className:"font-semibold",children:" Mi Red"})},position:{x:b,y:k+100},style:{backgroundColor:"#FCE8B2",padding:8,borderRadius:10,cursor:"pointer"},targetPosition:"top"},{id:"my-events",data:{label:f.jsx("button",{onClick:M=>{M.stopPropagation(),T()},className:"font-semibold",children:" Mis Eventos"})},position:{x:b+200,y:k},style:{backgroundColor:"#FCE8B2",padding:8,borderRadius:10,cursor:"pointer"},targetPosition:"left"}],z=[{id:"edge-user-network",source:"user",target:"my-network",type:"straight",animated:!0,sourcePosition:"bottom",targetPosition:"top"},{id:"edge-user-events",source:"user",target:"my-events",type:"straight",animated:!0,sourcePosition:"right",targetPosition:"left"}];y.followers&&u.forEach((M,O)=>{const _=k+180+O*70;R.push({id:`f-${M.id}`,data:{label:f.jsxs("button",{onClick:j=>{j.stopPropagation(),c(M)},className:"flex items-center gap-2 text-left hover:text-folkiAmber",children:[f.jsx("img",{src:M.avatar||"/default-avatar.png",alt:M.full_name,className:"w-6 h-6 rounded-full border border-gray-300 object-cover"}),f.jsx("span",{children:M.full_name})]})},position:{x:b,y:_},style:{backgroundColor:"#fff",padding:6,borderRadius:8}}),z.push({id:`edge-f-${M.id}`,source:"my-network",target:`f-${M.id}`,type:"straight"})}),y.events&&h.forEach((O,_)=>{const j=k+120+_*150,$=b+200,L=O.id;R.push({id:`e-${L}`,data:{label:f.jsxs("div",{className:"font-semibold",children:[""," ",O.title.length>25?`${O.title.slice(0,25)}`:O.title]})},position:{x:$,y:j},style:{backgroundColor:"#fff",padding:6,borderRadius:8},sourcePosition:"right",targetPosition:"top"}),z.push({id:`edge-e-${L}`,source:"my-events",target:`e-${L}`,type:"straight",sourcePosition:"bottom",targetPosition:"top"});const I=`e-${L}-likes`,W=$+250;R.push({id:I,data:{label:f.jsxs("button",{onClick:B=>{B.stopPropagation(),A(L)},className:"flex items-center gap-1",children:[" Likes (",O.likes.length,")"]})},position:{x:W,y:j},style:{backgroundColor:"#fff3f3",padding:6,borderRadius:8},targetPosition:"left",sourcePosition:"bottom"}),z.push({id:`edge-${I}`,source:`e-${L}`,target:I,type:"straight",sourcePosition:"right",targetPosition:"left"});const U=`e-${L}-attends`,X=W+250;R.push({id:U,data:{label:f.jsxs("button",{onClick:B=>{B.stopPropagation(),P(L)},className:"flex items-center gap-1",children:[" Asistir (",O.attending.length,")"]})},position:{x:X,y:j},style:{backgroundColor:"#f3fff3",padding:6,borderRadius:8},targetPosition:"left",sourcePosition:"bottom"}),z.push({id:`edge-${U}`,source:`e-${L}`,target:U,type:"straight",sourcePosition:"right",targetPosition:"left"}),y.likesSection[L]&&O.likes.forEach((B,q)=>{var te,ne,ee;const K=`like-u-${L}-${B.user_id}`;R.push({id:K,data:{label:f.jsxs("button",{onClick:ae=>{ae.stopPropagation(),c(x[B.user_id])},className:"flex items-center gap-2 text-left hover:text-folkiAmber",children:[f.jsx("img",{src:((te=x[B.user_id])==null?void 0:te.avatar)||"/default-avatar.png",alt:(ne=x[B.user_id])==null?void 0:ne.full_name,className:"w-5 h-5 rounded-full border border-folkiRed object-cover"}),f.jsx("span",{className:"text-xs",children:((ee=x[B.user_id])==null?void 0:ee.full_name)||"user"})]})},position:{x:W,y:j+40+q*40},style:{backgroundColor:"#fff",padding:4,borderRadius:6},targetPosition:"top"}),z.push({id:`edge-${I}-${K}`,source:I,target:K,type:"straight",sourcePosition:"bottom",targetPosition:"top"})}),y.attendSection[L]&&O.attending.forEach((B,q)=>{var te,ne,ee;const K=`att-u-${L}-${B.user_id}`;R.push({id:K,data:{label:f.jsxs("button",{onClick:ae=>{ae.stopPropagation(),c(x[B.user_id])},className:"flex items-center gap-2 text-left hover:text-folkiAmber",children:[f.jsx("img",{src:((te=x[B.user_id])==null?void 0:te.avatar)||"/default-avatar.png",alt:(ne=x[B.user_id])==null?void 0:ne.full_name,className:"w-5 h-5 rounded-full border border-folkiRed object-cover"}),f.jsx("span",{className:"text-xs",children:((ee=x[B.user_id])==null?void 0:ee.full_name)||"user"})]})},position:{x:X,y:j+40+q*40},style:{backgroundColor:"#fff",padding:4,borderRadius:6},targetPosition:"top"}),z.push({id:`edge-${U}-${K}`,source:U,target:K,type:"straight",sourcePosition:"bottom",targetPosition:"top"})})}),r(R),o(z)},[y,u,h,x,S]),f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.8)"},onClick:t,children:f.jsxs("div",{className:"bg-folkiCream w-full h-[80vh] max-w-6xl rounded-2xl p-4 relative shadow-lg flex flex-col",onClick:R=>R.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("h2",{className:"text-2xl font-bold text-folkiRed",children:"Mi Comunidad"}),f.jsx("button",{onClick:t,className:"text-folkiRed hover:text-folkiAmber text-xl font-bold","aria-label":"Cerrar modal",children:""})]}),f.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Explor tu comunidad de forma visual y jerrquica."}),S?f.jsx("div",{className:"flex justify-center items-center h-full text-folkiRed font-semibold text-xl",children:"Diseando tu comunidad..."}):f.jsxs("div",{className:"w-full flex-1 border border-folkiRed rounded-xl relative",style:{padding:0,margin:0,boxSizing:"border-box",backgroundColor:"#FCE8B2"},children:[f.jsxs(US,{nodes:n,edges:i,onNodesChange:s,onEdgesChange:a,onConnect:C,panOnDrag:!0,zoomOnScroll:!1,zoomOnPinch:!1,defaultViewport:{x:0,y:0,zoom:1},style:{width:"100%",height:"100%",margin:0,padding:0,border:"none"},children:[f.jsx(ZD,{}),f.jsx(KD,{showInteractive:!1})]}),l&&f.jsx(Nm,{userId:l.id,onClose:()=>c(null)})]})]})})},tO=({imageUrl:e,onClose:t})=>{const[n,r]=v.useState(!1);return v.useEffect(()=>{setTimeout(()=>r(!0),10)},[]),v.useEffect(()=>{const s=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t]),f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:t,children:f.jsxs("div",{onClick:s=>s.stopPropagation(),className:`relative transition-transform duration-300 ${n?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:[f.jsx("button",{onClick:t,className:"absolute top-[-1.5rem] right-[-1.5rem] text-white text-3xl bg-black bg-opacity-40 hover:bg-opacity-70 rounded-full px-3 py-1 transition",children:""}),f.jsx("img",{src:e,alt:"avatar",className:"max-w-[90vw] max-h-[90vh] rounded-xl shadow-2xl"})]})})},nO=()=>{const{user:e,logout:t}=Tm(),{allEvents:n,toggleLike:r,toggleAttendance:s,refreshEvents:i}=xb(),[o,a]=v.useState(null),[l,c]=v.useState(null),[u,d]=v.useState(!1),[h,m]=v.useState(!1),[x,w]=v.useState(!1),[S,p]=v.useState(null),[y,g]=v.useState(!1),[b,k]=v.useState(""),[C,N]=v.useState(!1),[T,A]=v.useState(!1),[P,R]=v.useState(null),[z,V]=v.useState(!1),[E,D]=v.useState("");v.useEffect(()=>{e&&M()},[e]);async function M(){if(!e)return;const{data:L,error:I}=await G.from("profiles").select("avatar, full_name, instagram, birthdate, role, created_at").eq("id",e.id).single();I?(console.error("Error al obtener perfil:",I),a(null),c(null)):(a((L==null?void 0:L.avatar)||null),c(L))}async function O(L){var q;const I=(q=L.target.files)==null?void 0:q[0];if(!I||!e)return;d(!0);const W=I.name.split(".").pop(),U=Date.now(),X=`avatar_${U}.${W}`,B=`${e.id}/${X}`;try{const{data:K}=await G.storage.from("avatars").list(e.id),ne=((K==null?void 0:K.filter(ye=>ye.name.startsWith("avatar_")))||[]).map(ye=>`${e.id}/${ye.name}`);ne.length&&await G.storage.from("avatars").remove(ne),await G.storage.from("avatars").upload(B,I,{upsert:!0});const{data:ee}=G.storage.from("avatars").getPublicUrl(B),ae=`${ee.publicUrl}?t=${U}`;await G.from("profiles").update({avatar:ae}).eq("id",e.id),a(ae),c(ye=>({...ye,avatar:ae}))}catch(K){console.error("Error subiendo avatar:",K)}finally{d(!1)}}const _=Array.isArray(n)?n.filter(L=>L.organizer_id===(e==null?void 0:e.id)):[],j=async L=>{g(!0),k("");try{const{error:I}=await G.from("events").update({title:L.title,description:L.description,type:L.type,province:L.province,city:L.city,address:L.address,date:L.date,is_free:L.is_free,price_anticipada:L.price_anticipada,price_general:L.price_general,multimedia:L.multimedia}).eq("id",S.id);if(I)throw I;i&&await i(),p(null),N(!0)}catch{k("Error actualizando evento, intent nuevamente.")}finally{g(!1)}},$=async()=>{if(P){V(!0),D("");try{const{error:L}=await G.from("events").delete().eq("id",P.id);L?D("Error eliminando evento, intent nuevamente."):(R(null),window.location.reload())}catch{D("Error eliminando evento, intent nuevamente.")}finally{V(!1)}}};return!e||!l?null:f.jsxs("div",{className:"bg-folkiCream rounded-2xl shadow-xl p-6 max-w-2xl mx-auto mt-10 text-folkiRed",children:[f.jsx("h2",{className:"text-3xl font-extrabold mb-6 text-center",children:"Mi Perfil"}),f.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[f.jsxs("div",{className:"relative w-28 h-28 rounded-full overflow-hidden border-4 border-folkiAmber bg-gray-200 cursor-pointer hover:brightness-90",onClick:()=>o&&m(!0),children:[o?f.jsx("img",{src:o,alt:"avatar",className:"w-full h-full object-cover"}):f.jsx("span",{className:"text-gray-500",children:"avatar"}),u&&f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center text-white font-semibold",children:"Subiendo..."})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"avatarUpload",className:"cursor-pointer px-4 py-2 bg-folkiRed text-folkiCream rounded-xl hover:bg-folkiAmber transition",children:"Cambiar foto"}),f.jsx("input",{id:"avatarUpload",type:"file",accept:"image/*",className:"hidden",onChange:O,disabled:u})]})]}),f.jsxs("div",{className:"space-y-2 mb-6",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Nombre completo:"})," ",l.full_name||"No disponible"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Email:"})," ",e.email]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Instagram:"})," ",l.instagram||"No cargado"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Fecha de nacimiento:"})," ",l.birthdate||"No cargada"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Rol:"})," ",l.role==="admin"?"Administrador":"Usuario"]}),f.jsxs("p",{className:"text-sm text-neutral-600",children:["Miembro desde ",new Date(l.created_at||e.created_at).toLocaleDateString("es-AR")]})]}),f.jsx("button",{onClick:()=>A(!0),className:"mb-4 w-full px-5 py-3 bg-folkiAmber text-folkiRed rounded-xl font-semibold hover:bg-folkiRed hover:text-folkiCream transition",children:"Comunidad"}),f.jsxs("button",{onClick:()=>w(L=>!L),className:"w-full flex items-center justify-between bg-folkiRed text-folkiCream hover:bg-folkiAmber hover:text-folkiRed transition font-semibold rounded-xl px-5 py-3 mb-4",children:[f.jsxs("span",{children:["Eventos activos (",_.length,")"]}),x?f.jsx(lw,{}):f.jsx(aw,{})]}),f.jsx("div",{className:`${x?"block":"hidden"} transition-all duration-500`,children:_.length===0?f.jsx("p",{className:"text-center text-gray-600 mb-4",children:"No tens eventos activos."}):f.jsx("div",{className:"grid gap-4",children:_.map(L=>f.jsxs("div",{className:"relative",children:[f.jsx(Ql,{event:L,currentUserId:e.id,onToggleLike:r,onToggleAttending:s}),f.jsx("button",{onClick:()=>p(L),className:"absolute top-2 right-12 bg-folkiRed text-folkiCream hover:bg-folkiAmber hover:text-folkiRed p-2 rounded-full shadow",children:f.jsx(E2,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>R(L),className:"absolute top-2 right-2 bg-folkiRed text-folkiCream hover:bg-folkiAmber hover:text-folkiRed p-2 rounded-full shadow",children:f.jsx(Bh,{className:"w-5 h-5"})})]},L.id))})}),f.jsx("button",{type:"button",onClick:async()=>{await t()&&window.location.reload()},className:"mt-6 w-full px-6 py-3 bg-folkiRed text-folkiCream rounded-xl transition",children:"Cerrar sesin"}),h&&o&&f.jsx(tO,{imageUrl:o,onClose:()=>m(!1)}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4 overflow-auto",onClick:()=>!y&&p(null),children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:[f.jsx("button",{className:"absolute top-4 right-4 text-gray-700 hover:text-black",onClick:()=>!y&&p(null),children:f.jsx(qt,{className:"w-6 h-6"})}),f.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Editar evento"}),f.jsx(gb,{currentUser:e,onSubmit:j,initialData:S,isEditing:!0,isSubmitting:y,error:b})]})}),C&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm p-6 text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-folkiRed mb-4",children:"Evento actualizado"}),f.jsx("p",{className:"text-gray-700 mb-6",children:"Tu evento fue editado con xito."}),f.jsx("button",{onClick:()=>window.location.reload(),className:"bg-folkiRed hover:bg-folkiAmber text-folkiCream px-6 py-2 rounded-lg transition",children:"Aceptar"})]})}),T&&f.jsx(eO,{onClose:()=>A(!1),userId:e.id}),P&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",onClick:()=>!z&&R(null),children:f.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm p-6 text-center",onClick:L=>L.stopPropagation(),children:[f.jsx("h2",{className:"text-2xl font-bold text-folkiRed mb-4",children:"Eliminar evento"}),f.jsx("p",{className:"text-gray-700 mb-6",children:"Ests seguro que quers eliminar este evento? Esta accin no se puede deshacer."}),E&&f.jsx("p",{className:"text-red-600 mb-4",children:E}),f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx("button",{onClick:$,disabled:z,className:"bg-folkiRed hover:bg-folkiAmber text-folkiCream px-6 py-2 rounded-lg transition",children:z?"Eliminando...":"S, eliminar"}),f.jsx("button",{onClick:()=>R(null),disabled:z,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-2 rounded-lg transition",children:"Cancelar"})]})]})})]})};var Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.parse=cO;Gm.serialize=uO;const rO=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,sO=/^[\u0021-\u003A\u003C-\u007E]*$/,iO=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,oO=/^[\u0020-\u003A\u003D-\u007E]*$/,aO=Object.prototype.toString,lO=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function cO(e,t){const n=new lO,r=e.length;if(r<2)return n;const s=(t==null?void 0:t.decode)||dO;let i=0;do{const o=e.indexOf("=",i);if(o===-1)break;const a=e.indexOf(";",i),l=a===-1?r:a;if(o>l){i=e.lastIndexOf(";",o-1)+1;continue}const c=Vy(e,i,o),u=By(e,o,c),d=e.slice(c,u);if(n[d]===void 0){let h=Vy(e,o+1,l),m=By(e,l,h);const x=s(e.slice(h,m));n[d]=x}i=l+1}while(i<r);return n}function Vy(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function By(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function uO(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!rO.test(e))throw new TypeError(`argument name is invalid: ${e}`);const s=r(t);if(!sO.test(s))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!iO.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!oO.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!fO(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function dO(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function fO(e){return aO.call(e)==="[object Date]"}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Wf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ym(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function KS(e,t,n="/"){return hO(e,t,n,!1)}function hO(e,t,n,r){let s=typeof t=="string"?Ym(t):t,i=mr(s.pathname||"/",n);if(i==null)return null;let o=GS(e);mO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=EO(i);a=_O(o[l],c,r)}return a}function GS(e,t=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ue(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=kn([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Ue(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),GS(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:bO(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of YS(i.path))s(i,o,l)}),t}function YS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=YS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function mO(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:SO(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var pO=/^:[\w-]+$/,gO=3,yO=2,vO=1,xO=10,wO=-2,Uy=e=>e==="*";function bO(e,t){let n=e.split("/"),r=n.length;return n.some(Uy)&&(r+=wO),t&&(r+=yO),n.filter(s=>!Uy(s)).reduce((s,i)=>s+(pO.test(i)?gO:i===""?vO:xO),r)}function SO(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function _O(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",d=dc({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=dc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:kn([i,d.pathname]),pathnameBase:TO(kn([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=kn([i,d.pathnameBase]))}return o}function dc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kO(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const m=a[h];return d&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function kO(e,t=!1,n=!0){cn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function EO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function mr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function CO(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ym(e):e;return{pathname:n?n.startsWith("/")?n:jO(n,t):t,search:PO(r),hash:AO(s)}}function jO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nd(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function XS(e){let t=NO(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function JS(e,t,n,r=!1){let s;typeof e=="string"?s=Ym(e):(s={...e},Ue(!s.pathname||!s.pathname.includes("?"),nd("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),nd("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),nd("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=CO(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var kn=e=>e.join("/").replace(/\/\/+/g,"/"),TO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var QS=["POST","PUT","PATCH","DELETE"];new Set(QS);var MO=["GET",...QS];new Set(MO);var wi=v.createContext(null);wi.displayName="DataRouter";var Kc=v.createContext(null);Kc.displayName="DataRouterState";var ZS=v.createContext({isTransitioning:!1});ZS.displayName="ViewTransition";var $O=v.createContext(new Map);$O.displayName="Fetchers";var LO=v.createContext(null);LO.displayName="Await";var Dn=v.createContext(null);Dn.displayName="Navigation";var Xm=v.createContext(null);Xm.displayName="Location";var On=v.createContext({outlet:null,matches:[],isDataRoute:!1});On.displayName="Route";var Jm=v.createContext(null);Jm.displayName="RouteError";function DO(e,{relative:t}={}){Ue(Gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=v.useContext(Dn),{hash:s,pathname:i,search:o}=ua(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:kn([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Gc(){return v.useContext(Xm)!=null}function br(){return Ue(Gc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Xm).location}var e_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t_(e){v.useContext(Dn).static||v.useLayoutEffect(e)}function Qm(){let{isDataRoute:e}=v.useContext(On);return e?YO():OO()}function OO(){Ue(Gc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(wi),{basename:t,navigator:n}=v.useContext(Dn),{matches:r}=v.useContext(On),{pathname:s}=br(),i=JSON.stringify(XS(r)),o=v.useRef(!1);return t_(()=>{o.current=!0}),v.useCallback((l,c={})=>{if(cn(o.current,e_),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=JS(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:kn([t,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[t,n,i,s,e])}v.createContext(null);function ua(e,{relative:t}={}){let{matches:n}=v.useContext(On),{pathname:r}=br(),s=JSON.stringify(XS(n));return v.useMemo(()=>JS(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function IO(e,t,n,r){Ue(Gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=v.useContext(Dn),{matches:i}=v.useContext(On),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let p=u&&u.path||"";n_(l,!u||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let d=br(),h;h=d;let m=h.pathname||"/",x=m;if(c!=="/"){let p=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(p.length).join("/")}let w=KS(e,{pathname:x});return cn(u||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),cn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),UO(w&&w.map(p=>Object.assign({},p,{params:Object.assign({},a,p.params),pathname:kn([c,s.encodeLocation?s.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:kn([c,s.encodeLocation?s.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,n,r)}function zO(){let e=GO(),t=RO(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:s},n):null,o)}var FO=v.createElement(zO,null),VO=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?v.createElement(On.Provider,{value:this.props.routeContext},v.createElement(Jm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BO({routeContext:e,match:t,children:n}){let r=v.useContext(wi);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(On.Provider,{value:e},n)}function UO(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Ue(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let d,h=!1,m=null,x=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,m=c.route.errorElement||FO,o&&(a<0&&u===0?(n_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,x=null):a===u&&(h=!0,x=c.route.hydrateFallbackElement||null)));let w=t.concat(s.slice(0,u+1)),S=()=>{let p;return d?p=m:h?p=x:c.route.Component?p=v.createElement(c.route.Component,null):c.route.element?p=c.route.element:p=l,v.createElement(BO,{match:c,routeContext:{outlet:l,matches:w,isDataRoute:n!=null},children:p})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?v.createElement(VO,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}function Zm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HO(e){let t=v.useContext(wi);return Ue(t,Zm(e)),t}function WO(e){let t=v.useContext(Kc);return Ue(t,Zm(e)),t}function qO(e){let t=v.useContext(On);return Ue(t,Zm(e)),t}function ep(e){let t=qO(e),n=t.matches[t.matches.length-1];return Ue(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function KO(){return ep("useRouteId")}function GO(){var r;let e=v.useContext(Jm),t=WO("useRouteError"),n=ep("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function YO(){let{router:e}=HO("useNavigate"),t=ep("useNavigate"),n=v.useRef(!1);return t_(()=>{n.current=!0}),v.useCallback(async(s,i={})=>{cn(n.current,e_),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Hy={};function n_(e,t,n){!t&&!Hy[e]&&(Hy[e]=!0,cn(!1,n))}v.memo(XO);function XO({routes:e,future:t,state:n}){return IO(e,void 0,n,t)}var yl="get",vl="application/x-www-form-urlencoded";function Yc(e){return e!=null&&typeof e.tagName=="string"}function JO(e){return Yc(e)&&e.tagName.toLowerCase()==="button"}function QO(e){return Yc(e)&&e.tagName.toLowerCase()==="form"}function ZO(e){return Yc(e)&&e.tagName.toLowerCase()==="input"}function eI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tI(e,t){return e.button===0&&(!t||t==="_self")&&!eI(e)}function qf(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function nI(e,t){let n=qf(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var Ya=null;function rI(){if(Ya===null)try{new FormData(document.createElement("form"),0),Ya=!1}catch{Ya=!0}return Ya}var sI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rd(e){return e!=null&&!sI.has(e)?(cn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vl}"`),null):e}function iI(e,t){let n,r,s,i,o;if(QO(e)){let a=e.getAttribute("action");r=a?mr(a,t):null,n=e.getAttribute("method")||yl,s=rd(e.getAttribute("enctype"))||vl,i=new FormData(e)}else if(JO(e)||ZO(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?mr(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||yl,s=rd(e.getAttribute("formenctype"))||rd(a.getAttribute("enctype"))||vl,i=new FormData(a,e),!rI()){let{name:c,type:u,value:d}=e;if(u==="image"){let h=c?`${c}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else c&&i.append(c,d)}}else{if(Yc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yl,r=null,s=vl,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function tp(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function oI(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function lI(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await oI(i,n);return o.links?o.links():[]}return[]}));return fI(r.flat(1).filter(aI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Wy(e,t,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function cI(e,t,{includeHydrateFallback:n}={}){return uI(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function uI(e){return[...new Set(e)]}function dI(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function fI(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(dI(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var hI=new Set([100,101,204,205]);function mI(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&mr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function r_(){let e=v.useContext(wi);return tp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pI(){let e=v.useContext(Kc);return tp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var np=v.createContext(void 0);np.displayName="FrameworkContext";function s_(){let e=v.useContext(np);return tp(e,"You must render this element inside a <HydratedRouter> element"),e}function gI(e,t){let n=v.useContext(np),[r,s]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=v.useRef(null);v.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=p=>{p.forEach(y=>{o(y.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return h.current&&S.observe(h.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let m=()=>{s(!0)},x=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,h,{}]:[i,h,{onFocus:Fi(a,m),onBlur:Fi(l,x),onMouseEnter:Fi(c,m),onMouseLeave:Fi(u,x),onTouchStart:Fi(d,m)}]:[!1,h,{}]}function Fi(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yI({page:e,...t}){let{router:n}=r_(),r=v.useMemo(()=>KS(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?v.createElement(xI,{page:e,matches:r,...t}):null}function vI(e){let{manifest:t,routeModules:n}=s_(),[r,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return lI(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function xI({page:e,matches:t,...n}){let r=br(),{manifest:s,routeModules:i}=s_(),{basename:o}=r_(),{loaderData:a,matches:l}=pI(),c=v.useMemo(()=>Wy(e,t,l,s,r,"data"),[e,t,l,s,r]),u=v.useMemo(()=>Wy(e,t,l,s,r,"assets"),[e,t,l,s,r]),d=v.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(t.forEach(p=>{var g;let y=s.routes[p.route.id];!y||!y.hasLoader||(!c.some(b=>b.route.id===p.route.id)&&p.route.id in a&&((g=i[p.route.id])!=null&&g.shouldRevalidate)||y.hasClientLoader?w=!0:x.add(p.route.id))}),x.size===0)return[];let S=mI(e,o);return w&&x.size>0&&S.searchParams.set("_routes",t.filter(p=>x.has(p.route.id)).map(p=>p.route.id).join(",")),[S.pathname+S.search]},[o,a,r,s,c,t,e,i]),h=v.useMemo(()=>cI(u,s),[u,s]),m=vI(u);return v.createElement(v.Fragment,null,d.map(x=>v.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),h.map(x=>v.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),m.map(({key:x,link:w})=>v.createElement("link",{key:x,...w})))}function wI(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var i_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{i_&&(window.__reactRouterVersion="7.6.3")}catch{}var o_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a_=v.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},m){let{basename:x}=v.useContext(Dn),w=typeof c=="string"&&o_.test(c),S,p=!1;if(typeof c=="string"&&w&&(S=c,i_))try{let A=new URL(window.location.href),P=c.startsWith("//")?new URL(A.protocol+c):new URL(c),R=mr(P.pathname,x);P.origin===A.origin&&R!=null?c=R+P.search+P.hash:p=!0}catch{cn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=DO(c,{relative:s}),[g,b,k]=gI(r,h),C=kI(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function N(A){t&&t(A),A.defaultPrevented||C(A)}let T=v.createElement("a",{...h,...k,href:S||y,onClick:p||i?t:N,ref:wI(m,b),target:l,"data-discover":!w&&n==="render"?"true":void 0});return g&&!w?v.createElement(v.Fragment,null,T,v.createElement(yI,{page:y})):T});a_.displayName="Link";var bI=v.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let d=ua(o,{relative:c.relative}),h=br(),m=v.useContext(Kc),{navigator:x,basename:w}=v.useContext(Dn),S=m!=null&&PI(d)&&a===!0,p=x.encodeLocation?x.encodeLocation(d).pathname:d.pathname,y=h.pathname,g=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),g=g?g.toLowerCase():null,p=p.toLowerCase()),g&&w&&(g=mr(g,w)||g);const b=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let k=y===p||!s&&y.startsWith(p)&&y.charAt(b)==="/",C=g!=null&&(g===p||!s&&g.startsWith(p)&&g.charAt(p.length)==="/"),N={isActive:k,isPending:C,isTransitioning:S},T=k?t:void 0,A;typeof r=="function"?A=r(N):A=[r,k?"active":null,C?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(N):i;return v.createElement(a_,{...c,"aria-current":T,className:A,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(N):l)});bI.displayName="NavLink";var SI=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=yl,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},m)=>{let x=NI(),w=TI(a,{relative:c}),S=o.toLowerCase()==="get"?"get":"post",p=typeof a=="string"&&o_.test(a),y=g=>{if(l&&l(g),g.defaultPrevented)return;g.preventDefault();let b=g.nativeEvent.submitter,k=(b==null?void 0:b.getAttribute("formmethod"))||o;x(b||g.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:d})};return v.createElement("form",{ref:m,method:S,action:w,onSubmit:r?l:y,...h,"data-discover":!p&&e==="render"?"true":void 0})});SI.displayName="Form";function _I(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l_(e){let t=v.useContext(wi);return Ue(t,_I(e)),t}function kI(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Qm(),l=br(),c=ua(e,{relative:i});return v.useCallback(u=>{if(tI(u,t)){u.preventDefault();let d=n!==void 0?n:Wf(l)===Wf(c);a(e,{replace:d,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,n,r,t,e,s,i,o])}function EI(e){cn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(qf(e)),n=v.useRef(!1),r=br(),s=v.useMemo(()=>nI(r.search,n.current?null:t.current),[r.search]),i=Qm(),o=v.useCallback((a,l)=>{const c=qf(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var CI=0,jI=()=>`__${String(++CI)}__`;function NI(){let{router:e}=l_("useSubmit"),{basename:t}=v.useContext(Dn),n=KO();return v.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=iI(r,t);if(s.navigate===!1){let u=s.fetcherKey||jI();await e.fetch(u,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function TI(e,{relative:t}={}){let{basename:n}=v.useContext(Dn),r=v.useContext(On);Ue(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ua(e||".",{relative:t})},o=br();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:kn([n,i.pathname])),Wf(i)}function PI(e,t={}){let n=v.useContext(ZS);Ue(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=l_("useViewTransitionState"),s=ua(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=mr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=mr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dc(s.pathname,o)!=null||dc(s.pathname,i)!=null}[...hI];const AI=()=>{const[e]=EI(),t=Qm(),n=e.get("token"),[r,s]=v.useState(""),[i,o]=v.useState(""),[a,l]=v.useState(!1),[c,u]=v.useState(""),[d,h]=v.useState("");v.useEffect(()=>{n||u("Token invlido o expirado. Volv a solicitar recuperar contrasea.")},[n]);const m=async x=>{if(x.preventDefault(),u(""),!r||r.length<6){u("La contrasea debe tener al menos 6 caracteres.");return}if(r!==i){u("Las contraseas no coinciden.");return}if(!n){u("Token invlido. No se puede cambiar la contrasea.");return}l(!0);const{error:w}=await G.auth.api.updateUser(n,{password:r});w?(u("Error al actualizar la contrasea: "+w.message),l(!1)):(h("Contrasea actualizada correctamente. Ahora pods iniciar sesin."),l(!1),setTimeout(()=>{t("/login")},3e3))};return f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-folkiCream to-white px-4 font-sans",children:f.jsxs(de.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:-40},transition:{duration:.5,ease:"easeInOut"},className:"backdrop-blur-xl bg-white/80 p-6 rounded-xl shadow-2xl w-full max-w-md border border-folkiAmber",children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-4 text-folkiRed",children:"Restablecer contrasea"}),c&&f.jsx("p",{className:"text-red-600 mb-4 text-center",children:c}),d&&f.jsx("p",{className:"text-green-600 mb-4 text-center",children:d}),!d&&f.jsxs("form",{onSubmit:m,className:"space-y-4",children:[f.jsx("input",{type:"password",placeholder:"Nueva contrasea",value:r,onChange:x=>s(x.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),f.jsx("input",{type:"password",placeholder:"Confirmar nueva contrasea",value:i,onChange:x=>o(x.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-folkiAmber rounded-lg focus:outline-none focus:ring-2 focus:ring-folkiAmber"}),f.jsx(de.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.97},className:`w-full py-2 rounded-lg text-white font-semibold transition-all duration-300 shadow-md bg-folkiRed hover:bg-red-800 ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Actualizando...":"Actualizar contrasea"})]})]})})},RI=()=>f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4 py-12 bg-folkiCream rounded-2xl shadow-xl border border-folkiAmber",children:[f.jsx(cw,{className:"w-16 h-16 text-folkiRed mb-4 animate-bounce"}),f.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-folkiRed mb-2",children:"Tienda Folki muy pronto!"}),f.jsx("p",{className:"text-lg sm:text-xl text-folkiRed/80 max-w-xl mb-6",children:"Estamos creando un espacio donde artesanos, diseadores y productores folklricos puedan mostrar sus productos y proyectos con sus datos de contacto, para que puedas conocerlos y comunicarte directamente con ellos. Este espacio an est en desarrollo y pronto tendr novedades para apoyar y visibilizar a la comunidad folklrica. Estar atentos!"}),f.jsx("div",{className:"bg-folkiAmber text-folkiRed font-semibold px-4 py-2 rounded-lg shadow-md animate-pulse",children:"Prximamente..."})]});function MI(){const{user:e,loading:t,login:n,register:r,logout:s}=Tm(),{events:i,allEvents:o,filters:a,addEvent:l,toggleLike:c,toggleAttending:u,deleteEvent:d,setSelectedType:h,setSelectedProvince:m,setSelectedCity:x,clearFilters:w}=xb(),[S,p]=v.useState("cartelera"),[y,g]=v.useState(8),[b,k]=v.useState(!1);if(v.useEffect(()=>{const R=new URLSearchParams(window.location.search),z=R.get("resetpassword"),V=R.get("access_token");z==="1"&&V&&p("resetpassword")},[]),v.useEffect(()=>{if(S!=="cartelera")return;function R(){window.innerHeight+window.scrollY>=document.body.offsetHeight-300&&g(z=>Math.min(z+4,i.length))}return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[S,i.length]),t)return f.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-700 text-xl",children:f.jsx("p",{children:"Cargando..."})});if(!e&&S!=="resetpassword")return f.jsx(q3,{onLogin:n,onRegister:r});const C=async R=>{try{await l(R),p("cartelera"),g(8)}catch(z){console.error("Error al publicar el evento:",z),alert("Hubo un problema al publicar el evento. Intent nuevamente.")}},N=async R=>{await c(R,e.id)},T=async R=>{await u(R,e.id)},A=R=>{d(R)},P=()=>{switch(S){case"cartelera":{const R=new Date,z=R.getDay(),V=new Date(R);V.setDate(R.getDate()-(z+6)%7),V.setHours(0,0,0,0);const E=new Date(V);E.setDate(V.getDate()+6),E.setHours(23,59,59,999);const D=[...i].sort((_,j)=>new Date(_.date).getTime()-new Date(j.date).getTime()),M=D.filter(_=>{const j=new Date(_.date);return j>=V&&j<=E}),O=D.filter(_=>new Date(_.date)>E);return f.jsxs("div",{children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"flex justify-center items-center space-x-2 mb-4"}),f.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Cartelera de eventos"}),f.jsx("p",{className:"text-neutral-600",children:"Descubr los mejores eventos de folklore en todo el pas"})]}),f.jsx(pb,{selectedType:(a==null?void 0:a.selectedType)||"",selectedProvince:(a==null?void 0:a.selectedProvince)||"",selectedCity:(a==null?void 0:a.selectedCity)||"",onTypeChange:h,onProvinceChange:m,onCityChange:x,onClearFilters:w}),o.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx(k2,{className:"h-16 w-16 text-neutral-300 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-neutral-600 mb-2",children:"S el primero en anunciar tu evento!"}),f.jsx("p",{className:"text-neutral-500 mb-4",children:"An no hay eventos publicados. Comenz vos compartiendo tu evento folklrico!"}),f.jsx("button",{onClick:()=>p("publicar"),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Publicar evento"})]}):f.jsxs(f.Fragment,{children:[M.length>0&&f.jsxs(f.Fragment,{children:[f.jsxs("h2",{className:"flex items-center text-black font-bold mb-4 px-2 text-xl select-none animate-fade-up",style:{animationDuration:"700ms"},children:[f.jsx(Tn,{className:"mr-2"})," Esta semana"]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 px-2 mb-10",children:M.map((_,j)=>f.jsx(Ql,{event:_,onToggleLike:N,onToggleAttending:T,currentUserId:e.id,index:j,className:"animate-fade-up-delay",style:{animationDelay:`${j*.5}s`}},_.id))})]}),O.length>0&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between px-2 mb-2",children:[f.jsxs("h2",{className:"flex items-center text-black font-bold text-xl select-none animate-fade-up",style:{animationDuration:"700ms"},children:[f.jsx(Tn,{className:"mr-2"})," Prximos eventos"]}),f.jsx("button",{onClick:()=>k(_=>!_),className:"flex items-center text-black font-semibold hover:text-red-600 transition-colors duration-200 focus:outline-none","aria-expanded":b,"aria-label":b?"Contraer prximos eventos":"Expandir prximos eventos",children:b?f.jsxs(f.Fragment,{children:["Contraer ",f.jsx(lw,{className:"ml-1"})]}):f.jsxs(f.Fragment,{children:["Expandir ",f.jsx(aw,{className:"ml-1"})]})})]}),b&&f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 px-2",children:O.slice(0,y).map((_,j)=>f.jsx(Ql,{event:_,onToggleLike:N,onToggleAttending:T,currentUserId:e.id,index:j,className:"animate-fade-up-delay",style:{animationDelay:`${j*.5}s`}},_.id))}),y<O.length&&b&&f.jsx("div",{className:"text-center text-gray-500 py-4",children:"Desliza hacia abajo para cargar ms eventos..."})]})]})]})}case"calendario":return f.jsxs("div",{children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Calendario de Eventos"}),f.jsx("p",{className:"text-neutral-600",children:"Planific tu agenda folklrica"})]}),f.jsx(L3,{events:o,onLike:N,onAttend:T,currentUserId:e.id,currentUserFullName:e.full_name,currentUserAvatar:e.avatar})]});case"publicar":return f.jsxs("div",{children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Compart tu Evento"}),f.jsx("p",{className:"text-neutral-600",children:"Ayud a que ms gente descubra el folklore"})]}),f.jsx(gb,{onSubmit:C,currentUser:e})]});case"admin":return!(e!=null&&e.role)||e.role!=="admin"?f.jsxs("div",{className:"text-center py-12",children:[f.jsx("h3",{className:"text-xl font-semibold text-neutral-600 mb-2",children:"Acceso Denegado"}),f.jsx("p",{className:"text-neutral-500",children:"No tens permisos para acceder a esta seccin"})]}):f.jsx(K3,{events:o,onDeleteEvent:A});case"perfil":return f.jsx(nO,{});case"resetpassword":return f.jsx(AI,{});default:return null;case"market":return f.jsx(RI,{})}};return f.jsx("div",{className:"min-h-screen bg-transparent text-neutral-100",children:f.jsx(j3,{currentPage:S,onPageChange:p,user:e,children:f.jsx(ts,{mode:"wait",children:f.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},children:P()},S)})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>console.log("Service Worker registrado con scope:",e.scope)).catch(e=>console.error("Error registrando SW:",e))});ow(document.getElementById("root")).render(f.jsx(v.StrictMode,{children:f.jsx(MI,{})}));
